"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@mswjs+interceptors@0.39.6";
exports.ids = ["vendor-chunks/@mswjs+interceptors@0.39.6"];
exports.modules = {

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/browser/chunk-QED3Q6Z2.mjs":
/*!***************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/browser/chunk-QED3Q6Z2.mjs ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   INTERNAL_REQUEST_ID_HEADER_NAME: () => (/* binding */ INTERNAL_REQUEST_ID_HEADER_NAME),\n/* harmony export */   Interceptor: () => (/* binding */ Interceptor),\n/* harmony export */   InterceptorReadyState: () => (/* binding */ InterceptorReadyState),\n/* harmony export */   createRequestId: () => (/* binding */ createRequestId),\n/* harmony export */   deleteGlobalSymbol: () => (/* binding */ deleteGlobalSymbol),\n/* harmony export */   getGlobalSymbol: () => (/* binding */ getGlobalSymbol)\n/* harmony export */ });\n/* harmony import */ var _open_draft_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @open-draft/logger */ \"(ssr)/../../node_modules/.pnpm/@open-draft+logger@0.3.0/node_modules/@open-draft/logger/lib/index.mjs\");\n/* harmony import */ var strict_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! strict-event-emitter */ \"(ssr)/../../node_modules/.pnpm/strict-event-emitter@0.5.1/node_modules/strict-event-emitter/lib/index.mjs\");\n// src/Interceptor.ts\n\n\nvar INTERNAL_REQUEST_ID_HEADER_NAME = \"x-interceptors-internal-request-id\";\nfunction getGlobalSymbol(symbol) {\n  return (\n    // @ts-ignore https://github.com/Microsoft/TypeScript/issues/24587\n    globalThis[symbol] || void 0\n  );\n}\nfunction setGlobalSymbol(symbol, value) {\n  globalThis[symbol] = value;\n}\nfunction deleteGlobalSymbol(symbol) {\n  delete globalThis[symbol];\n}\nvar InterceptorReadyState = /* @__PURE__ */ ((InterceptorReadyState2) => {\n  InterceptorReadyState2[\"INACTIVE\"] = \"INACTIVE\";\n  InterceptorReadyState2[\"APPLYING\"] = \"APPLYING\";\n  InterceptorReadyState2[\"APPLIED\"] = \"APPLIED\";\n  InterceptorReadyState2[\"DISPOSING\"] = \"DISPOSING\";\n  InterceptorReadyState2[\"DISPOSED\"] = \"DISPOSED\";\n  return InterceptorReadyState2;\n})(InterceptorReadyState || {});\nvar Interceptor = class {\n  constructor(symbol) {\n    this.symbol = symbol;\n    this.readyState = \"INACTIVE\" /* INACTIVE */;\n    this.emitter = new strict_event_emitter__WEBPACK_IMPORTED_MODULE_1__.Emitter();\n    this.subscriptions = [];\n    this.logger = new _open_draft_logger__WEBPACK_IMPORTED_MODULE_0__.Logger(symbol.description);\n    this.emitter.setMaxListeners(0);\n    this.logger.info(\"constructing the interceptor...\");\n  }\n  /**\n   * Determine if this interceptor can be applied\n   * in the current environment.\n   */\n  checkEnvironment() {\n    return true;\n  }\n  /**\n   * Apply this interceptor to the current process.\n   * Returns an already running interceptor instance if it's present.\n   */\n  apply() {\n    const logger = this.logger.extend(\"apply\");\n    logger.info(\"applying the interceptor...\");\n    if (this.readyState === \"APPLIED\" /* APPLIED */) {\n      logger.info(\"intercepted already applied!\");\n      return;\n    }\n    const shouldApply = this.checkEnvironment();\n    if (!shouldApply) {\n      logger.info(\"the interceptor cannot be applied in this environment!\");\n      return;\n    }\n    this.readyState = \"APPLYING\" /* APPLYING */;\n    const runningInstance = this.getInstance();\n    if (runningInstance) {\n      logger.info(\"found a running instance, reusing...\");\n      this.on = (event, listener) => {\n        logger.info('proxying the \"%s\" listener', event);\n        runningInstance.emitter.addListener(event, listener);\n        this.subscriptions.push(() => {\n          runningInstance.emitter.removeListener(event, listener);\n          logger.info('removed proxied \"%s\" listener!', event);\n        });\n        return this;\n      };\n      this.readyState = \"APPLIED\" /* APPLIED */;\n      return;\n    }\n    logger.info(\"no running instance found, setting up a new instance...\");\n    this.setup();\n    this.setInstance();\n    this.readyState = \"APPLIED\" /* APPLIED */;\n  }\n  /**\n   * Setup the module augments and stubs necessary for this interceptor.\n   * This method is not run if there's a running interceptor instance\n   * to prevent instantiating an interceptor multiple times.\n   */\n  setup() {\n  }\n  /**\n   * Listen to the interceptor's public events.\n   */\n  on(event, listener) {\n    const logger = this.logger.extend(\"on\");\n    if (this.readyState === \"DISPOSING\" /* DISPOSING */ || this.readyState === \"DISPOSED\" /* DISPOSED */) {\n      logger.info(\"cannot listen to events, already disposed!\");\n      return this;\n    }\n    logger.info('adding \"%s\" event listener:', event, listener);\n    this.emitter.on(event, listener);\n    return this;\n  }\n  once(event, listener) {\n    this.emitter.once(event, listener);\n    return this;\n  }\n  off(event, listener) {\n    this.emitter.off(event, listener);\n    return this;\n  }\n  removeAllListeners(event) {\n    this.emitter.removeAllListeners(event);\n    return this;\n  }\n  /**\n   * Disposes of any side-effects this interceptor has introduced.\n   */\n  dispose() {\n    const logger = this.logger.extend(\"dispose\");\n    if (this.readyState === \"DISPOSED\" /* DISPOSED */) {\n      logger.info(\"cannot dispose, already disposed!\");\n      return;\n    }\n    logger.info(\"disposing the interceptor...\");\n    this.readyState = \"DISPOSING\" /* DISPOSING */;\n    if (!this.getInstance()) {\n      logger.info(\"no interceptors running, skipping dispose...\");\n      return;\n    }\n    this.clearInstance();\n    logger.info(\"global symbol deleted:\", getGlobalSymbol(this.symbol));\n    if (this.subscriptions.length > 0) {\n      logger.info(\"disposing of %d subscriptions...\", this.subscriptions.length);\n      for (const dispose of this.subscriptions) {\n        dispose();\n      }\n      this.subscriptions = [];\n      logger.info(\"disposed of all subscriptions!\", this.subscriptions.length);\n    }\n    this.emitter.removeAllListeners();\n    logger.info(\"destroyed the listener!\");\n    this.readyState = \"DISPOSED\" /* DISPOSED */;\n  }\n  getInstance() {\n    var _a;\n    const instance = getGlobalSymbol(this.symbol);\n    this.logger.info(\"retrieved global instance:\", (_a = instance == null ? void 0 : instance.constructor) == null ? void 0 : _a.name);\n    return instance;\n  }\n  setInstance() {\n    setGlobalSymbol(this.symbol, this);\n    this.logger.info(\"set global instance!\", this.symbol.description);\n  }\n  clearInstance() {\n    deleteGlobalSymbol(this.symbol);\n    this.logger.info(\"cleared global instance!\", this.symbol.description);\n  }\n};\n\n// src/createRequestId.ts\nfunction createRequestId() {\n  return Math.random().toString(16).slice(2);\n}\n\n\n//# sourceMappingURL=chunk-QED3Q6Z2.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9icm93c2VyL2NodW5rLVFFRDNRNloyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQzRDO0FBQ0c7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsNkJBQTZCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHlEQUFPO0FBQzlCO0FBQ0Esc0JBQXNCLHNEQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQVNFO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3JrL2RhdGEtZmV0Y2hpbmctbW9ub3JlcG8tcG9jL2RhdGEtZmV0Y2hpbmctbW9ub3JlcG8tcG9jL25vZGVfbW9kdWxlcy8ucG5wbS9AbXN3anMraW50ZXJjZXB0b3JzQDAuMzkuNi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvYnJvd3Nlci9jaHVuay1RRUQzUTZaMi5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL0ludGVyY2VwdG9yLnRzXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiQG9wZW4tZHJhZnQvbG9nZ2VyXCI7XG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSBcInN0cmljdC1ldmVudC1lbWl0dGVyXCI7XG52YXIgSU5URVJOQUxfUkVRVUVTVF9JRF9IRUFERVJfTkFNRSA9IFwieC1pbnRlcmNlcHRvcnMtaW50ZXJuYWwtcmVxdWVzdC1pZFwiO1xuZnVuY3Rpb24gZ2V0R2xvYmFsU3ltYm9sKHN5bWJvbCkge1xuICByZXR1cm4gKFxuICAgIC8vIEB0cy1pZ25vcmUgaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8yNDU4N1xuICAgIGdsb2JhbFRoaXNbc3ltYm9sXSB8fCB2b2lkIDBcbiAgKTtcbn1cbmZ1bmN0aW9uIHNldEdsb2JhbFN5bWJvbChzeW1ib2wsIHZhbHVlKSB7XG4gIGdsb2JhbFRoaXNbc3ltYm9sXSA9IHZhbHVlO1xufVxuZnVuY3Rpb24gZGVsZXRlR2xvYmFsU3ltYm9sKHN5bWJvbCkge1xuICBkZWxldGUgZ2xvYmFsVGhpc1tzeW1ib2xdO1xufVxudmFyIEludGVyY2VwdG9yUmVhZHlTdGF0ZSA9IC8qIEBfX1BVUkVfXyAqLyAoKEludGVyY2VwdG9yUmVhZHlTdGF0ZTIpID0+IHtcbiAgSW50ZXJjZXB0b3JSZWFkeVN0YXRlMltcIklOQUNUSVZFXCJdID0gXCJJTkFDVElWRVwiO1xuICBJbnRlcmNlcHRvclJlYWR5U3RhdGUyW1wiQVBQTFlJTkdcIl0gPSBcIkFQUExZSU5HXCI7XG4gIEludGVyY2VwdG9yUmVhZHlTdGF0ZTJbXCJBUFBMSUVEXCJdID0gXCJBUFBMSUVEXCI7XG4gIEludGVyY2VwdG9yUmVhZHlTdGF0ZTJbXCJESVNQT1NJTkdcIl0gPSBcIkRJU1BPU0lOR1wiO1xuICBJbnRlcmNlcHRvclJlYWR5U3RhdGUyW1wiRElTUE9TRURcIl0gPSBcIkRJU1BPU0VEXCI7XG4gIHJldHVybiBJbnRlcmNlcHRvclJlYWR5U3RhdGUyO1xufSkoSW50ZXJjZXB0b3JSZWFkeVN0YXRlIHx8IHt9KTtcbnZhciBJbnRlcmNlcHRvciA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3Ioc3ltYm9sKSB7XG4gICAgdGhpcy5zeW1ib2wgPSBzeW1ib2w7XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gXCJJTkFDVElWRVwiIC8qIElOQUNUSVZFICovO1xuICAgIHRoaXMuZW1pdHRlciA9IG5ldyBFbWl0dGVyKCk7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG4gICAgdGhpcy5sb2dnZXIgPSBuZXcgTG9nZ2VyKHN5bWJvbC5kZXNjcmlwdGlvbik7XG4gICAgdGhpcy5lbWl0dGVyLnNldE1heExpc3RlbmVycygwKTtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKFwiY29uc3RydWN0aW5nIHRoZSBpbnRlcmNlcHRvci4uLlwiKTtcbiAgfVxuICAvKipcbiAgICogRGV0ZXJtaW5lIGlmIHRoaXMgaW50ZXJjZXB0b3IgY2FuIGJlIGFwcGxpZWRcbiAgICogaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuXG4gICAqL1xuICBjaGVja0Vudmlyb25tZW50KCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSB0aGlzIGludGVyY2VwdG9yIHRvIHRoZSBjdXJyZW50IHByb2Nlc3MuXG4gICAqIFJldHVybnMgYW4gYWxyZWFkeSBydW5uaW5nIGludGVyY2VwdG9yIGluc3RhbmNlIGlmIGl0J3MgcHJlc2VudC5cbiAgICovXG4gIGFwcGx5KCkge1xuICAgIGNvbnN0IGxvZ2dlciA9IHRoaXMubG9nZ2VyLmV4dGVuZChcImFwcGx5XCIpO1xuICAgIGxvZ2dlci5pbmZvKFwiYXBwbHlpbmcgdGhlIGludGVyY2VwdG9yLi4uXCIpO1xuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFwiQVBQTElFRFwiIC8qIEFQUExJRUQgKi8pIHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiaW50ZXJjZXB0ZWQgYWxyZWFkeSBhcHBsaWVkIVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2hvdWxkQXBwbHkgPSB0aGlzLmNoZWNrRW52aXJvbm1lbnQoKTtcbiAgICBpZiAoIXNob3VsZEFwcGx5KSB7XG4gICAgICBsb2dnZXIuaW5mbyhcInRoZSBpbnRlcmNlcHRvciBjYW5ub3QgYmUgYXBwbGllZCBpbiB0aGlzIGVudmlyb25tZW50IVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gXCJBUFBMWUlOR1wiIC8qIEFQUExZSU5HICovO1xuICAgIGNvbnN0IHJ1bm5pbmdJbnN0YW5jZSA9IHRoaXMuZ2V0SW5zdGFuY2UoKTtcbiAgICBpZiAocnVubmluZ0luc3RhbmNlKSB7XG4gICAgICBsb2dnZXIuaW5mbyhcImZvdW5kIGEgcnVubmluZyBpbnN0YW5jZSwgcmV1c2luZy4uLlwiKTtcbiAgICAgIHRoaXMub24gPSAoZXZlbnQsIGxpc3RlbmVyKSA9PiB7XG4gICAgICAgIGxvZ2dlci5pbmZvKCdwcm94eWluZyB0aGUgXCIlc1wiIGxpc3RlbmVyJywgZXZlbnQpO1xuICAgICAgICBydW5uaW5nSW5zdGFuY2UuZW1pdHRlci5hZGRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIpO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaCgoKSA9PiB7XG4gICAgICAgICAgcnVubmluZ0luc3RhbmNlLmVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICAgICAgICBsb2dnZXIuaW5mbygncmVtb3ZlZCBwcm94aWVkIFwiJXNcIiBsaXN0ZW5lciEnLCBldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIkFQUExJRURcIiAvKiBBUFBMSUVEICovO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsb2dnZXIuaW5mbyhcIm5vIHJ1bm5pbmcgaW5zdGFuY2UgZm91bmQsIHNldHRpbmcgdXAgYSBuZXcgaW5zdGFuY2UuLi5cIik7XG4gICAgdGhpcy5zZXR1cCgpO1xuICAgIHRoaXMuc2V0SW5zdGFuY2UoKTtcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIkFQUExJRURcIiAvKiBBUFBMSUVEICovO1xuICB9XG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgbW9kdWxlIGF1Z21lbnRzIGFuZCBzdHVicyBuZWNlc3NhcnkgZm9yIHRoaXMgaW50ZXJjZXB0b3IuXG4gICAqIFRoaXMgbWV0aG9kIGlzIG5vdCBydW4gaWYgdGhlcmUncyBhIHJ1bm5pbmcgaW50ZXJjZXB0b3IgaW5zdGFuY2VcbiAgICogdG8gcHJldmVudCBpbnN0YW50aWF0aW5nIGFuIGludGVyY2VwdG9yIG11bHRpcGxlIHRpbWVzLlxuICAgKi9cbiAgc2V0dXAoKSB7XG4gIH1cbiAgLyoqXG4gICAqIExpc3RlbiB0byB0aGUgaW50ZXJjZXB0b3IncyBwdWJsaWMgZXZlbnRzLlxuICAgKi9cbiAgb24oZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgY29uc3QgbG9nZ2VyID0gdGhpcy5sb2dnZXIuZXh0ZW5kKFwib25cIik7XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gXCJESVNQT1NJTkdcIiAvKiBESVNQT1NJTkcgKi8gfHwgdGhpcy5yZWFkeVN0YXRlID09PSBcIkRJU1BPU0VEXCIgLyogRElTUE9TRUQgKi8pIHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiY2Fubm90IGxpc3RlbiB0byBldmVudHMsIGFscmVhZHkgZGlzcG9zZWQhXCIpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGxvZ2dlci5pbmZvKCdhZGRpbmcgXCIlc1wiIGV2ZW50IGxpc3RlbmVyOicsIGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgdGhpcy5lbWl0dGVyLm9uKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgb25jZShldmVudCwgbGlzdGVuZXIpIHtcbiAgICB0aGlzLmVtaXR0ZXIub25jZShldmVudCwgbGlzdGVuZXIpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIG9mZihldmVudCwgbGlzdGVuZXIpIHtcbiAgICB0aGlzLmVtaXR0ZXIub2ZmKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50KSB7XG4gICAgdGhpcy5lbWl0dGVyLnJlbW92ZUFsbExpc3RlbmVycyhldmVudCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIERpc3Bvc2VzIG9mIGFueSBzaWRlLWVmZmVjdHMgdGhpcyBpbnRlcmNlcHRvciBoYXMgaW50cm9kdWNlZC5cbiAgICovXG4gIGRpc3Bvc2UoKSB7XG4gICAgY29uc3QgbG9nZ2VyID0gdGhpcy5sb2dnZXIuZXh0ZW5kKFwiZGlzcG9zZVwiKTtcbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBcIkRJU1BPU0VEXCIgLyogRElTUE9TRUQgKi8pIHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiY2Fubm90IGRpc3Bvc2UsIGFscmVhZHkgZGlzcG9zZWQhXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsb2dnZXIuaW5mbyhcImRpc3Bvc2luZyB0aGUgaW50ZXJjZXB0b3IuLi5cIik7XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gXCJESVNQT1NJTkdcIiAvKiBESVNQT1NJTkcgKi87XG4gICAgaWYgKCF0aGlzLmdldEluc3RhbmNlKCkpIHtcbiAgICAgIGxvZ2dlci5pbmZvKFwibm8gaW50ZXJjZXB0b3JzIHJ1bm5pbmcsIHNraXBwaW5nIGRpc3Bvc2UuLi5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuY2xlYXJJbnN0YW5jZSgpO1xuICAgIGxvZ2dlci5pbmZvKFwiZ2xvYmFsIHN5bWJvbCBkZWxldGVkOlwiLCBnZXRHbG9iYWxTeW1ib2wodGhpcy5zeW1ib2wpKTtcbiAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiZGlzcG9zaW5nIG9mICVkIHN1YnNjcmlwdGlvbnMuLi5cIiwgdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aCk7XG4gICAgICBmb3IgKGNvbnN0IGRpc3Bvc2Ugb2YgdGhpcy5zdWJzY3JpcHRpb25zKSB7XG4gICAgICAgIGRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgICAgbG9nZ2VyLmluZm8oXCJkaXNwb3NlZCBvZiBhbGwgc3Vic2NyaXB0aW9ucyFcIiwgdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aCk7XG4gICAgfVxuICAgIHRoaXMuZW1pdHRlci5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICBsb2dnZXIuaW5mbyhcImRlc3Ryb3llZCB0aGUgbGlzdGVuZXIhXCIpO1xuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwiRElTUE9TRURcIiAvKiBESVNQT1NFRCAqLztcbiAgfVxuICBnZXRJbnN0YW5jZSgpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBnZXRHbG9iYWxTeW1ib2wodGhpcy5zeW1ib2wpO1xuICAgIHRoaXMubG9nZ2VyLmluZm8oXCJyZXRyaWV2ZWQgZ2xvYmFsIGluc3RhbmNlOlwiLCAoX2EgPSBpbnN0YW5jZSA9PSBudWxsID8gdm9pZCAwIDogaW5zdGFuY2UuY29uc3RydWN0b3IpID09IG51bGwgPyB2b2lkIDAgOiBfYS5uYW1lKTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH1cbiAgc2V0SW5zdGFuY2UoKSB7XG4gICAgc2V0R2xvYmFsU3ltYm9sKHRoaXMuc3ltYm9sLCB0aGlzKTtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKFwic2V0IGdsb2JhbCBpbnN0YW5jZSFcIiwgdGhpcy5zeW1ib2wuZGVzY3JpcHRpb24pO1xuICB9XG4gIGNsZWFySW5zdGFuY2UoKSB7XG4gICAgZGVsZXRlR2xvYmFsU3ltYm9sKHRoaXMuc3ltYm9sKTtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKFwiY2xlYXJlZCBnbG9iYWwgaW5zdGFuY2UhXCIsIHRoaXMuc3ltYm9sLmRlc2NyaXB0aW9uKTtcbiAgfVxufTtcblxuLy8gc3JjL2NyZWF0ZVJlcXVlc3RJZC50c1xuZnVuY3Rpb24gY3JlYXRlUmVxdWVzdElkKCkge1xuICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygxNikuc2xpY2UoMik7XG59XG5cbmV4cG9ydCB7XG4gIElOVEVSTkFMX1JFUVVFU1RfSURfSEVBREVSX05BTUUsXG4gIGdldEdsb2JhbFN5bWJvbCxcbiAgZGVsZXRlR2xvYmFsU3ltYm9sLFxuICBJbnRlcmNlcHRvclJlYWR5U3RhdGUsXG4gIEludGVyY2VwdG9yLFxuICBjcmVhdGVSZXF1ZXN0SWRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1RRUQzUTZaMi5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/browser/chunk-QED3Q6Z2.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/browser/chunk-TX5GBTFY.mjs":
/*!***************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/browser/chunk-TX5GBTFY.mjs ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hasConfigurableGlobal: () => (/* binding */ hasConfigurableGlobal)\n/* harmony export */ });\n// src/utils/hasConfigurableGlobal.ts\nfunction hasConfigurableGlobal(propertyName) {\n  const descriptor = Object.getOwnPropertyDescriptor(globalThis, propertyName);\n  if (typeof descriptor === \"undefined\") {\n    return false;\n  }\n  if (typeof descriptor.get === \"function\" && typeof descriptor.get() === \"undefined\") {\n    return false;\n  }\n  if (typeof descriptor.get === \"undefined\" && descriptor.value == null) {\n    return false;\n  }\n  if (typeof descriptor.set === \"undefined\" && !descriptor.configurable) {\n    console.error(\n      `[MSW] Failed to apply interceptor: the global \\`${propertyName}\\` property is non-configurable. This is likely an issue with your environment. If you are using a framework, please open an issue about this in their repository.`\n    );\n    return false;\n  }\n  return true;\n}\n\n\n//# sourceMappingURL=chunk-TX5GBTFY.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9icm93c2VyL2NodW5rLVRYNUdCVEZZLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxhQUFhO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBSUU7QUFDRiIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmsvZGF0YS1mZXRjaGluZy1tb25vcmVwby1wb2MvZGF0YS1mZXRjaGluZy1tb25vcmVwby1wb2Mvbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9icm93c2VyL2NodW5rLVRYNUdCVEZZLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvaGFzQ29uZmlndXJhYmxlR2xvYmFsLnRzXG5mdW5jdGlvbiBoYXNDb25maWd1cmFibGVHbG9iYWwocHJvcGVydHlOYW1lKSB7XG4gIGNvbnN0IGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGdsb2JhbFRoaXMsIHByb3BlcnR5TmFtZSk7XG4gIGlmICh0eXBlb2YgZGVzY3JpcHRvciA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAodHlwZW9mIGRlc2NyaXB0b3IuZ2V0ID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIGRlc2NyaXB0b3IuZ2V0KCkgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiBkZXNjcmlwdG9yLmdldCA9PT0gXCJ1bmRlZmluZWRcIiAmJiBkZXNjcmlwdG9yLnZhbHVlID09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiBkZXNjcmlwdG9yLnNldCA9PT0gXCJ1bmRlZmluZWRcIiAmJiAhZGVzY3JpcHRvci5jb25maWd1cmFibGUpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgYFtNU1ddIEZhaWxlZCB0byBhcHBseSBpbnRlcmNlcHRvcjogdGhlIGdsb2JhbCBcXGAke3Byb3BlcnR5TmFtZX1cXGAgcHJvcGVydHkgaXMgbm9uLWNvbmZpZ3VyYWJsZS4gVGhpcyBpcyBsaWtlbHkgYW4gaXNzdWUgd2l0aCB5b3VyIGVudmlyb25tZW50LiBJZiB5b3UgYXJlIHVzaW5nIGEgZnJhbWV3b3JrLCBwbGVhc2Ugb3BlbiBhbiBpc3N1ZSBhYm91dCB0aGlzIGluIHRoZWlyIHJlcG9zaXRvcnkuYFxuICAgICk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQge1xuICBoYXNDb25maWd1cmFibGVHbG9iYWxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1UWDVHQlRGWS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/browser/chunk-TX5GBTFY.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/browser/interceptors/WebSocket/index.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/browser/interceptors/WebSocket/index.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CancelableCloseEvent: () => (/* binding */ CancelableCloseEvent),\n/* harmony export */   CancelableMessageEvent: () => (/* binding */ CancelableMessageEvent),\n/* harmony export */   CloseEvent: () => (/* binding */ CloseEvent),\n/* harmony export */   WebSocketClientConnection: () => (/* binding */ WebSocketClientConnection),\n/* harmony export */   WebSocketClientConnectionProtocol: () => (/* binding */ WebSocketClientConnectionProtocol),\n/* harmony export */   WebSocketInterceptor: () => (/* binding */ WebSocketInterceptor),\n/* harmony export */   WebSocketServerConnection: () => (/* binding */ WebSocketServerConnection),\n/* harmony export */   WebSocketServerConnectionProtocol: () => (/* binding */ WebSocketServerConnectionProtocol)\n/* harmony export */ });\n/* harmony import */ var _chunk_TX5GBTFY_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunk-TX5GBTFY.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/browser/chunk-TX5GBTFY.mjs\");\n/* harmony import */ var _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../chunk-QED3Q6Z2.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/browser/chunk-QED3Q6Z2.mjs\");\n/* harmony import */ var outvariant__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! outvariant */ \"(ssr)/../../node_modules/.pnpm/outvariant@1.4.3/node_modules/outvariant/lib/index.mjs\");\n/* harmony import */ var _open_draft_deferred_promise__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @open-draft/deferred-promise */ \"(ssr)/../../node_modules/.pnpm/@open-draft+deferred-promise@2.2.0/node_modules/@open-draft/deferred-promise/build/index.mjs\");\n\n\n\n// src/interceptors/WebSocket/utils/bindEvent.ts\nfunction bindEvent(target, event) {\n  Object.defineProperties(event, {\n    target: {\n      value: target,\n      enumerable: true,\n      writable: true\n    },\n    currentTarget: {\n      value: target,\n      enumerable: true,\n      writable: true\n    }\n  });\n  return event;\n}\n\n// src/interceptors/WebSocket/utils/events.ts\nvar kCancelable = Symbol(\"kCancelable\");\nvar kDefaultPrevented = Symbol(\"kDefaultPrevented\");\nvar CancelableMessageEvent = class extends MessageEvent {\n  constructor(type, init) {\n    super(type, init);\n    this[kCancelable] = !!init.cancelable;\n    this[kDefaultPrevented] = false;\n  }\n  get cancelable() {\n    return this[kCancelable];\n  }\n  set cancelable(nextCancelable) {\n    this[kCancelable] = nextCancelable;\n  }\n  get defaultPrevented() {\n    return this[kDefaultPrevented];\n  }\n  set defaultPrevented(nextDefaultPrevented) {\n    this[kDefaultPrevented] = nextDefaultPrevented;\n  }\n  preventDefault() {\n    if (this.cancelable && !this[kDefaultPrevented]) {\n      this[kDefaultPrevented] = true;\n    }\n  }\n};\nkCancelable, kDefaultPrevented;\nvar CloseEvent = class extends Event {\n  constructor(type, init = {}) {\n    super(type, init);\n    this.code = init.code === void 0 ? 0 : init.code;\n    this.reason = init.reason === void 0 ? \"\" : init.reason;\n    this.wasClean = init.wasClean === void 0 ? false : init.wasClean;\n  }\n};\nvar CancelableCloseEvent = class extends CloseEvent {\n  constructor(type, init = {}) {\n    super(type, init);\n    this[kCancelable] = !!init.cancelable;\n    this[kDefaultPrevented] = false;\n  }\n  get cancelable() {\n    return this[kCancelable];\n  }\n  set cancelable(nextCancelable) {\n    this[kCancelable] = nextCancelable;\n  }\n  get defaultPrevented() {\n    return this[kDefaultPrevented];\n  }\n  set defaultPrevented(nextDefaultPrevented) {\n    this[kDefaultPrevented] = nextDefaultPrevented;\n  }\n  preventDefault() {\n    if (this.cancelable && !this[kDefaultPrevented]) {\n      this[kDefaultPrevented] = true;\n    }\n  }\n};\nkCancelable, kDefaultPrevented;\n\n// src/interceptors/WebSocket/WebSocketClientConnection.ts\nvar kEmitter = Symbol(\"kEmitter\");\nvar kBoundListener = Symbol(\"kBoundListener\");\nvar WebSocketClientConnectionProtocol = class {\n};\nvar WebSocketClientConnection = class {\n  constructor(socket, transport) {\n    this.socket = socket;\n    this.transport = transport;\n    this.id = (0,_chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_1__.createRequestId)();\n    this.url = new URL(socket.url);\n    this[kEmitter] = new EventTarget();\n    this.transport.addEventListener(\"outgoing\", (event) => {\n      const message = bindEvent(\n        this.socket,\n        new CancelableMessageEvent(\"message\", {\n          data: event.data,\n          origin: event.origin,\n          cancelable: true\n        })\n      );\n      this[kEmitter].dispatchEvent(message);\n      if (message.defaultPrevented) {\n        event.preventDefault();\n      }\n    });\n    this.transport.addEventListener(\"close\", (event) => {\n      this[kEmitter].dispatchEvent(\n        bindEvent(this.socket, new CloseEvent(\"close\", event))\n      );\n    });\n  }\n  /**\n   * Listen for the outgoing events from the connected WebSocket client.\n   */\n  addEventListener(type, listener, options) {\n    if (!Reflect.has(listener, kBoundListener)) {\n      const boundListener = listener.bind(this.socket);\n      Object.defineProperty(listener, kBoundListener, {\n        value: boundListener,\n        enumerable: false,\n        configurable: false\n      });\n    }\n    this[kEmitter].addEventListener(\n      type,\n      Reflect.get(listener, kBoundListener),\n      options\n    );\n  }\n  /**\n   * Removes the listener for the given event.\n   */\n  removeEventListener(event, listener, options) {\n    this[kEmitter].removeEventListener(\n      event,\n      Reflect.get(listener, kBoundListener),\n      options\n    );\n  }\n  /**\n   * Send data to the connected client.\n   */\n  send(data) {\n    this.transport.send(data);\n  }\n  /**\n   * Close the WebSocket connection.\n   * @param {number} code A status code (see https://www.rfc-editor.org/rfc/rfc6455#section-7.4.1).\n   * @param {string} reason A custom connection close reason.\n   */\n  close(code, reason) {\n    this.transport.close(code, reason);\n  }\n};\nkEmitter;\n\n// src/interceptors/WebSocket/WebSocketServerConnection.ts\n\n\n// src/interceptors/WebSocket/WebSocketOverride.ts\n\n\nvar WEBSOCKET_CLOSE_CODE_RANGE_ERROR = \"InvalidAccessError: close code out of user configurable range\";\nvar kPassthroughPromise = Symbol(\"kPassthroughPromise\");\nvar kOnSend = Symbol(\"kOnSend\");\nvar kClose = Symbol(\"kClose\");\nvar WebSocketOverride = class extends EventTarget {\n  constructor(url, protocols) {\n    super();\n    this.CONNECTING = 0;\n    this.OPEN = 1;\n    this.CLOSING = 2;\n    this.CLOSED = 3;\n    this._onopen = null;\n    this._onmessage = null;\n    this._onerror = null;\n    this._onclose = null;\n    this.url = url.toString();\n    this.protocol = \"\";\n    this.extensions = \"\";\n    this.binaryType = \"blob\";\n    this.readyState = this.CONNECTING;\n    this.bufferedAmount = 0;\n    this[kPassthroughPromise] = new _open_draft_deferred_promise__WEBPACK_IMPORTED_MODULE_3__.DeferredPromise();\n    queueMicrotask(async () => {\n      if (await this[kPassthroughPromise]) {\n        return;\n      }\n      this.protocol = typeof protocols === \"string\" ? protocols : Array.isArray(protocols) && protocols.length > 0 ? protocols[0] : \"\";\n      if (this.readyState === this.CONNECTING) {\n        this.readyState = this.OPEN;\n        this.dispatchEvent(bindEvent(this, new Event(\"open\")));\n      }\n    });\n  }\n  set onopen(listener) {\n    this.removeEventListener(\"open\", this._onopen);\n    this._onopen = listener;\n    if (listener !== null) {\n      this.addEventListener(\"open\", listener);\n    }\n  }\n  get onopen() {\n    return this._onopen;\n  }\n  set onmessage(listener) {\n    this.removeEventListener(\n      \"message\",\n      this._onmessage\n    );\n    this._onmessage = listener;\n    if (listener !== null) {\n      this.addEventListener(\"message\", listener);\n    }\n  }\n  get onmessage() {\n    return this._onmessage;\n  }\n  set onerror(listener) {\n    this.removeEventListener(\"error\", this._onerror);\n    this._onerror = listener;\n    if (listener !== null) {\n      this.addEventListener(\"error\", listener);\n    }\n  }\n  get onerror() {\n    return this._onerror;\n  }\n  set onclose(listener) {\n    this.removeEventListener(\"close\", this._onclose);\n    this._onclose = listener;\n    if (listener !== null) {\n      this.addEventListener(\"close\", listener);\n    }\n  }\n  get onclose() {\n    return this._onclose;\n  }\n  /**\n   * @see https://websockets.spec.whatwg.org/#ref-for-dom-websocket-send%E2%91%A0\n   */\n  send(data) {\n    if (this.readyState === this.CONNECTING) {\n      this.close();\n      throw new DOMException(\"InvalidStateError\");\n    }\n    if (this.readyState === this.CLOSING || this.readyState === this.CLOSED) {\n      return;\n    }\n    this.bufferedAmount += getDataSize(data);\n    queueMicrotask(() => {\n      var _a;\n      this.bufferedAmount = 0;\n      (_a = this[kOnSend]) == null ? void 0 : _a.call(this, data);\n    });\n  }\n  close(code = 1e3, reason) {\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_2__.invariant)(code, WEBSOCKET_CLOSE_CODE_RANGE_ERROR);\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_2__.invariant)(\n      code === 1e3 || code >= 3e3 && code <= 4999,\n      WEBSOCKET_CLOSE_CODE_RANGE_ERROR\n    );\n    this[kClose](code, reason);\n  }\n  [(kPassthroughPromise, kOnSend, kClose)](code = 1e3, reason, wasClean = true) {\n    if (this.readyState === this.CLOSING || this.readyState === this.CLOSED) {\n      return;\n    }\n    this.readyState = this.CLOSING;\n    queueMicrotask(() => {\n      this.readyState = this.CLOSED;\n      this.dispatchEvent(\n        bindEvent(\n          this,\n          new CloseEvent(\"close\", {\n            code,\n            reason,\n            wasClean\n          })\n        )\n      );\n      this._onopen = null;\n      this._onmessage = null;\n      this._onerror = null;\n      this._onclose = null;\n    });\n  }\n  addEventListener(type, listener, options) {\n    return super.addEventListener(\n      type,\n      listener,\n      options\n    );\n  }\n  removeEventListener(type, callback, options) {\n    return super.removeEventListener(type, callback, options);\n  }\n};\nWebSocketOverride.CONNECTING = 0;\nWebSocketOverride.OPEN = 1;\nWebSocketOverride.CLOSING = 2;\nWebSocketOverride.CLOSED = 3;\nfunction getDataSize(data) {\n  if (typeof data === \"string\") {\n    return data.length;\n  }\n  if (data instanceof Blob) {\n    return data.size;\n  }\n  return data.byteLength;\n}\n\n// src/interceptors/WebSocket/WebSocketServerConnection.ts\nvar kEmitter2 = Symbol(\"kEmitter\");\nvar kBoundListener2 = Symbol(\"kBoundListener\");\nvar kSend = Symbol(\"kSend\");\nvar WebSocketServerConnectionProtocol = class {\n};\nvar WebSocketServerConnection = class {\n  constructor(client, transport, createConnection) {\n    this.client = client;\n    this.transport = transport;\n    this.createConnection = createConnection;\n    this[kEmitter2] = new EventTarget();\n    this.mockCloseController = new AbortController();\n    this.realCloseController = new AbortController();\n    this.transport.addEventListener(\"outgoing\", (event) => {\n      if (typeof this.realWebSocket === \"undefined\") {\n        return;\n      }\n      queueMicrotask(() => {\n        if (!event.defaultPrevented) {\n          this[kSend](event.data);\n        }\n      });\n    });\n    this.transport.addEventListener(\n      \"incoming\",\n      this.handleIncomingMessage.bind(this)\n    );\n  }\n  /**\n   * The `WebSocket` instance connected to the original server.\n   * Accessing this before calling `server.connect()` will throw.\n   */\n  get socket() {\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_2__.invariant)(\n      this.realWebSocket,\n      'Cannot access \"socket\" on the original WebSocket server object: the connection is not open. Did you forget to call `server.connect()`?'\n    );\n    return this.realWebSocket;\n  }\n  /**\n   * Open connection to the original WebSocket server.\n   */\n  connect() {\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_2__.invariant)(\n      !this.realWebSocket || this.realWebSocket.readyState !== WebSocket.OPEN,\n      'Failed to call \"connect()\" on the original WebSocket instance: the connection already open'\n    );\n    const realWebSocket = this.createConnection();\n    realWebSocket.binaryType = this.client.binaryType;\n    realWebSocket.addEventListener(\n      \"open\",\n      (event) => {\n        this[kEmitter2].dispatchEvent(\n          bindEvent(this.realWebSocket, new Event(\"open\", event))\n        );\n      },\n      { once: true }\n    );\n    realWebSocket.addEventListener(\"message\", (event) => {\n      this.transport.dispatchEvent(\n        bindEvent(\n          this.realWebSocket,\n          new MessageEvent(\"incoming\", {\n            data: event.data,\n            origin: event.origin\n          })\n        )\n      );\n    });\n    this.client.addEventListener(\n      \"close\",\n      (event) => {\n        this.handleMockClose(event);\n      },\n      {\n        signal: this.mockCloseController.signal\n      }\n    );\n    realWebSocket.addEventListener(\n      \"close\",\n      (event) => {\n        this.handleRealClose(event);\n      },\n      {\n        signal: this.realCloseController.signal\n      }\n    );\n    realWebSocket.addEventListener(\"error\", () => {\n      const errorEvent = bindEvent(\n        realWebSocket,\n        new Event(\"error\", { cancelable: true })\n      );\n      this[kEmitter2].dispatchEvent(errorEvent);\n      if (!errorEvent.defaultPrevented) {\n        this.client.dispatchEvent(bindEvent(this.client, new Event(\"error\")));\n      }\n    });\n    this.realWebSocket = realWebSocket;\n  }\n  /**\n   * Listen for the incoming events from the original WebSocket server.\n   */\n  addEventListener(event, listener, options) {\n    if (!Reflect.has(listener, kBoundListener2)) {\n      const boundListener = listener.bind(this.client);\n      Object.defineProperty(listener, kBoundListener2, {\n        value: boundListener,\n        enumerable: false\n      });\n    }\n    this[kEmitter2].addEventListener(\n      event,\n      Reflect.get(listener, kBoundListener2),\n      options\n    );\n  }\n  /**\n   * Remove the listener for the given event.\n   */\n  removeEventListener(event, listener, options) {\n    this[kEmitter2].removeEventListener(\n      event,\n      Reflect.get(listener, kBoundListener2),\n      options\n    );\n  }\n  /**\n   * Send data to the original WebSocket server.\n   * @example\n   * server.send('hello')\n   * server.send(new Blob(['hello']))\n   * server.send(new TextEncoder().encode('hello'))\n   */\n  send(data) {\n    this[kSend](data);\n  }\n  [(kEmitter2, kSend)](data) {\n    const { realWebSocket } = this;\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_2__.invariant)(\n      realWebSocket,\n      'Failed to call \"server.send()\" for \"%s\": the connection is not open. Did you forget to call \"server.connect()\"?',\n      this.client.url\n    );\n    if (realWebSocket.readyState === WebSocket.CLOSING || realWebSocket.readyState === WebSocket.CLOSED) {\n      return;\n    }\n    if (realWebSocket.readyState === WebSocket.CONNECTING) {\n      realWebSocket.addEventListener(\n        \"open\",\n        () => {\n          realWebSocket.send(data);\n        },\n        { once: true }\n      );\n      return;\n    }\n    realWebSocket.send(data);\n  }\n  /**\n   * Close the actual server connection.\n   */\n  close() {\n    const { realWebSocket } = this;\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_2__.invariant)(\n      realWebSocket,\n      'Failed to close server connection for \"%s\": the connection is not open. Did you forget to call \"server.connect()\"?',\n      this.client.url\n    );\n    this.realCloseController.abort();\n    if (realWebSocket.readyState === WebSocket.CLOSING || realWebSocket.readyState === WebSocket.CLOSED) {\n      return;\n    }\n    realWebSocket.close();\n    queueMicrotask(() => {\n      this[kEmitter2].dispatchEvent(\n        bindEvent(\n          this.realWebSocket,\n          new CancelableCloseEvent(\"close\", {\n            /**\n             * @note `server.close()` in the interceptor\n             * always results in clean closures.\n             */\n            code: 1e3,\n            cancelable: true\n          })\n        )\n      );\n    });\n  }\n  handleIncomingMessage(event) {\n    const messageEvent = bindEvent(\n      event.target,\n      new CancelableMessageEvent(\"message\", {\n        data: event.data,\n        origin: event.origin,\n        cancelable: true\n      })\n    );\n    this[kEmitter2].dispatchEvent(messageEvent);\n    if (!messageEvent.defaultPrevented) {\n      this.client.dispatchEvent(\n        bindEvent(\n          /**\n           * @note Bind the forwarded original server events\n           * to the mock WebSocket instance so it would\n           * dispatch them straight away.\n           */\n          this.client,\n          // Clone the message event again to prevent\n          // the \"already being dispatched\" exception.\n          new MessageEvent(\"message\", {\n            data: event.data,\n            origin: event.origin\n          })\n        )\n      );\n    }\n  }\n  handleMockClose(_event) {\n    if (this.realWebSocket) {\n      this.realWebSocket.close();\n    }\n  }\n  handleRealClose(event) {\n    this.mockCloseController.abort();\n    const closeEvent = bindEvent(\n      this.realWebSocket,\n      new CancelableCloseEvent(\"close\", {\n        code: event.code,\n        reason: event.reason,\n        wasClean: event.wasClean,\n        cancelable: true\n      })\n    );\n    this[kEmitter2].dispatchEvent(closeEvent);\n    if (!closeEvent.defaultPrevented) {\n      this.client[kClose](event.code, event.reason);\n    }\n  }\n};\n\n// src/interceptors/WebSocket/WebSocketClassTransport.ts\nvar WebSocketClassTransport = class extends EventTarget {\n  constructor(socket) {\n    super();\n    this.socket = socket;\n    this.socket.addEventListener(\"close\", (event) => {\n      this.dispatchEvent(bindEvent(this.socket, new CloseEvent(\"close\", event)));\n    });\n    this.socket[kOnSend] = (data) => {\n      this.dispatchEvent(\n        bindEvent(\n          this.socket,\n          // Dispatch this as cancelable because \"client\" connection\n          // re-creates this message event (cannot dispatch the same event).\n          new CancelableMessageEvent(\"outgoing\", {\n            data,\n            origin: this.socket.url,\n            cancelable: true\n          })\n        )\n      );\n    };\n  }\n  addEventListener(type, callback, options) {\n    return super.addEventListener(type, callback, options);\n  }\n  dispatchEvent(event) {\n    return super.dispatchEvent(event);\n  }\n  send(data) {\n    queueMicrotask(() => {\n      if (this.socket.readyState === this.socket.CLOSING || this.socket.readyState === this.socket.CLOSED) {\n        return;\n      }\n      const dispatchEvent = () => {\n        this.socket.dispatchEvent(\n          bindEvent(\n            /**\n             * @note Setting this event's \"target\" to the\n             * WebSocket override instance is important.\n             * This way it can tell apart original incoming events\n             * (must be forwarded to the transport) from the\n             * mocked message events like the one below\n             * (must be dispatched on the client instance).\n             */\n            this.socket,\n            new MessageEvent(\"message\", {\n              data,\n              origin: this.socket.url\n            })\n          )\n        );\n      };\n      if (this.socket.readyState === this.socket.CONNECTING) {\n        this.socket.addEventListener(\n          \"open\",\n          () => {\n            dispatchEvent();\n          },\n          { once: true }\n        );\n      } else {\n        dispatchEvent();\n      }\n    });\n  }\n  close(code, reason) {\n    this.socket[kClose](code, reason);\n  }\n};\n\n// src/interceptors/WebSocket/index.ts\nvar _WebSocketInterceptor = class extends _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_1__.Interceptor {\n  constructor() {\n    super(_WebSocketInterceptor.symbol);\n  }\n  checkEnvironment() {\n    return (0,_chunk_TX5GBTFY_mjs__WEBPACK_IMPORTED_MODULE_0__.hasConfigurableGlobal)(\"WebSocket\");\n  }\n  setup() {\n    const originalWebSocketDescriptor = Object.getOwnPropertyDescriptor(\n      globalThis,\n      \"WebSocket\"\n    );\n    const WebSocketProxy = new Proxy(globalThis.WebSocket, {\n      construct: (target, args, newTarget) => {\n        const [url, protocols] = args;\n        const createConnection = () => {\n          return Reflect.construct(target, args, newTarget);\n        };\n        const socket = new WebSocketOverride(url, protocols);\n        const transport = new WebSocketClassTransport(socket);\n        queueMicrotask(() => {\n          try {\n            const server = new WebSocketServerConnection(\n              socket,\n              transport,\n              createConnection\n            );\n            const hasConnectionListeners = this.emitter.emit(\"connection\", {\n              client: new WebSocketClientConnection(socket, transport),\n              server,\n              info: {\n                protocols\n              }\n            });\n            if (hasConnectionListeners) {\n              socket[kPassthroughPromise].resolve(false);\n            } else {\n              socket[kPassthroughPromise].resolve(true);\n              server.connect();\n              server.addEventListener(\"open\", () => {\n                socket.dispatchEvent(bindEvent(socket, new Event(\"open\")));\n                if (server[\"realWebSocket\"]) {\n                  socket.protocol = server[\"realWebSocket\"].protocol;\n                }\n              });\n            }\n          } catch (error) {\n            if (error instanceof Error) {\n              socket.dispatchEvent(new Event(\"error\"));\n              if (socket.readyState !== WebSocket.CLOSING && socket.readyState !== WebSocket.CLOSED) {\n                socket[kClose](1011, error.message, false);\n              }\n              console.error(error);\n            }\n          }\n        });\n        return socket;\n      }\n    });\n    Object.defineProperty(globalThis, \"WebSocket\", {\n      value: WebSocketProxy,\n      configurable: true\n    });\n    this.subscriptions.push(() => {\n      Object.defineProperty(\n        globalThis,\n        \"WebSocket\",\n        originalWebSocketDescriptor\n      );\n    });\n  }\n};\nvar WebSocketInterceptor = _WebSocketInterceptor;\nWebSocketInterceptor.symbol = Symbol(\"websocket\");\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9icm93c2VyL2ludGVyY2VwdG9ycy9XZWJTb2NrZXQvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUVrQztBQUlBOztBQUVsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsb0VBQWU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3FEOztBQUVyRDtBQUN1QztBQUN3QjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MseUVBQWU7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSSxxREFBUztBQUNiLElBQUkscURBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxxREFBVTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkscURBQVU7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixrQkFBa0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnQkFBZ0I7QUFDNUIsSUFBSSxxREFBVTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnQkFBZ0I7QUFDNUIsSUFBSSxxREFBVTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxZQUFZO0FBQ1o7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMENBQTBDLDREQUFXO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywwRUFBcUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFVRTtBQUNGIiwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29yay9kYXRhLWZldGNoaW5nLW1vbm9yZXBvLXBvYy9kYXRhLWZldGNoaW5nLW1vbm9yZXBvLXBvYy9ub2RlX21vZHVsZXMvLnBucG0vQG1zd2pzK2ludGVyY2VwdG9yc0AwLjM5LjYvbm9kZV9tb2R1bGVzL0Btc3dqcy9pbnRlcmNlcHRvcnMvbGliL2Jyb3dzZXIvaW50ZXJjZXB0b3JzL1dlYlNvY2tldC9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgaGFzQ29uZmlndXJhYmxlR2xvYmFsXG59IGZyb20gXCIuLi8uLi9jaHVuay1UWDVHQlRGWS5tanNcIjtcbmltcG9ydCB7XG4gIEludGVyY2VwdG9yLFxuICBjcmVhdGVSZXF1ZXN0SWRcbn0gZnJvbSBcIi4uLy4uL2NodW5rLVFFRDNRNloyLm1qc1wiO1xuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL1dlYlNvY2tldC91dGlscy9iaW5kRXZlbnQudHNcbmZ1bmN0aW9uIGJpbmRFdmVudCh0YXJnZXQsIGV2ZW50KSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGV2ZW50LCB7XG4gICAgdGFyZ2V0OiB7XG4gICAgICB2YWx1ZTogdGFyZ2V0LFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSxcbiAgICBjdXJyZW50VGFyZ2V0OiB7XG4gICAgICB2YWx1ZTogdGFyZ2V0LFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGV2ZW50O1xufVxuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL1dlYlNvY2tldC91dGlscy9ldmVudHMudHNcbnZhciBrQ2FuY2VsYWJsZSA9IFN5bWJvbChcImtDYW5jZWxhYmxlXCIpO1xudmFyIGtEZWZhdWx0UHJldmVudGVkID0gU3ltYm9sKFwia0RlZmF1bHRQcmV2ZW50ZWRcIik7XG52YXIgQ2FuY2VsYWJsZU1lc3NhZ2VFdmVudCA9IGNsYXNzIGV4dGVuZHMgTWVzc2FnZUV2ZW50IHtcbiAgY29uc3RydWN0b3IodHlwZSwgaW5pdCkge1xuICAgIHN1cGVyKHR5cGUsIGluaXQpO1xuICAgIHRoaXNba0NhbmNlbGFibGVdID0gISFpbml0LmNhbmNlbGFibGU7XG4gICAgdGhpc1trRGVmYXVsdFByZXZlbnRlZF0gPSBmYWxzZTtcbiAgfVxuICBnZXQgY2FuY2VsYWJsZSgpIHtcbiAgICByZXR1cm4gdGhpc1trQ2FuY2VsYWJsZV07XG4gIH1cbiAgc2V0IGNhbmNlbGFibGUobmV4dENhbmNlbGFibGUpIHtcbiAgICB0aGlzW2tDYW5jZWxhYmxlXSA9IG5leHRDYW5jZWxhYmxlO1xuICB9XG4gIGdldCBkZWZhdWx0UHJldmVudGVkKCkge1xuICAgIHJldHVybiB0aGlzW2tEZWZhdWx0UHJldmVudGVkXTtcbiAgfVxuICBzZXQgZGVmYXVsdFByZXZlbnRlZChuZXh0RGVmYXVsdFByZXZlbnRlZCkge1xuICAgIHRoaXNba0RlZmF1bHRQcmV2ZW50ZWRdID0gbmV4dERlZmF1bHRQcmV2ZW50ZWQ7XG4gIH1cbiAgcHJldmVudERlZmF1bHQoKSB7XG4gICAgaWYgKHRoaXMuY2FuY2VsYWJsZSAmJiAhdGhpc1trRGVmYXVsdFByZXZlbnRlZF0pIHtcbiAgICAgIHRoaXNba0RlZmF1bHRQcmV2ZW50ZWRdID0gdHJ1ZTtcbiAgICB9XG4gIH1cbn07XG5rQ2FuY2VsYWJsZSwga0RlZmF1bHRQcmV2ZW50ZWQ7XG52YXIgQ2xvc2VFdmVudCA9IGNsYXNzIGV4dGVuZHMgRXZlbnQge1xuICBjb25zdHJ1Y3Rvcih0eXBlLCBpbml0ID0ge30pIHtcbiAgICBzdXBlcih0eXBlLCBpbml0KTtcbiAgICB0aGlzLmNvZGUgPSBpbml0LmNvZGUgPT09IHZvaWQgMCA/IDAgOiBpbml0LmNvZGU7XG4gICAgdGhpcy5yZWFzb24gPSBpbml0LnJlYXNvbiA9PT0gdm9pZCAwID8gXCJcIiA6IGluaXQucmVhc29uO1xuICAgIHRoaXMud2FzQ2xlYW4gPSBpbml0Lndhc0NsZWFuID09PSB2b2lkIDAgPyBmYWxzZSA6IGluaXQud2FzQ2xlYW47XG4gIH1cbn07XG52YXIgQ2FuY2VsYWJsZUNsb3NlRXZlbnQgPSBjbGFzcyBleHRlbmRzIENsb3NlRXZlbnQge1xuICBjb25zdHJ1Y3Rvcih0eXBlLCBpbml0ID0ge30pIHtcbiAgICBzdXBlcih0eXBlLCBpbml0KTtcbiAgICB0aGlzW2tDYW5jZWxhYmxlXSA9ICEhaW5pdC5jYW5jZWxhYmxlO1xuICAgIHRoaXNba0RlZmF1bHRQcmV2ZW50ZWRdID0gZmFsc2U7XG4gIH1cbiAgZ2V0IGNhbmNlbGFibGUoKSB7XG4gICAgcmV0dXJuIHRoaXNba0NhbmNlbGFibGVdO1xuICB9XG4gIHNldCBjYW5jZWxhYmxlKG5leHRDYW5jZWxhYmxlKSB7XG4gICAgdGhpc1trQ2FuY2VsYWJsZV0gPSBuZXh0Q2FuY2VsYWJsZTtcbiAgfVxuICBnZXQgZGVmYXVsdFByZXZlbnRlZCgpIHtcbiAgICByZXR1cm4gdGhpc1trRGVmYXVsdFByZXZlbnRlZF07XG4gIH1cbiAgc2V0IGRlZmF1bHRQcmV2ZW50ZWQobmV4dERlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICB0aGlzW2tEZWZhdWx0UHJldmVudGVkXSA9IG5leHREZWZhdWx0UHJldmVudGVkO1xuICB9XG4gIHByZXZlbnREZWZhdWx0KCkge1xuICAgIGlmICh0aGlzLmNhbmNlbGFibGUgJiYgIXRoaXNba0RlZmF1bHRQcmV2ZW50ZWRdKSB7XG4gICAgICB0aGlzW2tEZWZhdWx0UHJldmVudGVkXSA9IHRydWU7XG4gICAgfVxuICB9XG59O1xua0NhbmNlbGFibGUsIGtEZWZhdWx0UHJldmVudGVkO1xuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL1dlYlNvY2tldC9XZWJTb2NrZXRDbGllbnRDb25uZWN0aW9uLnRzXG52YXIga0VtaXR0ZXIgPSBTeW1ib2woXCJrRW1pdHRlclwiKTtcbnZhciBrQm91bmRMaXN0ZW5lciA9IFN5bWJvbChcImtCb3VuZExpc3RlbmVyXCIpO1xudmFyIFdlYlNvY2tldENsaWVudENvbm5lY3Rpb25Qcm90b2NvbCA9IGNsYXNzIHtcbn07XG52YXIgV2ViU29ja2V0Q2xpZW50Q29ubmVjdGlvbiA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3Ioc29ja2V0LCB0cmFuc3BvcnQpIHtcbiAgICB0aGlzLnNvY2tldCA9IHNvY2tldDtcbiAgICB0aGlzLnRyYW5zcG9ydCA9IHRyYW5zcG9ydDtcbiAgICB0aGlzLmlkID0gY3JlYXRlUmVxdWVzdElkKCk7XG4gICAgdGhpcy51cmwgPSBuZXcgVVJMKHNvY2tldC51cmwpO1xuICAgIHRoaXNba0VtaXR0ZXJdID0gbmV3IEV2ZW50VGFyZ2V0KCk7XG4gICAgdGhpcy50cmFuc3BvcnQuYWRkRXZlbnRMaXN0ZW5lcihcIm91dGdvaW5nXCIsIChldmVudCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGJpbmRFdmVudChcbiAgICAgICAgdGhpcy5zb2NrZXQsXG4gICAgICAgIG5ldyBDYW5jZWxhYmxlTWVzc2FnZUV2ZW50KFwibWVzc2FnZVwiLCB7XG4gICAgICAgICAgZGF0YTogZXZlbnQuZGF0YSxcbiAgICAgICAgICBvcmlnaW46IGV2ZW50Lm9yaWdpbixcbiAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgdGhpc1trRW1pdHRlcl0uZGlzcGF0Y2hFdmVudChtZXNzYWdlKTtcbiAgICAgIGlmIChtZXNzYWdlLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLnRyYW5zcG9ydC5hZGRFdmVudExpc3RlbmVyKFwiY2xvc2VcIiwgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzW2tFbWl0dGVyXS5kaXNwYXRjaEV2ZW50KFxuICAgICAgICBiaW5kRXZlbnQodGhpcy5zb2NrZXQsIG5ldyBDbG9zZUV2ZW50KFwiY2xvc2VcIiwgZXZlbnQpKVxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogTGlzdGVuIGZvciB0aGUgb3V0Z29pbmcgZXZlbnRzIGZyb20gdGhlIGNvbm5lY3RlZCBXZWJTb2NrZXQgY2xpZW50LlxuICAgKi9cbiAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucykge1xuICAgIGlmICghUmVmbGVjdC5oYXMobGlzdGVuZXIsIGtCb3VuZExpc3RlbmVyKSkge1xuICAgICAgY29uc3QgYm91bmRMaXN0ZW5lciA9IGxpc3RlbmVyLmJpbmQodGhpcy5zb2NrZXQpO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGxpc3RlbmVyLCBrQm91bmRMaXN0ZW5lciwge1xuICAgICAgICB2YWx1ZTogYm91bmRMaXN0ZW5lcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2VcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzW2tFbWl0dGVyXS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgdHlwZSxcbiAgICAgIFJlZmxlY3QuZ2V0KGxpc3RlbmVyLCBrQm91bmRMaXN0ZW5lciksXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgbGlzdGVuZXIgZm9yIHRoZSBnaXZlbiBldmVudC5cbiAgICovXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyLCBvcHRpb25zKSB7XG4gICAgdGhpc1trRW1pdHRlcl0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgIGV2ZW50LFxuICAgICAgUmVmbGVjdC5nZXQobGlzdGVuZXIsIGtCb3VuZExpc3RlbmVyKSxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBTZW5kIGRhdGEgdG8gdGhlIGNvbm5lY3RlZCBjbGllbnQuXG4gICAqL1xuICBzZW5kKGRhdGEpIHtcbiAgICB0aGlzLnRyYW5zcG9ydC5zZW5kKGRhdGEpO1xuICB9XG4gIC8qKlxuICAgKiBDbG9zZSB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjb2RlIEEgc3RhdHVzIGNvZGUgKHNlZSBodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjNjQ1NSNzZWN0aW9uLTcuNC4xKS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvbiBBIGN1c3RvbSBjb25uZWN0aW9uIGNsb3NlIHJlYXNvbi5cbiAgICovXG4gIGNsb3NlKGNvZGUsIHJlYXNvbikge1xuICAgIHRoaXMudHJhbnNwb3J0LmNsb3NlKGNvZGUsIHJlYXNvbik7XG4gIH1cbn07XG5rRW1pdHRlcjtcblxuLy8gc3JjL2ludGVyY2VwdG9ycy9XZWJTb2NrZXQvV2ViU29ja2V0U2VydmVyQ29ubmVjdGlvbi50c1xuaW1wb3J0IHsgaW52YXJpYW50IGFzIGludmFyaWFudDIgfSBmcm9tIFwib3V0dmFyaWFudFwiO1xuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL1dlYlNvY2tldC9XZWJTb2NrZXRPdmVycmlkZS50c1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIm91dHZhcmlhbnRcIjtcbmltcG9ydCB7IERlZmVycmVkUHJvbWlzZSB9IGZyb20gXCJAb3Blbi1kcmFmdC9kZWZlcnJlZC1wcm9taXNlXCI7XG52YXIgV0VCU09DS0VUX0NMT1NFX0NPREVfUkFOR0VfRVJST1IgPSBcIkludmFsaWRBY2Nlc3NFcnJvcjogY2xvc2UgY29kZSBvdXQgb2YgdXNlciBjb25maWd1cmFibGUgcmFuZ2VcIjtcbnZhciBrUGFzc3Rocm91Z2hQcm9taXNlID0gU3ltYm9sKFwia1Bhc3N0aHJvdWdoUHJvbWlzZVwiKTtcbnZhciBrT25TZW5kID0gU3ltYm9sKFwia09uU2VuZFwiKTtcbnZhciBrQ2xvc2UgPSBTeW1ib2woXCJrQ2xvc2VcIik7XG52YXIgV2ViU29ja2V0T3ZlcnJpZGUgPSBjbGFzcyBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcbiAgY29uc3RydWN0b3IodXJsLCBwcm90b2NvbHMpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuQ09OTkVDVElORyA9IDA7XG4gICAgdGhpcy5PUEVOID0gMTtcbiAgICB0aGlzLkNMT1NJTkcgPSAyO1xuICAgIHRoaXMuQ0xPU0VEID0gMztcbiAgICB0aGlzLl9vbm9wZW4gPSBudWxsO1xuICAgIHRoaXMuX29ubWVzc2FnZSA9IG51bGw7XG4gICAgdGhpcy5fb25lcnJvciA9IG51bGw7XG4gICAgdGhpcy5fb25jbG9zZSA9IG51bGw7XG4gICAgdGhpcy51cmwgPSB1cmwudG9TdHJpbmcoKTtcbiAgICB0aGlzLnByb3RvY29sID0gXCJcIjtcbiAgICB0aGlzLmV4dGVuc2lvbnMgPSBcIlwiO1xuICAgIHRoaXMuYmluYXJ5VHlwZSA9IFwiYmxvYlwiO1xuICAgIHRoaXMucmVhZHlTdGF0ZSA9IHRoaXMuQ09OTkVDVElORztcbiAgICB0aGlzLmJ1ZmZlcmVkQW1vdW50ID0gMDtcbiAgICB0aGlzW2tQYXNzdGhyb3VnaFByb21pc2VdID0gbmV3IERlZmVycmVkUHJvbWlzZSgpO1xuICAgIHF1ZXVlTWljcm90YXNrKGFzeW5jICgpID0+IHtcbiAgICAgIGlmIChhd2FpdCB0aGlzW2tQYXNzdGhyb3VnaFByb21pc2VdKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMucHJvdG9jb2wgPSB0eXBlb2YgcHJvdG9jb2xzID09PSBcInN0cmluZ1wiID8gcHJvdG9jb2xzIDogQXJyYXkuaXNBcnJheShwcm90b2NvbHMpICYmIHByb3RvY29scy5sZW5ndGggPiAwID8gcHJvdG9jb2xzWzBdIDogXCJcIjtcbiAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuQ09OTkVDVElORykge1xuICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPSB0aGlzLk9QRU47XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChiaW5kRXZlbnQodGhpcywgbmV3IEV2ZW50KFwib3BlblwiKSkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIHNldCBvbm9wZW4obGlzdGVuZXIpIHtcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvcGVuXCIsIHRoaXMuX29ub3Blbik7XG4gICAgdGhpcy5fb25vcGVuID0gbGlzdGVuZXI7XG4gICAgaWYgKGxpc3RlbmVyICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJvcGVuXCIsIGxpc3RlbmVyKTtcbiAgICB9XG4gIH1cbiAgZ2V0IG9ub3BlbigpIHtcbiAgICByZXR1cm4gdGhpcy5fb25vcGVuO1xuICB9XG4gIHNldCBvbm1lc3NhZ2UobGlzdGVuZXIpIHtcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICBcIm1lc3NhZ2VcIixcbiAgICAgIHRoaXMuX29ubWVzc2FnZVxuICAgICk7XG4gICAgdGhpcy5fb25tZXNzYWdlID0gbGlzdGVuZXI7XG4gICAgaWYgKGxpc3RlbmVyICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGxpc3RlbmVyKTtcbiAgICB9XG4gIH1cbiAgZ2V0IG9ubWVzc2FnZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fb25tZXNzYWdlO1xuICB9XG4gIHNldCBvbmVycm9yKGxpc3RlbmVyKSB7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgdGhpcy5fb25lcnJvcik7XG4gICAgdGhpcy5fb25lcnJvciA9IGxpc3RlbmVyO1xuICAgIGlmIChsaXN0ZW5lciAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgbGlzdGVuZXIpO1xuICAgIH1cbiAgfVxuICBnZXQgb25lcnJvcigpIHtcbiAgICByZXR1cm4gdGhpcy5fb25lcnJvcjtcbiAgfVxuICBzZXQgb25jbG9zZShsaXN0ZW5lcikge1xuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsb3NlXCIsIHRoaXMuX29uY2xvc2UpO1xuICAgIHRoaXMuX29uY2xvc2UgPSBsaXN0ZW5lcjtcbiAgICBpZiAobGlzdGVuZXIgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsb3NlXCIsIGxpc3RlbmVyKTtcbiAgICB9XG4gIH1cbiAgZ2V0IG9uY2xvc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX29uY2xvc2U7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgaHR0cHM6Ly93ZWJzb2NrZXRzLnNwZWMud2hhdHdnLm9yZy8jcmVmLWZvci1kb20td2Vic29ja2V0LXNlbmQlRTIlOTElQTBcbiAgICovXG4gIHNlbmQoZGF0YSkge1xuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuQ09OTkVDVElORykge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIkludmFsaWRTdGF0ZUVycm9yXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkNMT1NJTkcgfHwgdGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkNMT1NFRCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmJ1ZmZlcmVkQW1vdW50ICs9IGdldERhdGFTaXplKGRhdGEpO1xuICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIHRoaXMuYnVmZmVyZWRBbW91bnQgPSAwO1xuICAgICAgKF9hID0gdGhpc1trT25TZW5kXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwodGhpcywgZGF0YSk7XG4gICAgfSk7XG4gIH1cbiAgY2xvc2UoY29kZSA9IDFlMywgcmVhc29uKSB7XG4gICAgaW52YXJpYW50KGNvZGUsIFdFQlNPQ0tFVF9DTE9TRV9DT0RFX1JBTkdFX0VSUk9SKTtcbiAgICBpbnZhcmlhbnQoXG4gICAgICBjb2RlID09PSAxZTMgfHwgY29kZSA+PSAzZTMgJiYgY29kZSA8PSA0OTk5LFxuICAgICAgV0VCU09DS0VUX0NMT1NFX0NPREVfUkFOR0VfRVJST1JcbiAgICApO1xuICAgIHRoaXNba0Nsb3NlXShjb2RlLCByZWFzb24pO1xuICB9XG4gIFsoa1Bhc3N0aHJvdWdoUHJvbWlzZSwga09uU2VuZCwga0Nsb3NlKV0oY29kZSA9IDFlMywgcmVhc29uLCB3YXNDbGVhbiA9IHRydWUpIHtcbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkNMT1NJTkcgfHwgdGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkNMT1NFRCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJlYWR5U3RhdGUgPSB0aGlzLkNMT1NJTkc7XG4gICAgcXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuICAgICAgdGhpcy5yZWFkeVN0YXRlID0gdGhpcy5DTE9TRUQ7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgIGJpbmRFdmVudChcbiAgICAgICAgICB0aGlzLFxuICAgICAgICAgIG5ldyBDbG9zZUV2ZW50KFwiY2xvc2VcIiwge1xuICAgICAgICAgICAgY29kZSxcbiAgICAgICAgICAgIHJlYXNvbixcbiAgICAgICAgICAgIHdhc0NsZWFuXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIHRoaXMuX29ub3BlbiA9IG51bGw7XG4gICAgICB0aGlzLl9vbm1lc3NhZ2UgPSBudWxsO1xuICAgICAgdGhpcy5fb25lcnJvciA9IG51bGw7XG4gICAgICB0aGlzLl9vbmNsb3NlID0gbnVsbDtcbiAgICB9KTtcbiAgfVxuICBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHN1cGVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICB0eXBlLFxuICAgICAgbGlzdGVuZXIsXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgfVxuICByZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHN1cGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgY2FsbGJhY2ssIG9wdGlvbnMpO1xuICB9XG59O1xuV2ViU29ja2V0T3ZlcnJpZGUuQ09OTkVDVElORyA9IDA7XG5XZWJTb2NrZXRPdmVycmlkZS5PUEVOID0gMTtcbldlYlNvY2tldE92ZXJyaWRlLkNMT1NJTkcgPSAyO1xuV2ViU29ja2V0T3ZlcnJpZGUuQ0xPU0VEID0gMztcbmZ1bmN0aW9uIGdldERhdGFTaXplKGRhdGEpIHtcbiAgaWYgKHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIGRhdGEubGVuZ3RoO1xuICB9XG4gIGlmIChkYXRhIGluc3RhbmNlb2YgQmxvYikge1xuICAgIHJldHVybiBkYXRhLnNpemU7XG4gIH1cbiAgcmV0dXJuIGRhdGEuYnl0ZUxlbmd0aDtcbn1cblxuLy8gc3JjL2ludGVyY2VwdG9ycy9XZWJTb2NrZXQvV2ViU29ja2V0U2VydmVyQ29ubmVjdGlvbi50c1xudmFyIGtFbWl0dGVyMiA9IFN5bWJvbChcImtFbWl0dGVyXCIpO1xudmFyIGtCb3VuZExpc3RlbmVyMiA9IFN5bWJvbChcImtCb3VuZExpc3RlbmVyXCIpO1xudmFyIGtTZW5kID0gU3ltYm9sKFwia1NlbmRcIik7XG52YXIgV2ViU29ja2V0U2VydmVyQ29ubmVjdGlvblByb3RvY29sID0gY2xhc3Mge1xufTtcbnZhciBXZWJTb2NrZXRTZXJ2ZXJDb25uZWN0aW9uID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihjbGllbnQsIHRyYW5zcG9ydCwgY3JlYXRlQ29ubmVjdGlvbikge1xuICAgIHRoaXMuY2xpZW50ID0gY2xpZW50O1xuICAgIHRoaXMudHJhbnNwb3J0ID0gdHJhbnNwb3J0O1xuICAgIHRoaXMuY3JlYXRlQ29ubmVjdGlvbiA9IGNyZWF0ZUNvbm5lY3Rpb247XG4gICAgdGhpc1trRW1pdHRlcjJdID0gbmV3IEV2ZW50VGFyZ2V0KCk7XG4gICAgdGhpcy5tb2NrQ2xvc2VDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIHRoaXMucmVhbENsb3NlQ29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICB0aGlzLnRyYW5zcG9ydC5hZGRFdmVudExpc3RlbmVyKFwib3V0Z29pbmdcIiwgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMucmVhbFdlYlNvY2tldCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG4gICAgICAgIGlmICghZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAgIHRoaXNba1NlbmRdKGV2ZW50LmRhdGEpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB0aGlzLnRyYW5zcG9ydC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJpbmNvbWluZ1wiLFxuICAgICAgdGhpcy5oYW5kbGVJbmNvbWluZ01lc3NhZ2UuYmluZCh0aGlzKVxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIFRoZSBgV2ViU29ja2V0YCBpbnN0YW5jZSBjb25uZWN0ZWQgdG8gdGhlIG9yaWdpbmFsIHNlcnZlci5cbiAgICogQWNjZXNzaW5nIHRoaXMgYmVmb3JlIGNhbGxpbmcgYHNlcnZlci5jb25uZWN0KClgIHdpbGwgdGhyb3cuXG4gICAqL1xuICBnZXQgc29ja2V0KCkge1xuICAgIGludmFyaWFudDIoXG4gICAgICB0aGlzLnJlYWxXZWJTb2NrZXQsXG4gICAgICAnQ2Fubm90IGFjY2VzcyBcInNvY2tldFwiIG9uIHRoZSBvcmlnaW5hbCBXZWJTb2NrZXQgc2VydmVyIG9iamVjdDogdGhlIGNvbm5lY3Rpb24gaXMgbm90IG9wZW4uIERpZCB5b3UgZm9yZ2V0IHRvIGNhbGwgYHNlcnZlci5jb25uZWN0KClgPydcbiAgICApO1xuICAgIHJldHVybiB0aGlzLnJlYWxXZWJTb2NrZXQ7XG4gIH1cbiAgLyoqXG4gICAqIE9wZW4gY29ubmVjdGlvbiB0byB0aGUgb3JpZ2luYWwgV2ViU29ja2V0IHNlcnZlci5cbiAgICovXG4gIGNvbm5lY3QoKSB7XG4gICAgaW52YXJpYW50MihcbiAgICAgICF0aGlzLnJlYWxXZWJTb2NrZXQgfHwgdGhpcy5yZWFsV2ViU29ja2V0LnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOLFxuICAgICAgJ0ZhaWxlZCB0byBjYWxsIFwiY29ubmVjdCgpXCIgb24gdGhlIG9yaWdpbmFsIFdlYlNvY2tldCBpbnN0YW5jZTogdGhlIGNvbm5lY3Rpb24gYWxyZWFkeSBvcGVuJ1xuICAgICk7XG4gICAgY29uc3QgcmVhbFdlYlNvY2tldCA9IHRoaXMuY3JlYXRlQ29ubmVjdGlvbigpO1xuICAgIHJlYWxXZWJTb2NrZXQuYmluYXJ5VHlwZSA9IHRoaXMuY2xpZW50LmJpbmFyeVR5cGU7XG4gICAgcmVhbFdlYlNvY2tldC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJvcGVuXCIsXG4gICAgICAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpc1trRW1pdHRlcjJdLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgYmluZEV2ZW50KHRoaXMucmVhbFdlYlNvY2tldCwgbmV3IEV2ZW50KFwib3BlblwiLCBldmVudCkpXG4gICAgICAgICk7XG4gICAgICB9LFxuICAgICAgeyBvbmNlOiB0cnVlIH1cbiAgICApO1xuICAgIHJlYWxXZWJTb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnRyYW5zcG9ydC5kaXNwYXRjaEV2ZW50KFxuICAgICAgICBiaW5kRXZlbnQoXG4gICAgICAgICAgdGhpcy5yZWFsV2ViU29ja2V0LFxuICAgICAgICAgIG5ldyBNZXNzYWdlRXZlbnQoXCJpbmNvbWluZ1wiLCB7XG4gICAgICAgICAgICBkYXRhOiBldmVudC5kYXRhLFxuICAgICAgICAgICAgb3JpZ2luOiBldmVudC5vcmlnaW5cbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICApO1xuICAgIH0pO1xuICAgIHRoaXMuY2xpZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImNsb3NlXCIsXG4gICAgICAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5oYW5kbGVNb2NrQ2xvc2UoZXZlbnQpO1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgc2lnbmFsOiB0aGlzLm1vY2tDbG9zZUNvbnRyb2xsZXIuc2lnbmFsXG4gICAgICB9XG4gICAgKTtcbiAgICByZWFsV2ViU29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImNsb3NlXCIsXG4gICAgICAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5oYW5kbGVSZWFsQ2xvc2UoZXZlbnQpO1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgc2lnbmFsOiB0aGlzLnJlYWxDbG9zZUNvbnRyb2xsZXIuc2lnbmFsXG4gICAgICB9XG4gICAgKTtcbiAgICByZWFsV2ViU29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvckV2ZW50ID0gYmluZEV2ZW50KFxuICAgICAgICByZWFsV2ViU29ja2V0LFxuICAgICAgICBuZXcgRXZlbnQoXCJlcnJvclwiLCB7IGNhbmNlbGFibGU6IHRydWUgfSlcbiAgICAgICk7XG4gICAgICB0aGlzW2tFbWl0dGVyMl0uZGlzcGF0Y2hFdmVudChlcnJvckV2ZW50KTtcbiAgICAgIGlmICghZXJyb3JFdmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgIHRoaXMuY2xpZW50LmRpc3BhdGNoRXZlbnQoYmluZEV2ZW50KHRoaXMuY2xpZW50LCBuZXcgRXZlbnQoXCJlcnJvclwiKSkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMucmVhbFdlYlNvY2tldCA9IHJlYWxXZWJTb2NrZXQ7XG4gIH1cbiAgLyoqXG4gICAqIExpc3RlbiBmb3IgdGhlIGluY29taW5nIGV2ZW50cyBmcm9tIHRoZSBvcmlnaW5hbCBXZWJTb2NrZXQgc2VydmVyLlxuICAgKi9cbiAgYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIsIG9wdGlvbnMpIHtcbiAgICBpZiAoIVJlZmxlY3QuaGFzKGxpc3RlbmVyLCBrQm91bmRMaXN0ZW5lcjIpKSB7XG4gICAgICBjb25zdCBib3VuZExpc3RlbmVyID0gbGlzdGVuZXIuYmluZCh0aGlzLmNsaWVudCk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobGlzdGVuZXIsIGtCb3VuZExpc3RlbmVyMiwge1xuICAgICAgICB2YWx1ZTogYm91bmRMaXN0ZW5lcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2VcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzW2tFbWl0dGVyMl0uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIGV2ZW50LFxuICAgICAgUmVmbGVjdC5nZXQobGlzdGVuZXIsIGtCb3VuZExpc3RlbmVyMiksXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBsaXN0ZW5lciBmb3IgdGhlIGdpdmVuIGV2ZW50LlxuICAgKi9cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIsIG9wdGlvbnMpIHtcbiAgICB0aGlzW2tFbWl0dGVyMl0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgIGV2ZW50LFxuICAgICAgUmVmbGVjdC5nZXQobGlzdGVuZXIsIGtCb3VuZExpc3RlbmVyMiksXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogU2VuZCBkYXRhIHRvIHRoZSBvcmlnaW5hbCBXZWJTb2NrZXQgc2VydmVyLlxuICAgKiBAZXhhbXBsZVxuICAgKiBzZXJ2ZXIuc2VuZCgnaGVsbG8nKVxuICAgKiBzZXJ2ZXIuc2VuZChuZXcgQmxvYihbJ2hlbGxvJ10pKVxuICAgKiBzZXJ2ZXIuc2VuZChuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoJ2hlbGxvJykpXG4gICAqL1xuICBzZW5kKGRhdGEpIHtcbiAgICB0aGlzW2tTZW5kXShkYXRhKTtcbiAgfVxuICBbKGtFbWl0dGVyMiwga1NlbmQpXShkYXRhKSB7XG4gICAgY29uc3QgeyByZWFsV2ViU29ja2V0IH0gPSB0aGlzO1xuICAgIGludmFyaWFudDIoXG4gICAgICByZWFsV2ViU29ja2V0LFxuICAgICAgJ0ZhaWxlZCB0byBjYWxsIFwic2VydmVyLnNlbmQoKVwiIGZvciBcIiVzXCI6IHRoZSBjb25uZWN0aW9uIGlzIG5vdCBvcGVuLiBEaWQgeW91IGZvcmdldCB0byBjYWxsIFwic2VydmVyLmNvbm5lY3QoKVwiPycsXG4gICAgICB0aGlzLmNsaWVudC51cmxcbiAgICApO1xuICAgIGlmIChyZWFsV2ViU29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DTE9TSU5HIHx8IHJlYWxXZWJTb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNMT1NFRCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAocmVhbFdlYlNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuQ09OTkVDVElORykge1xuICAgICAgcmVhbFdlYlNvY2tldC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICBcIm9wZW5cIixcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIHJlYWxXZWJTb2NrZXQuc2VuZChkYXRhKTtcbiAgICAgICAgfSxcbiAgICAgICAgeyBvbmNlOiB0cnVlIH1cbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlYWxXZWJTb2NrZXQuc2VuZChkYXRhKTtcbiAgfVxuICAvKipcbiAgICogQ2xvc2UgdGhlIGFjdHVhbCBzZXJ2ZXIgY29ubmVjdGlvbi5cbiAgICovXG4gIGNsb3NlKCkge1xuICAgIGNvbnN0IHsgcmVhbFdlYlNvY2tldCB9ID0gdGhpcztcbiAgICBpbnZhcmlhbnQyKFxuICAgICAgcmVhbFdlYlNvY2tldCxcbiAgICAgICdGYWlsZWQgdG8gY2xvc2Ugc2VydmVyIGNvbm5lY3Rpb24gZm9yIFwiJXNcIjogdGhlIGNvbm5lY3Rpb24gaXMgbm90IG9wZW4uIERpZCB5b3UgZm9yZ2V0IHRvIGNhbGwgXCJzZXJ2ZXIuY29ubmVjdCgpXCI/JyxcbiAgICAgIHRoaXMuY2xpZW50LnVybFxuICAgICk7XG4gICAgdGhpcy5yZWFsQ2xvc2VDb250cm9sbGVyLmFib3J0KCk7XG4gICAgaWYgKHJlYWxXZWJTb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNMT1NJTkcgfHwgcmVhbFdlYlNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuQ0xPU0VEKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlYWxXZWJTb2NrZXQuY2xvc2UoKTtcbiAgICBxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG4gICAgICB0aGlzW2tFbWl0dGVyMl0uZGlzcGF0Y2hFdmVudChcbiAgICAgICAgYmluZEV2ZW50KFxuICAgICAgICAgIHRoaXMucmVhbFdlYlNvY2tldCxcbiAgICAgICAgICBuZXcgQ2FuY2VsYWJsZUNsb3NlRXZlbnQoXCJjbG9zZVwiLCB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBub3RlIGBzZXJ2ZXIuY2xvc2UoKWAgaW4gdGhlIGludGVyY2VwdG9yXG4gICAgICAgICAgICAgKiBhbHdheXMgcmVzdWx0cyBpbiBjbGVhbiBjbG9zdXJlcy5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY29kZTogMWUzLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cbiAgaGFuZGxlSW5jb21pbmdNZXNzYWdlKGV2ZW50KSB7XG4gICAgY29uc3QgbWVzc2FnZUV2ZW50ID0gYmluZEV2ZW50KFxuICAgICAgZXZlbnQudGFyZ2V0LFxuICAgICAgbmV3IENhbmNlbGFibGVNZXNzYWdlRXZlbnQoXCJtZXNzYWdlXCIsIHtcbiAgICAgICAgZGF0YTogZXZlbnQuZGF0YSxcbiAgICAgICAgb3JpZ2luOiBldmVudC5vcmlnaW4sXG4gICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgIH0pXG4gICAgKTtcbiAgICB0aGlzW2tFbWl0dGVyMl0uZGlzcGF0Y2hFdmVudChtZXNzYWdlRXZlbnQpO1xuICAgIGlmICghbWVzc2FnZUV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIHRoaXMuY2xpZW50LmRpc3BhdGNoRXZlbnQoXG4gICAgICAgIGJpbmRFdmVudChcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbm90ZSBCaW5kIHRoZSBmb3J3YXJkZWQgb3JpZ2luYWwgc2VydmVyIGV2ZW50c1xuICAgICAgICAgICAqIHRvIHRoZSBtb2NrIFdlYlNvY2tldCBpbnN0YW5jZSBzbyBpdCB3b3VsZFxuICAgICAgICAgICAqIGRpc3BhdGNoIHRoZW0gc3RyYWlnaHQgYXdheS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICB0aGlzLmNsaWVudCxcbiAgICAgICAgICAvLyBDbG9uZSB0aGUgbWVzc2FnZSBldmVudCBhZ2FpbiB0byBwcmV2ZW50XG4gICAgICAgICAgLy8gdGhlIFwiYWxyZWFkeSBiZWluZyBkaXNwYXRjaGVkXCIgZXhjZXB0aW9uLlxuICAgICAgICAgIG5ldyBNZXNzYWdlRXZlbnQoXCJtZXNzYWdlXCIsIHtcbiAgICAgICAgICAgIGRhdGE6IGV2ZW50LmRhdGEsXG4gICAgICAgICAgICBvcmlnaW46IGV2ZW50Lm9yaWdpblxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIGhhbmRsZU1vY2tDbG9zZShfZXZlbnQpIHtcbiAgICBpZiAodGhpcy5yZWFsV2ViU29ja2V0KSB7XG4gICAgICB0aGlzLnJlYWxXZWJTb2NrZXQuY2xvc2UoKTtcbiAgICB9XG4gIH1cbiAgaGFuZGxlUmVhbENsb3NlKGV2ZW50KSB7XG4gICAgdGhpcy5tb2NrQ2xvc2VDb250cm9sbGVyLmFib3J0KCk7XG4gICAgY29uc3QgY2xvc2VFdmVudCA9IGJpbmRFdmVudChcbiAgICAgIHRoaXMucmVhbFdlYlNvY2tldCxcbiAgICAgIG5ldyBDYW5jZWxhYmxlQ2xvc2VFdmVudChcImNsb3NlXCIsIHtcbiAgICAgICAgY29kZTogZXZlbnQuY29kZSxcbiAgICAgICAgcmVhc29uOiBldmVudC5yZWFzb24sXG4gICAgICAgIHdhc0NsZWFuOiBldmVudC53YXNDbGVhbixcbiAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgfSlcbiAgICApO1xuICAgIHRoaXNba0VtaXR0ZXIyXS5kaXNwYXRjaEV2ZW50KGNsb3NlRXZlbnQpO1xuICAgIGlmICghY2xvc2VFdmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICB0aGlzLmNsaWVudFtrQ2xvc2VdKGV2ZW50LmNvZGUsIGV2ZW50LnJlYXNvbik7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL1dlYlNvY2tldC9XZWJTb2NrZXRDbGFzc1RyYW5zcG9ydC50c1xudmFyIFdlYlNvY2tldENsYXNzVHJhbnNwb3J0ID0gY2xhc3MgZXh0ZW5kcyBFdmVudFRhcmdldCB7XG4gIGNvbnN0cnVjdG9yKHNvY2tldCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5zb2NrZXQgPSBzb2NrZXQ7XG4gICAgdGhpcy5zb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsb3NlXCIsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGJpbmRFdmVudCh0aGlzLnNvY2tldCwgbmV3IENsb3NlRXZlbnQoXCJjbG9zZVwiLCBldmVudCkpKTtcbiAgICB9KTtcbiAgICB0aGlzLnNvY2tldFtrT25TZW5kXSA9IChkYXRhKSA9PiB7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgIGJpbmRFdmVudChcbiAgICAgICAgICB0aGlzLnNvY2tldCxcbiAgICAgICAgICAvLyBEaXNwYXRjaCB0aGlzIGFzIGNhbmNlbGFibGUgYmVjYXVzZSBcImNsaWVudFwiIGNvbm5lY3Rpb25cbiAgICAgICAgICAvLyByZS1jcmVhdGVzIHRoaXMgbWVzc2FnZSBldmVudCAoY2Fubm90IGRpc3BhdGNoIHRoZSBzYW1lIGV2ZW50KS5cbiAgICAgICAgICBuZXcgQ2FuY2VsYWJsZU1lc3NhZ2VFdmVudChcIm91dGdvaW5nXCIsIHtcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBvcmlnaW46IHRoaXMuc29ja2V0LnVybCxcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICApO1xuICAgIH07XG4gIH1cbiAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgIHJldHVybiBzdXBlci5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGNhbGxiYWNrLCBvcHRpb25zKTtcbiAgfVxuICBkaXNwYXRjaEV2ZW50KGV2ZW50KSB7XG4gICAgcmV0dXJuIHN1cGVyLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICB9XG4gIHNlbmQoZGF0YSkge1xuICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICAgIGlmICh0aGlzLnNvY2tldC5yZWFkeVN0YXRlID09PSB0aGlzLnNvY2tldC5DTE9TSU5HIHx8IHRoaXMuc29ja2V0LnJlYWR5U3RhdGUgPT09IHRoaXMuc29ja2V0LkNMT1NFRCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBkaXNwYXRjaEV2ZW50ID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnNvY2tldC5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgIGJpbmRFdmVudChcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQG5vdGUgU2V0dGluZyB0aGlzIGV2ZW50J3MgXCJ0YXJnZXRcIiB0byB0aGVcbiAgICAgICAgICAgICAqIFdlYlNvY2tldCBvdmVycmlkZSBpbnN0YW5jZSBpcyBpbXBvcnRhbnQuXG4gICAgICAgICAgICAgKiBUaGlzIHdheSBpdCBjYW4gdGVsbCBhcGFydCBvcmlnaW5hbCBpbmNvbWluZyBldmVudHNcbiAgICAgICAgICAgICAqIChtdXN0IGJlIGZvcndhcmRlZCB0byB0aGUgdHJhbnNwb3J0KSBmcm9tIHRoZVxuICAgICAgICAgICAgICogbW9ja2VkIG1lc3NhZ2UgZXZlbnRzIGxpa2UgdGhlIG9uZSBiZWxvd1xuICAgICAgICAgICAgICogKG11c3QgYmUgZGlzcGF0Y2hlZCBvbiB0aGUgY2xpZW50IGluc3RhbmNlKS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5zb2NrZXQsXG4gICAgICAgICAgICBuZXcgTWVzc2FnZUV2ZW50KFwibWVzc2FnZVwiLCB7XG4gICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgIG9yaWdpbjogdGhpcy5zb2NrZXQudXJsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH07XG4gICAgICBpZiAodGhpcy5zb2NrZXQucmVhZHlTdGF0ZSA9PT0gdGhpcy5zb2NrZXQuQ09OTkVDVElORykge1xuICAgICAgICB0aGlzLnNvY2tldC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgIFwib3BlblwiLFxuICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIGRpc3BhdGNoRXZlbnQoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgb25jZTogdHJ1ZSB9XG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaXNwYXRjaEV2ZW50KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgY2xvc2UoY29kZSwgcmVhc29uKSB7XG4gICAgdGhpcy5zb2NrZXRba0Nsb3NlXShjb2RlLCByZWFzb24pO1xuICB9XG59O1xuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL1dlYlNvY2tldC9pbmRleC50c1xudmFyIF9XZWJTb2NrZXRJbnRlcmNlcHRvciA9IGNsYXNzIGV4dGVuZHMgSW50ZXJjZXB0b3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihfV2ViU29ja2V0SW50ZXJjZXB0b3Iuc3ltYm9sKTtcbiAgfVxuICBjaGVja0Vudmlyb25tZW50KCkge1xuICAgIHJldHVybiBoYXNDb25maWd1cmFibGVHbG9iYWwoXCJXZWJTb2NrZXRcIik7XG4gIH1cbiAgc2V0dXAoKSB7XG4gICAgY29uc3Qgb3JpZ2luYWxXZWJTb2NrZXREZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihcbiAgICAgIGdsb2JhbFRoaXMsXG4gICAgICBcIldlYlNvY2tldFwiXG4gICAgKTtcbiAgICBjb25zdCBXZWJTb2NrZXRQcm94eSA9IG5ldyBQcm94eShnbG9iYWxUaGlzLldlYlNvY2tldCwge1xuICAgICAgY29uc3RydWN0OiAodGFyZ2V0LCBhcmdzLCBuZXdUYXJnZXQpID0+IHtcbiAgICAgICAgY29uc3QgW3VybCwgcHJvdG9jb2xzXSA9IGFyZ3M7XG4gICAgICAgIGNvbnN0IGNyZWF0ZUNvbm5lY3Rpb24gPSAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIFJlZmxlY3QuY29uc3RydWN0KHRhcmdldCwgYXJncywgbmV3VGFyZ2V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc29ja2V0ID0gbmV3IFdlYlNvY2tldE92ZXJyaWRlKHVybCwgcHJvdG9jb2xzKTtcbiAgICAgICAgY29uc3QgdHJhbnNwb3J0ID0gbmV3IFdlYlNvY2tldENsYXNzVHJhbnNwb3J0KHNvY2tldCk7XG4gICAgICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc2VydmVyID0gbmV3IFdlYlNvY2tldFNlcnZlckNvbm5lY3Rpb24oXG4gICAgICAgICAgICAgIHNvY2tldCxcbiAgICAgICAgICAgICAgdHJhbnNwb3J0LFxuICAgICAgICAgICAgICBjcmVhdGVDb25uZWN0aW9uXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgaGFzQ29ubmVjdGlvbkxpc3RlbmVycyA9IHRoaXMuZW1pdHRlci5lbWl0KFwiY29ubmVjdGlvblwiLCB7XG4gICAgICAgICAgICAgIGNsaWVudDogbmV3IFdlYlNvY2tldENsaWVudENvbm5lY3Rpb24oc29ja2V0LCB0cmFuc3BvcnQpLFxuICAgICAgICAgICAgICBzZXJ2ZXIsXG4gICAgICAgICAgICAgIGluZm86IHtcbiAgICAgICAgICAgICAgICBwcm90b2NvbHNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoaGFzQ29ubmVjdGlvbkxpc3RlbmVycykge1xuICAgICAgICAgICAgICBzb2NrZXRba1Bhc3N0aHJvdWdoUHJvbWlzZV0ucmVzb2x2ZShmYWxzZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzb2NrZXRba1Bhc3N0aHJvdWdoUHJvbWlzZV0ucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgICAgc2VydmVyLmNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgc2VydmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJvcGVuXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBzb2NrZXQuZGlzcGF0Y2hFdmVudChiaW5kRXZlbnQoc29ja2V0LCBuZXcgRXZlbnQoXCJvcGVuXCIpKSk7XG4gICAgICAgICAgICAgICAgaWYgKHNlcnZlcltcInJlYWxXZWJTb2NrZXRcIl0pIHtcbiAgICAgICAgICAgICAgICAgIHNvY2tldC5wcm90b2NvbCA9IHNlcnZlcltcInJlYWxXZWJTb2NrZXRcIl0ucHJvdG9jb2w7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgc29ja2V0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiZXJyb3JcIikpO1xuICAgICAgICAgICAgICBpZiAoc29ja2V0LnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5DTE9TSU5HICYmIHNvY2tldC5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuQ0xPU0VEKSB7XG4gICAgICAgICAgICAgICAgc29ja2V0W2tDbG9zZV0oMTAxMSwgZXJyb3IubWVzc2FnZSwgZmFsc2UpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzb2NrZXQ7XG4gICAgICB9XG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbFRoaXMsIFwiV2ViU29ja2V0XCIsIHtcbiAgICAgIHZhbHVlOiBXZWJTb2NrZXRQcm94eSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKCgpID0+IHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShcbiAgICAgICAgZ2xvYmFsVGhpcyxcbiAgICAgICAgXCJXZWJTb2NrZXRcIixcbiAgICAgICAgb3JpZ2luYWxXZWJTb2NrZXREZXNjcmlwdG9yXG4gICAgICApO1xuICAgIH0pO1xuICB9XG59O1xudmFyIFdlYlNvY2tldEludGVyY2VwdG9yID0gX1dlYlNvY2tldEludGVyY2VwdG9yO1xuV2ViU29ja2V0SW50ZXJjZXB0b3Iuc3ltYm9sID0gU3ltYm9sKFwid2Vic29ja2V0XCIpO1xuZXhwb3J0IHtcbiAgQ2FuY2VsYWJsZUNsb3NlRXZlbnQsXG4gIENhbmNlbGFibGVNZXNzYWdlRXZlbnQsXG4gIENsb3NlRXZlbnQsXG4gIFdlYlNvY2tldENsaWVudENvbm5lY3Rpb24sXG4gIFdlYlNvY2tldENsaWVudENvbm5lY3Rpb25Qcm90b2NvbCxcbiAgV2ViU29ja2V0SW50ZXJjZXB0b3IsXG4gIFdlYlNvY2tldFNlcnZlckNvbm5lY3Rpb24sXG4gIFdlYlNvY2tldFNlcnZlckNvbm5lY3Rpb25Qcm90b2NvbFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/browser/interceptors/WebSocket/index.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-3GJB4JDF.mjs":
/*!************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-3GJB4JDF.mjs ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRawRequest: () => (/* binding */ getRawRequest),\n/* harmony export */   setRawRequest: () => (/* binding */ setRawRequest)\n/* harmony export */ });\n// src/getRawRequest.ts\nvar kRawRequest = Symbol(\"kRawRequest\");\nfunction getRawRequest(request) {\n  return Reflect.get(request, kRawRequest);\n}\nfunction setRawRequest(request, rawRequest) {\n  Reflect.set(request, kRawRequest, rawRequest);\n}\n\n\n//# sourceMappingURL=chunk-3GJB4JDF.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2NodW5rLTNHSkI0SkRGLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBS0U7QUFDRiIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmsvZGF0YS1mZXRjaGluZy1tb25vcmVwby1wb2MvZGF0YS1mZXRjaGluZy1tb25vcmVwby1wb2Mvbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2NodW5rLTNHSkI0SkRGLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvZ2V0UmF3UmVxdWVzdC50c1xudmFyIGtSYXdSZXF1ZXN0ID0gU3ltYm9sKFwia1Jhd1JlcXVlc3RcIik7XG5mdW5jdGlvbiBnZXRSYXdSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgcmV0dXJuIFJlZmxlY3QuZ2V0KHJlcXVlc3QsIGtSYXdSZXF1ZXN0KTtcbn1cbmZ1bmN0aW9uIHNldFJhd1JlcXVlc3QocmVxdWVzdCwgcmF3UmVxdWVzdCkge1xuICBSZWZsZWN0LnNldChyZXF1ZXN0LCBrUmF3UmVxdWVzdCwgcmF3UmVxdWVzdCk7XG59XG5cbmV4cG9ydCB7XG4gIGdldFJhd1JlcXVlc3QsXG4gIHNldFJhd1JlcXVlc3Rcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay0zR0pCNEpERi5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-3GJB4JDF.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-4NEYTVWD.mjs":
/*!************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-4NEYTVWD.mjs ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   XMLHttpRequestInterceptor: () => (/* binding */ XMLHttpRequestInterceptor)\n/* harmony export */ });\n/* harmony import */ var _chunk_6HYIRFX2_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-6HYIRFX2.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-6HYIRFX2.mjs\");\n/* harmony import */ var _chunk_TX5GBTFY_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-TX5GBTFY.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-TX5GBTFY.mjs\");\n/* harmony import */ var _chunk_6YM4PLBI_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-6YM4PLBI.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-6YM4PLBI.mjs\");\n/* harmony import */ var _chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-A7Q4RTDJ.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-A7Q4RTDJ.mjs\");\n/* harmony import */ var _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chunk-IHJSPMYM.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-IHJSPMYM.mjs\");\n/* harmony import */ var _chunk_3GJB4JDF_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./chunk-3GJB4JDF.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-3GJB4JDF.mjs\");\n/* harmony import */ var outvariant__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! outvariant */ \"(ssr)/../../node_modules/.pnpm/outvariant@1.4.3/node_modules/outvariant/lib/index.mjs\");\n/* harmony import */ var is_node_process__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! is-node-process */ \"(ssr)/../../node_modules/.pnpm/is-node-process@1.2.0/node_modules/is-node-process/lib/index.mjs\");\n\n\n\n\n\n\n\n// src/interceptors/XMLHttpRequest/index.ts\n\n\n// src/interceptors/XMLHttpRequest/XMLHttpRequestController.ts\n\n\n\n// src/interceptors/XMLHttpRequest/utils/concatArrayBuffer.ts\nfunction concatArrayBuffer(left, right) {\n  const result = new Uint8Array(left.byteLength + right.byteLength);\n  result.set(left, 0);\n  result.set(right, left.byteLength);\n  return result;\n}\n\n// src/interceptors/XMLHttpRequest/polyfills/EventPolyfill.ts\nvar EventPolyfill = class {\n  constructor(type, options) {\n    this.NONE = 0;\n    this.CAPTURING_PHASE = 1;\n    this.AT_TARGET = 2;\n    this.BUBBLING_PHASE = 3;\n    this.type = \"\";\n    this.srcElement = null;\n    this.currentTarget = null;\n    this.eventPhase = 0;\n    this.isTrusted = true;\n    this.composed = false;\n    this.cancelable = true;\n    this.defaultPrevented = false;\n    this.bubbles = true;\n    this.lengthComputable = true;\n    this.loaded = 0;\n    this.total = 0;\n    this.cancelBubble = false;\n    this.returnValue = true;\n    this.type = type;\n    this.target = (options == null ? void 0 : options.target) || null;\n    this.currentTarget = (options == null ? void 0 : options.currentTarget) || null;\n    this.timeStamp = Date.now();\n  }\n  composedPath() {\n    return [];\n  }\n  initEvent(type, bubbles, cancelable) {\n    this.type = type;\n    this.bubbles = !!bubbles;\n    this.cancelable = !!cancelable;\n  }\n  preventDefault() {\n    this.defaultPrevented = true;\n  }\n  stopPropagation() {\n  }\n  stopImmediatePropagation() {\n  }\n};\n\n// src/interceptors/XMLHttpRequest/polyfills/ProgressEventPolyfill.ts\nvar ProgressEventPolyfill = class extends EventPolyfill {\n  constructor(type, init) {\n    super(type);\n    this.lengthComputable = (init == null ? void 0 : init.lengthComputable) || false;\n    this.composed = (init == null ? void 0 : init.composed) || false;\n    this.loaded = (init == null ? void 0 : init.loaded) || 0;\n    this.total = (init == null ? void 0 : init.total) || 0;\n  }\n};\n\n// src/interceptors/XMLHttpRequest/utils/createEvent.ts\nvar SUPPORTS_PROGRESS_EVENT = typeof ProgressEvent !== \"undefined\";\nfunction createEvent(target, type, init) {\n  const progressEvents = [\n    \"error\",\n    \"progress\",\n    \"loadstart\",\n    \"loadend\",\n    \"load\",\n    \"timeout\",\n    \"abort\"\n  ];\n  const ProgressEventClass = SUPPORTS_PROGRESS_EVENT ? ProgressEvent : ProgressEventPolyfill;\n  const event = progressEvents.includes(type) ? new ProgressEventClass(type, {\n    lengthComputable: true,\n    loaded: (init == null ? void 0 : init.loaded) || 0,\n    total: (init == null ? void 0 : init.total) || 0\n  }) : new EventPolyfill(type, {\n    target,\n    currentTarget: target\n  });\n  return event;\n}\n\n// src/utils/findPropertySource.ts\nfunction findPropertySource(target, propertyName) {\n  if (!(propertyName in target)) {\n    return null;\n  }\n  const hasProperty = Object.prototype.hasOwnProperty.call(target, propertyName);\n  if (hasProperty) {\n    return target;\n  }\n  const prototype = Reflect.getPrototypeOf(target);\n  return prototype ? findPropertySource(prototype, propertyName) : null;\n}\n\n// src/utils/createProxy.ts\nfunction createProxy(target, options) {\n  const proxy = new Proxy(target, optionsToProxyHandler(options));\n  return proxy;\n}\nfunction optionsToProxyHandler(options) {\n  const { constructorCall, methodCall, getProperty, setProperty } = options;\n  const handler = {};\n  if (typeof constructorCall !== \"undefined\") {\n    handler.construct = function(target, args, newTarget) {\n      const next = Reflect.construct.bind(null, target, args, newTarget);\n      return constructorCall.call(newTarget, args, next);\n    };\n  }\n  handler.set = function(target, propertyName, nextValue) {\n    const next = () => {\n      const propertySource = findPropertySource(target, propertyName) || target;\n      const ownDescriptors = Reflect.getOwnPropertyDescriptor(\n        propertySource,\n        propertyName\n      );\n      if (typeof (ownDescriptors == null ? void 0 : ownDescriptors.set) !== \"undefined\") {\n        ownDescriptors.set.apply(target, [nextValue]);\n        return true;\n      }\n      return Reflect.defineProperty(propertySource, propertyName, {\n        writable: true,\n        enumerable: true,\n        configurable: true,\n        value: nextValue\n      });\n    };\n    if (typeof setProperty !== \"undefined\") {\n      return setProperty.call(target, [propertyName, nextValue], next);\n    }\n    return next();\n  };\n  handler.get = function(target, propertyName, receiver) {\n    const next = () => target[propertyName];\n    const value = typeof getProperty !== \"undefined\" ? getProperty.call(target, [propertyName, receiver], next) : next();\n    if (typeof value === \"function\") {\n      return (...args) => {\n        const next2 = value.bind(target, ...args);\n        if (typeof methodCall !== \"undefined\") {\n          return methodCall.call(target, [propertyName, args], next2);\n        }\n        return next2();\n      };\n    }\n    return value;\n  };\n  return handler;\n}\n\n// src/interceptors/XMLHttpRequest/utils/isDomParserSupportedType.ts\nfunction isDomParserSupportedType(type) {\n  const supportedTypes = [\n    \"application/xhtml+xml\",\n    \"application/xml\",\n    \"image/svg+xml\",\n    \"text/html\",\n    \"text/xml\"\n  ];\n  return supportedTypes.some((supportedType) => {\n    return type.startsWith(supportedType);\n  });\n}\n\n// src/utils/parseJson.ts\nfunction parseJson(data) {\n  try {\n    const json = JSON.parse(data);\n    return json;\n  } catch (_) {\n    return null;\n  }\n}\n\n// src/interceptors/XMLHttpRequest/utils/createResponse.ts\nfunction createResponse(request, body) {\n  const responseBodyOrNull = _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_4__.FetchResponse.isResponseWithBody(request.status) ? body : null;\n  return new _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_4__.FetchResponse(responseBodyOrNull, {\n    url: request.responseURL,\n    status: request.status,\n    statusText: request.statusText,\n    headers: createHeadersFromXMLHttpRequestHeaders(\n      request.getAllResponseHeaders()\n    )\n  });\n}\nfunction createHeadersFromXMLHttpRequestHeaders(headersString) {\n  const headers = new Headers();\n  const lines = headersString.split(/[\\r\\n]+/);\n  for (const line of lines) {\n    if (line.trim() === \"\") {\n      continue;\n    }\n    const [name, ...parts] = line.split(\": \");\n    const value = parts.join(\": \");\n    headers.append(name, value);\n  }\n  return headers;\n}\n\n// src/interceptors/XMLHttpRequest/utils/getBodyByteLength.ts\nasync function getBodyByteLength(input) {\n  const explicitContentLength = input.headers.get(\"content-length\");\n  if (explicitContentLength != null && explicitContentLength !== \"\") {\n    return Number(explicitContentLength);\n  }\n  const buffer = await input.arrayBuffer();\n  return buffer.byteLength;\n}\n\n// src/interceptors/XMLHttpRequest/XMLHttpRequestController.ts\nvar kIsRequestHandled = Symbol(\"kIsRequestHandled\");\nvar IS_NODE = (0,is_node_process__WEBPACK_IMPORTED_MODULE_7__.isNodeProcess)();\nvar kFetchRequest = Symbol(\"kFetchRequest\");\nvar XMLHttpRequestController = class {\n  constructor(initialRequest, logger) {\n    this.initialRequest = initialRequest;\n    this.logger = logger;\n    this.method = \"GET\";\n    this.url = null;\n    this[kIsRequestHandled] = false;\n    this.events = /* @__PURE__ */ new Map();\n    this.uploadEvents = /* @__PURE__ */ new Map();\n    this.requestId = (0,_chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_4__.createRequestId)();\n    this.requestHeaders = new Headers();\n    this.responseBuffer = new Uint8Array();\n    this.request = createProxy(initialRequest, {\n      setProperty: ([propertyName, nextValue], invoke) => {\n        switch (propertyName) {\n          case \"ontimeout\": {\n            const eventName = propertyName.slice(\n              2\n            );\n            this.request.addEventListener(eventName, nextValue);\n            return invoke();\n          }\n          default: {\n            return invoke();\n          }\n        }\n      },\n      methodCall: ([methodName, args], invoke) => {\n        var _a;\n        switch (methodName) {\n          case \"open\": {\n            const [method, url] = args;\n            if (typeof url === \"undefined\") {\n              this.method = \"GET\";\n              this.url = toAbsoluteUrl(method);\n            } else {\n              this.method = method;\n              this.url = toAbsoluteUrl(url);\n            }\n            this.logger = this.logger.extend(`${this.method} ${this.url.href}`);\n            this.logger.info(\"open\", this.method, this.url.href);\n            return invoke();\n          }\n          case \"addEventListener\": {\n            const [eventName, listener] = args;\n            this.registerEvent(eventName, listener);\n            this.logger.info(\"addEventListener\", eventName, listener);\n            return invoke();\n          }\n          case \"setRequestHeader\": {\n            const [name, value] = args;\n            this.requestHeaders.set(name, value);\n            this.logger.info(\"setRequestHeader\", name, value);\n            return invoke();\n          }\n          case \"send\": {\n            const [body] = args;\n            this.request.addEventListener(\"load\", () => {\n              if (typeof this.onResponse !== \"undefined\") {\n                const fetchResponse = createResponse(\n                  this.request,\n                  /**\n                   * The `response` property is the right way to read\n                   * the ambiguous response body, as the request's \"responseType\" may differ.\n                   * @see https://xhr.spec.whatwg.org/#the-response-attribute\n                   */\n                  this.request.response\n                );\n                this.onResponse.call(this, {\n                  response: fetchResponse,\n                  isMockedResponse: this[kIsRequestHandled],\n                  request: fetchRequest,\n                  requestId: this.requestId\n                });\n              }\n            });\n            const requestBody = typeof body === \"string\" ? (0,_chunk_6HYIRFX2_mjs__WEBPACK_IMPORTED_MODULE_0__.encodeBuffer)(body) : body;\n            const fetchRequest = this.toFetchApiRequest(requestBody);\n            this[kFetchRequest] = fetchRequest.clone();\n            const onceRequestSettled = ((_a = this.onRequest) == null ? void 0 : _a.call(this, {\n              request: fetchRequest,\n              requestId: this.requestId\n            })) || Promise.resolve();\n            onceRequestSettled.finally(() => {\n              if (!this[kIsRequestHandled]) {\n                this.logger.info(\n                  \"request callback settled but request has not been handled (readystate %d), performing as-is...\",\n                  this.request.readyState\n                );\n                if (IS_NODE) {\n                  this.request.setRequestHeader(\n                    _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_4__.INTERNAL_REQUEST_ID_HEADER_NAME,\n                    this.requestId\n                  );\n                }\n                return invoke();\n              }\n            });\n            break;\n          }\n          default: {\n            return invoke();\n          }\n        }\n      }\n    });\n    define(\n      this.request,\n      \"upload\",\n      createProxy(this.request.upload, {\n        setProperty: ([propertyName, nextValue], invoke) => {\n          switch (propertyName) {\n            case \"onloadstart\":\n            case \"onprogress\":\n            case \"onaboart\":\n            case \"onerror\":\n            case \"onload\":\n            case \"ontimeout\":\n            case \"onloadend\": {\n              const eventName = propertyName.slice(\n                2\n              );\n              this.registerUploadEvent(eventName, nextValue);\n            }\n          }\n          return invoke();\n        },\n        methodCall: ([methodName, args], invoke) => {\n          switch (methodName) {\n            case \"addEventListener\": {\n              const [eventName, listener] = args;\n              this.registerUploadEvent(eventName, listener);\n              this.logger.info(\"upload.addEventListener\", eventName, listener);\n              return invoke();\n            }\n          }\n        }\n      })\n    );\n  }\n  registerEvent(eventName, listener) {\n    const prevEvents = this.events.get(eventName) || [];\n    const nextEvents = prevEvents.concat(listener);\n    this.events.set(eventName, nextEvents);\n    this.logger.info('registered event \"%s\"', eventName, listener);\n  }\n  registerUploadEvent(eventName, listener) {\n    const prevEvents = this.uploadEvents.get(eventName) || [];\n    const nextEvents = prevEvents.concat(listener);\n    this.uploadEvents.set(eventName, nextEvents);\n    this.logger.info('registered upload event \"%s\"', eventName, listener);\n  }\n  /**\n   * Responds to the current request with the given\n   * Fetch API `Response` instance.\n   */\n  async respondWith(response) {\n    this[kIsRequestHandled] = true;\n    if (this[kFetchRequest]) {\n      const totalRequestBodyLength = await getBodyByteLength(\n        this[kFetchRequest]\n      );\n      this.trigger(\"loadstart\", this.request.upload, {\n        loaded: 0,\n        total: totalRequestBodyLength\n      });\n      this.trigger(\"progress\", this.request.upload, {\n        loaded: totalRequestBodyLength,\n        total: totalRequestBodyLength\n      });\n      this.trigger(\"load\", this.request.upload, {\n        loaded: totalRequestBodyLength,\n        total: totalRequestBodyLength\n      });\n      this.trigger(\"loadend\", this.request.upload, {\n        loaded: totalRequestBodyLength,\n        total: totalRequestBodyLength\n      });\n    }\n    this.logger.info(\n      \"responding with a mocked response: %d %s\",\n      response.status,\n      response.statusText\n    );\n    define(this.request, \"status\", response.status);\n    define(this.request, \"statusText\", response.statusText);\n    define(this.request, \"responseURL\", this.url.href);\n    this.request.getResponseHeader = new Proxy(this.request.getResponseHeader, {\n      apply: (_, __, args) => {\n        this.logger.info(\"getResponseHeader\", args[0]);\n        if (this.request.readyState < this.request.HEADERS_RECEIVED) {\n          this.logger.info(\"headers not received yet, returning null\");\n          return null;\n        }\n        const headerValue = response.headers.get(args[0]);\n        this.logger.info(\n          'resolved response header \"%s\" to',\n          args[0],\n          headerValue\n        );\n        return headerValue;\n      }\n    });\n    this.request.getAllResponseHeaders = new Proxy(\n      this.request.getAllResponseHeaders,\n      {\n        apply: () => {\n          this.logger.info(\"getAllResponseHeaders\");\n          if (this.request.readyState < this.request.HEADERS_RECEIVED) {\n            this.logger.info(\"headers not received yet, returning empty string\");\n            return \"\";\n          }\n          const headersList = Array.from(response.headers.entries());\n          const allHeaders = headersList.map(([headerName, headerValue]) => {\n            return `${headerName}: ${headerValue}`;\n          }).join(\"\\r\\n\");\n          this.logger.info(\"resolved all response headers to\", allHeaders);\n          return allHeaders;\n        }\n      }\n    );\n    Object.defineProperties(this.request, {\n      response: {\n        enumerable: true,\n        configurable: false,\n        get: () => this.response\n      },\n      responseText: {\n        enumerable: true,\n        configurable: false,\n        get: () => this.responseText\n      },\n      responseXML: {\n        enumerable: true,\n        configurable: false,\n        get: () => this.responseXML\n      }\n    });\n    const totalResponseBodyLength = await getBodyByteLength(response.clone());\n    this.logger.info(\"calculated response body length\", totalResponseBodyLength);\n    this.trigger(\"loadstart\", this.request, {\n      loaded: 0,\n      total: totalResponseBodyLength\n    });\n    this.setReadyState(this.request.HEADERS_RECEIVED);\n    this.setReadyState(this.request.LOADING);\n    const finalizeResponse = () => {\n      this.logger.info(\"finalizing the mocked response...\");\n      this.setReadyState(this.request.DONE);\n      this.trigger(\"load\", this.request, {\n        loaded: this.responseBuffer.byteLength,\n        total: totalResponseBodyLength\n      });\n      this.trigger(\"loadend\", this.request, {\n        loaded: this.responseBuffer.byteLength,\n        total: totalResponseBodyLength\n      });\n    };\n    if (response.body) {\n      this.logger.info(\"mocked response has body, streaming...\");\n      const reader = response.body.getReader();\n      const readNextResponseBodyChunk = async () => {\n        const { value, done } = await reader.read();\n        if (done) {\n          this.logger.info(\"response body stream done!\");\n          finalizeResponse();\n          return;\n        }\n        if (value) {\n          this.logger.info(\"read response body chunk:\", value);\n          this.responseBuffer = concatArrayBuffer(this.responseBuffer, value);\n          this.trigger(\"progress\", this.request, {\n            loaded: this.responseBuffer.byteLength,\n            total: totalResponseBodyLength\n          });\n        }\n        readNextResponseBodyChunk();\n      };\n      readNextResponseBodyChunk();\n    } else {\n      finalizeResponse();\n    }\n  }\n  responseBufferToText() {\n    return (0,_chunk_6HYIRFX2_mjs__WEBPACK_IMPORTED_MODULE_0__.decodeBuffer)(this.responseBuffer);\n  }\n  get response() {\n    this.logger.info(\n      \"getResponse (responseType: %s)\",\n      this.request.responseType\n    );\n    if (this.request.readyState !== this.request.DONE) {\n      return null;\n    }\n    switch (this.request.responseType) {\n      case \"json\": {\n        const responseJson = parseJson(this.responseBufferToText());\n        this.logger.info(\"resolved response JSON\", responseJson);\n        return responseJson;\n      }\n      case \"arraybuffer\": {\n        const arrayBuffer = (0,_chunk_6HYIRFX2_mjs__WEBPACK_IMPORTED_MODULE_0__.toArrayBuffer)(this.responseBuffer);\n        this.logger.info(\"resolved response ArrayBuffer\", arrayBuffer);\n        return arrayBuffer;\n      }\n      case \"blob\": {\n        const mimeType = this.request.getResponseHeader(\"Content-Type\") || \"text/plain\";\n        const responseBlob = new Blob([this.responseBufferToText()], {\n          type: mimeType\n        });\n        this.logger.info(\n          \"resolved response Blob (mime type: %s)\",\n          responseBlob,\n          mimeType\n        );\n        return responseBlob;\n      }\n      default: {\n        const responseText = this.responseBufferToText();\n        this.logger.info(\n          'resolving \"%s\" response type as text',\n          this.request.responseType,\n          responseText\n        );\n        return responseText;\n      }\n    }\n  }\n  get responseText() {\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_6__.invariant)(\n      this.request.responseType === \"\" || this.request.responseType === \"text\",\n      \"InvalidStateError: The object is in invalid state.\"\n    );\n    if (this.request.readyState !== this.request.LOADING && this.request.readyState !== this.request.DONE) {\n      return \"\";\n    }\n    const responseText = this.responseBufferToText();\n    this.logger.info('getResponseText: \"%s\"', responseText);\n    return responseText;\n  }\n  get responseXML() {\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_6__.invariant)(\n      this.request.responseType === \"\" || this.request.responseType === \"document\",\n      \"InvalidStateError: The object is in invalid state.\"\n    );\n    if (this.request.readyState !== this.request.DONE) {\n      return null;\n    }\n    const contentType = this.request.getResponseHeader(\"Content-Type\") || \"\";\n    if (typeof DOMParser === \"undefined\") {\n      console.warn(\n        \"Cannot retrieve XMLHttpRequest response body as XML: DOMParser is not defined. You are likely using an environment that is not browser or does not polyfill browser globals correctly.\"\n      );\n      return null;\n    }\n    if (isDomParserSupportedType(contentType)) {\n      return new DOMParser().parseFromString(\n        this.responseBufferToText(),\n        contentType\n      );\n    }\n    return null;\n  }\n  errorWith(error) {\n    this[kIsRequestHandled] = true;\n    this.logger.info(\"responding with an error\");\n    this.setReadyState(this.request.DONE);\n    this.trigger(\"error\", this.request);\n    this.trigger(\"loadend\", this.request);\n  }\n  /**\n   * Transitions this request's `readyState` to the given one.\n   */\n  setReadyState(nextReadyState) {\n    this.logger.info(\n      \"setReadyState: %d -> %d\",\n      this.request.readyState,\n      nextReadyState\n    );\n    if (this.request.readyState === nextReadyState) {\n      this.logger.info(\"ready state identical, skipping transition...\");\n      return;\n    }\n    define(this.request, \"readyState\", nextReadyState);\n    this.logger.info(\"set readyState to: %d\", nextReadyState);\n    if (nextReadyState !== this.request.UNSENT) {\n      this.logger.info('triggering \"readystatechange\" event...');\n      this.trigger(\"readystatechange\", this.request);\n    }\n  }\n  /**\n   * Triggers given event on the `XMLHttpRequest` instance.\n   */\n  trigger(eventName, target, options) {\n    const callback = target[`on${eventName}`];\n    const event = createEvent(target, eventName, options);\n    this.logger.info('trigger \"%s\"', eventName, options || \"\");\n    if (typeof callback === \"function\") {\n      this.logger.info('found a direct \"%s\" callback, calling...', eventName);\n      callback.call(target, event);\n    }\n    const events = target instanceof XMLHttpRequestUpload ? this.uploadEvents : this.events;\n    for (const [registeredEventName, listeners] of events) {\n      if (registeredEventName === eventName) {\n        this.logger.info(\n          'found %d listener(s) for \"%s\" event, calling...',\n          listeners.length,\n          eventName\n        );\n        listeners.forEach((listener) => listener.call(target, event));\n      }\n    }\n  }\n  /**\n   * Converts this `XMLHttpRequest` instance into a Fetch API `Request` instance.\n   */\n  toFetchApiRequest(body) {\n    this.logger.info(\"converting request to a Fetch API Request...\");\n    const resolvedBody = body instanceof Document ? body.documentElement.innerText : body;\n    const fetchRequest = new Request(this.url.href, {\n      method: this.method,\n      headers: this.requestHeaders,\n      /**\n       * @see https://xhr.spec.whatwg.org/#cross-origin-credentials\n       */\n      credentials: this.request.withCredentials ? \"include\" : \"same-origin\",\n      body: [\"GET\", \"HEAD\"].includes(this.method.toUpperCase()) ? null : resolvedBody\n    });\n    const proxyHeaders = createProxy(fetchRequest.headers, {\n      methodCall: ([methodName, args], invoke) => {\n        switch (methodName) {\n          case \"append\":\n          case \"set\": {\n            const [headerName, headerValue] = args;\n            this.request.setRequestHeader(headerName, headerValue);\n            break;\n          }\n          case \"delete\": {\n            const [headerName] = args;\n            console.warn(\n              `XMLHttpRequest: Cannot remove a \"${headerName}\" header from the Fetch API representation of the \"${fetchRequest.method} ${fetchRequest.url}\" request. XMLHttpRequest headers cannot be removed.`\n            );\n            break;\n          }\n        }\n        return invoke();\n      }\n    });\n    define(fetchRequest, \"headers\", proxyHeaders);\n    (0,_chunk_3GJB4JDF_mjs__WEBPACK_IMPORTED_MODULE_5__.setRawRequest)(fetchRequest, this.request);\n    this.logger.info(\"converted request to a Fetch API Request!\", fetchRequest);\n    return fetchRequest;\n  }\n};\nkIsRequestHandled, kFetchRequest;\nfunction toAbsoluteUrl(url) {\n  if (typeof location === \"undefined\") {\n    return new URL(url);\n  }\n  return new URL(url.toString(), location.href);\n}\nfunction define(target, property, value) {\n  Reflect.defineProperty(target, property, {\n    // Ensure writable properties to allow redefining readonly properties.\n    writable: true,\n    enumerable: true,\n    value\n  });\n}\n\n// src/interceptors/XMLHttpRequest/XMLHttpRequestProxy.ts\nfunction createXMLHttpRequestProxy({\n  emitter,\n  logger\n}) {\n  const XMLHttpRequestProxy = new Proxy(globalThis.XMLHttpRequest, {\n    construct(target, args, newTarget) {\n      logger.info(\"constructed new XMLHttpRequest\");\n      const originalRequest = Reflect.construct(\n        target,\n        args,\n        newTarget\n      );\n      const prototypeDescriptors = Object.getOwnPropertyDescriptors(\n        target.prototype\n      );\n      for (const propertyName in prototypeDescriptors) {\n        Reflect.defineProperty(\n          originalRequest,\n          propertyName,\n          prototypeDescriptors[propertyName]\n        );\n      }\n      const xhrRequestController = new XMLHttpRequestController(\n        originalRequest,\n        logger\n      );\n      xhrRequestController.onRequest = async function({ request, requestId }) {\n        const controller = new _chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_3__.RequestController(request);\n        this.logger.info(\"awaiting mocked response...\");\n        this.logger.info(\n          'emitting the \"request\" event for %s listener(s)...',\n          emitter.listenerCount(\"request\")\n        );\n        const isRequestHandled = await (0,_chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_3__.handleRequest)({\n          request,\n          requestId,\n          controller,\n          emitter,\n          onResponse: async (response) => {\n            await this.respondWith(response);\n          },\n          onRequestError: () => {\n            this.errorWith(new TypeError(\"Network error\"));\n          },\n          onError: (error) => {\n            this.logger.info(\"request errored!\", { error });\n            if (error instanceof Error) {\n              this.errorWith(error);\n            }\n          }\n        });\n        if (!isRequestHandled) {\n          this.logger.info(\n            \"no mocked response received, performing request as-is...\"\n          );\n        }\n      };\n      xhrRequestController.onResponse = async function({\n        response,\n        isMockedResponse,\n        request,\n        requestId\n      }) {\n        this.logger.info(\n          'emitting the \"response\" event for %s listener(s)...',\n          emitter.listenerCount(\"response\")\n        );\n        emitter.emit(\"response\", {\n          response,\n          isMockedResponse,\n          request,\n          requestId\n        });\n      };\n      return xhrRequestController.request;\n    }\n  });\n  return XMLHttpRequestProxy;\n}\n\n// src/interceptors/XMLHttpRequest/index.ts\nvar _XMLHttpRequestInterceptor = class extends _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_4__.Interceptor {\n  constructor() {\n    super(_XMLHttpRequestInterceptor.interceptorSymbol);\n  }\n  checkEnvironment() {\n    return (0,_chunk_TX5GBTFY_mjs__WEBPACK_IMPORTED_MODULE_1__.hasConfigurableGlobal)(\"XMLHttpRequest\");\n  }\n  setup() {\n    const logger = this.logger.extend(\"setup\");\n    logger.info('patching \"XMLHttpRequest\" module...');\n    const PureXMLHttpRequest = globalThis.XMLHttpRequest;\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_6__.invariant)(\n      !PureXMLHttpRequest[_chunk_6YM4PLBI_mjs__WEBPACK_IMPORTED_MODULE_2__.IS_PATCHED_MODULE],\n      'Failed to patch the \"XMLHttpRequest\" module: already patched.'\n    );\n    globalThis.XMLHttpRequest = createXMLHttpRequestProxy({\n      emitter: this.emitter,\n      logger: this.logger\n    });\n    logger.info(\n      'native \"XMLHttpRequest\" module patched!',\n      globalThis.XMLHttpRequest.name\n    );\n    Object.defineProperty(globalThis.XMLHttpRequest, _chunk_6YM4PLBI_mjs__WEBPACK_IMPORTED_MODULE_2__.IS_PATCHED_MODULE, {\n      enumerable: true,\n      configurable: true,\n      value: true\n    });\n    this.subscriptions.push(() => {\n      Object.defineProperty(globalThis.XMLHttpRequest, _chunk_6YM4PLBI_mjs__WEBPACK_IMPORTED_MODULE_2__.IS_PATCHED_MODULE, {\n        value: void 0\n      });\n      globalThis.XMLHttpRequest = PureXMLHttpRequest;\n      logger.info(\n        'native \"XMLHttpRequest\" module restored!',\n        globalThis.XMLHttpRequest.name\n      );\n    });\n  }\n};\nvar XMLHttpRequestInterceptor = _XMLHttpRequestInterceptor;\nXMLHttpRequestInterceptor.interceptorSymbol = Symbol(\"xhr\");\n\n\n//# sourceMappingURL=chunk-4NEYTVWD.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2NodW5rLTRORVlUVldELm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFJOEI7QUFHQTtBQUdBO0FBSUE7QUFNQTtBQUdBOztBQUU5QjtBQUNxRDs7QUFFckQ7QUFDdUM7QUFDUzs7QUFFaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHdEQUF3RDtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDZCQUE2Qiw4REFBYTtBQUMxQyxhQUFhLDhEQUFhO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYyw4REFBYTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixvRUFBZTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxhQUFhLEVBQUUsY0FBYztBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2IsMkRBQTJELGlFQUFZO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnRkFBK0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixXQUFXLElBQUksWUFBWTtBQUNqRCxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsY0FBYztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpRUFBWTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrRUFBYTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkscURBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxxREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLFVBQVU7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsV0FBVyxxREFBcUQscUJBQXFCLEVBQUUsaUJBQWlCO0FBQzFKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUksa0VBQWE7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxvQkFBb0I7QUFDNUUsK0JBQStCLGtFQUFpQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLGtFQUFhO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsbURBQW1ELE9BQU87QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQSwrQ0FBK0MsNERBQVc7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDBFQUFxQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxxREFBVTtBQUNkLDBCQUEwQixrRUFBaUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxrRUFBaUI7QUFDdEU7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsdURBQXVELGtFQUFpQjtBQUN4RTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3JrL2RhdGEtZmV0Y2hpbmctbW9ub3JlcG8tcG9jL2RhdGEtZmV0Y2hpbmctbW9ub3JlcG8tcG9jL25vZGVfbW9kdWxlcy8ucG5wbS9AbXN3anMraW50ZXJjZXB0b3JzQDAuMzkuNi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9jaHVuay00TkVZVFZXRC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgZGVjb2RlQnVmZmVyLFxuICBlbmNvZGVCdWZmZXIsXG4gIHRvQXJyYXlCdWZmZXJcbn0gZnJvbSBcIi4vY2h1bmstNkhZSVJGWDIubWpzXCI7XG5pbXBvcnQge1xuICBoYXNDb25maWd1cmFibGVHbG9iYWxcbn0gZnJvbSBcIi4vY2h1bmstVFg1R0JURlkubWpzXCI7XG5pbXBvcnQge1xuICBJU19QQVRDSEVEX01PRFVMRVxufSBmcm9tIFwiLi9jaHVuay02WU00UExCSS5tanNcIjtcbmltcG9ydCB7XG4gIFJlcXVlc3RDb250cm9sbGVyLFxuICBoYW5kbGVSZXF1ZXN0XG59IGZyb20gXCIuL2NodW5rLUE3UTRSVERKLm1qc1wiO1xuaW1wb3J0IHtcbiAgRmV0Y2hSZXNwb25zZSxcbiAgSU5URVJOQUxfUkVRVUVTVF9JRF9IRUFERVJfTkFNRSxcbiAgSW50ZXJjZXB0b3IsXG4gIGNyZWF0ZVJlcXVlc3RJZFxufSBmcm9tIFwiLi9jaHVuay1JSEpTUE1ZTS5tanNcIjtcbmltcG9ydCB7XG4gIHNldFJhd1JlcXVlc3Rcbn0gZnJvbSBcIi4vY2h1bmstM0dKQjRKREYubWpzXCI7XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvWE1MSHR0cFJlcXVlc3QvaW5kZXgudHNcbmltcG9ydCB7IGludmFyaWFudCBhcyBpbnZhcmlhbnQyIH0gZnJvbSBcIm91dHZhcmlhbnRcIjtcblxuLy8gc3JjL2ludGVyY2VwdG9ycy9YTUxIdHRwUmVxdWVzdC9YTUxIdHRwUmVxdWVzdENvbnRyb2xsZXIudHNcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gXCJvdXR2YXJpYW50XCI7XG5pbXBvcnQgeyBpc05vZGVQcm9jZXNzIH0gZnJvbSBcImlzLW5vZGUtcHJvY2Vzc1wiO1xuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL1hNTEh0dHBSZXF1ZXN0L3V0aWxzL2NvbmNhdEFycmF5QnVmZmVyLnRzXG5mdW5jdGlvbiBjb25jYXRBcnJheUJ1ZmZlcihsZWZ0LCByaWdodCkge1xuICBjb25zdCByZXN1bHQgPSBuZXcgVWludDhBcnJheShsZWZ0LmJ5dGVMZW5ndGggKyByaWdodC5ieXRlTGVuZ3RoKTtcbiAgcmVzdWx0LnNldChsZWZ0LCAwKTtcbiAgcmVzdWx0LnNldChyaWdodCwgbGVmdC5ieXRlTGVuZ3RoKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLy8gc3JjL2ludGVyY2VwdG9ycy9YTUxIdHRwUmVxdWVzdC9wb2x5ZmlsbHMvRXZlbnRQb2x5ZmlsbC50c1xudmFyIEV2ZW50UG9seWZpbGwgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHR5cGUsIG9wdGlvbnMpIHtcbiAgICB0aGlzLk5PTkUgPSAwO1xuICAgIHRoaXMuQ0FQVFVSSU5HX1BIQVNFID0gMTtcbiAgICB0aGlzLkFUX1RBUkdFVCA9IDI7XG4gICAgdGhpcy5CVUJCTElOR19QSEFTRSA9IDM7XG4gICAgdGhpcy50eXBlID0gXCJcIjtcbiAgICB0aGlzLnNyY0VsZW1lbnQgPSBudWxsO1xuICAgIHRoaXMuY3VycmVudFRhcmdldCA9IG51bGw7XG4gICAgdGhpcy5ldmVudFBoYXNlID0gMDtcbiAgICB0aGlzLmlzVHJ1c3RlZCA9IHRydWU7XG4gICAgdGhpcy5jb21wb3NlZCA9IGZhbHNlO1xuICAgIHRoaXMuY2FuY2VsYWJsZSA9IHRydWU7XG4gICAgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gZmFsc2U7XG4gICAgdGhpcy5idWJibGVzID0gdHJ1ZTtcbiAgICB0aGlzLmxlbmd0aENvbXB1dGFibGUgPSB0cnVlO1xuICAgIHRoaXMubG9hZGVkID0gMDtcbiAgICB0aGlzLnRvdGFsID0gMDtcbiAgICB0aGlzLmNhbmNlbEJ1YmJsZSA9IGZhbHNlO1xuICAgIHRoaXMucmV0dXJuVmFsdWUgPSB0cnVlO1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy50YXJnZXQgPSAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy50YXJnZXQpIHx8IG51bGw7XG4gICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuY3VycmVudFRhcmdldCkgfHwgbnVsbDtcbiAgICB0aGlzLnRpbWVTdGFtcCA9IERhdGUubm93KCk7XG4gIH1cbiAgY29tcG9zZWRQYXRoKCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBpbml0RXZlbnQodHlwZSwgYnViYmxlcywgY2FuY2VsYWJsZSkge1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5idWJibGVzID0gISFidWJibGVzO1xuICAgIHRoaXMuY2FuY2VsYWJsZSA9ICEhY2FuY2VsYWJsZTtcbiAgfVxuICBwcmV2ZW50RGVmYXVsdCgpIHtcbiAgICB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xuICB9XG4gIHN0b3BQcm9wYWdhdGlvbigpIHtcbiAgfVxuICBzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSB7XG4gIH1cbn07XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvWE1MSHR0cFJlcXVlc3QvcG9seWZpbGxzL1Byb2dyZXNzRXZlbnRQb2x5ZmlsbC50c1xudmFyIFByb2dyZXNzRXZlbnRQb2x5ZmlsbCA9IGNsYXNzIGV4dGVuZHMgRXZlbnRQb2x5ZmlsbCB7XG4gIGNvbnN0cnVjdG9yKHR5cGUsIGluaXQpIHtcbiAgICBzdXBlcih0eXBlKTtcbiAgICB0aGlzLmxlbmd0aENvbXB1dGFibGUgPSAoaW5pdCA9PSBudWxsID8gdm9pZCAwIDogaW5pdC5sZW5ndGhDb21wdXRhYmxlKSB8fCBmYWxzZTtcbiAgICB0aGlzLmNvbXBvc2VkID0gKGluaXQgPT0gbnVsbCA/IHZvaWQgMCA6IGluaXQuY29tcG9zZWQpIHx8IGZhbHNlO1xuICAgIHRoaXMubG9hZGVkID0gKGluaXQgPT0gbnVsbCA/IHZvaWQgMCA6IGluaXQubG9hZGVkKSB8fCAwO1xuICAgIHRoaXMudG90YWwgPSAoaW5pdCA9PSBudWxsID8gdm9pZCAwIDogaW5pdC50b3RhbCkgfHwgMDtcbiAgfVxufTtcblxuLy8gc3JjL2ludGVyY2VwdG9ycy9YTUxIdHRwUmVxdWVzdC91dGlscy9jcmVhdGVFdmVudC50c1xudmFyIFNVUFBPUlRTX1BST0dSRVNTX0VWRU5UID0gdHlwZW9mIFByb2dyZXNzRXZlbnQgIT09IFwidW5kZWZpbmVkXCI7XG5mdW5jdGlvbiBjcmVhdGVFdmVudCh0YXJnZXQsIHR5cGUsIGluaXQpIHtcbiAgY29uc3QgcHJvZ3Jlc3NFdmVudHMgPSBbXG4gICAgXCJlcnJvclwiLFxuICAgIFwicHJvZ3Jlc3NcIixcbiAgICBcImxvYWRzdGFydFwiLFxuICAgIFwibG9hZGVuZFwiLFxuICAgIFwibG9hZFwiLFxuICAgIFwidGltZW91dFwiLFxuICAgIFwiYWJvcnRcIlxuICBdO1xuICBjb25zdCBQcm9ncmVzc0V2ZW50Q2xhc3MgPSBTVVBQT1JUU19QUk9HUkVTU19FVkVOVCA/IFByb2dyZXNzRXZlbnQgOiBQcm9ncmVzc0V2ZW50UG9seWZpbGw7XG4gIGNvbnN0IGV2ZW50ID0gcHJvZ3Jlc3NFdmVudHMuaW5jbHVkZXModHlwZSkgPyBuZXcgUHJvZ3Jlc3NFdmVudENsYXNzKHR5cGUsIHtcbiAgICBsZW5ndGhDb21wdXRhYmxlOiB0cnVlLFxuICAgIGxvYWRlZDogKGluaXQgPT0gbnVsbCA/IHZvaWQgMCA6IGluaXQubG9hZGVkKSB8fCAwLFxuICAgIHRvdGFsOiAoaW5pdCA9PSBudWxsID8gdm9pZCAwIDogaW5pdC50b3RhbCkgfHwgMFxuICB9KSA6IG5ldyBFdmVudFBvbHlmaWxsKHR5cGUsIHtcbiAgICB0YXJnZXQsXG4gICAgY3VycmVudFRhcmdldDogdGFyZ2V0XG4gIH0pO1xuICByZXR1cm4gZXZlbnQ7XG59XG5cbi8vIHNyYy91dGlscy9maW5kUHJvcGVydHlTb3VyY2UudHNcbmZ1bmN0aW9uIGZpbmRQcm9wZXJ0eVNvdXJjZSh0YXJnZXQsIHByb3BlcnR5TmFtZSkge1xuICBpZiAoIShwcm9wZXJ0eU5hbWUgaW4gdGFyZ2V0KSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IGhhc1Byb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRhcmdldCwgcHJvcGVydHlOYW1lKTtcbiAgaWYgKGhhc1Byb3BlcnR5KSB7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICBjb25zdCBwcm90b3R5cGUgPSBSZWZsZWN0LmdldFByb3RvdHlwZU9mKHRhcmdldCk7XG4gIHJldHVybiBwcm90b3R5cGUgPyBmaW5kUHJvcGVydHlTb3VyY2UocHJvdG90eXBlLCBwcm9wZXJ0eU5hbWUpIDogbnVsbDtcbn1cblxuLy8gc3JjL3V0aWxzL2NyZWF0ZVByb3h5LnRzXG5mdW5jdGlvbiBjcmVhdGVQcm94eSh0YXJnZXQsIG9wdGlvbnMpIHtcbiAgY29uc3QgcHJveHkgPSBuZXcgUHJveHkodGFyZ2V0LCBvcHRpb25zVG9Qcm94eUhhbmRsZXIob3B0aW9ucykpO1xuICByZXR1cm4gcHJveHk7XG59XG5mdW5jdGlvbiBvcHRpb25zVG9Qcm94eUhhbmRsZXIob3B0aW9ucykge1xuICBjb25zdCB7IGNvbnN0cnVjdG9yQ2FsbCwgbWV0aG9kQ2FsbCwgZ2V0UHJvcGVydHksIHNldFByb3BlcnR5IH0gPSBvcHRpb25zO1xuICBjb25zdCBoYW5kbGVyID0ge307XG4gIGlmICh0eXBlb2YgY29uc3RydWN0b3JDYWxsICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgaGFuZGxlci5jb25zdHJ1Y3QgPSBmdW5jdGlvbih0YXJnZXQsIGFyZ3MsIG5ld1RhcmdldCkge1xuICAgICAgY29uc3QgbmV4dCA9IFJlZmxlY3QuY29uc3RydWN0LmJpbmQobnVsbCwgdGFyZ2V0LCBhcmdzLCBuZXdUYXJnZXQpO1xuICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yQ2FsbC5jYWxsKG5ld1RhcmdldCwgYXJncywgbmV4dCk7XG4gICAgfTtcbiAgfVxuICBoYW5kbGVyLnNldCA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHlOYW1lLCBuZXh0VmFsdWUpIHtcbiAgICBjb25zdCBuZXh0ID0gKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHlTb3VyY2UgPSBmaW5kUHJvcGVydHlTb3VyY2UodGFyZ2V0LCBwcm9wZXJ0eU5hbWUpIHx8IHRhcmdldDtcbiAgICAgIGNvbnN0IG93bkRlc2NyaXB0b3JzID0gUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoXG4gICAgICAgIHByb3BlcnR5U291cmNlLFxuICAgICAgICBwcm9wZXJ0eU5hbWVcbiAgICAgICk7XG4gICAgICBpZiAodHlwZW9mIChvd25EZXNjcmlwdG9ycyA9PSBudWxsID8gdm9pZCAwIDogb3duRGVzY3JpcHRvcnMuc2V0KSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBvd25EZXNjcmlwdG9ycy5zZXQuYXBwbHkodGFyZ2V0LCBbbmV4dFZhbHVlXSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkocHJvcGVydHlTb3VyY2UsIHByb3BlcnR5TmFtZSwge1xuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogbmV4dFZhbHVlXG4gICAgICB9KTtcbiAgICB9O1xuICAgIGlmICh0eXBlb2Ygc2V0UHJvcGVydHkgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybiBzZXRQcm9wZXJ0eS5jYWxsKHRhcmdldCwgW3Byb3BlcnR5TmFtZSwgbmV4dFZhbHVlXSwgbmV4dCk7XG4gICAgfVxuICAgIHJldHVybiBuZXh0KCk7XG4gIH07XG4gIGhhbmRsZXIuZ2V0ID0gZnVuY3Rpb24odGFyZ2V0LCBwcm9wZXJ0eU5hbWUsIHJlY2VpdmVyKSB7XG4gICAgY29uc3QgbmV4dCA9ICgpID0+IHRhcmdldFtwcm9wZXJ0eU5hbWVdO1xuICAgIGNvbnN0IHZhbHVlID0gdHlwZW9mIGdldFByb3BlcnR5ICE9PSBcInVuZGVmaW5lZFwiID8gZ2V0UHJvcGVydHkuY2FsbCh0YXJnZXQsIFtwcm9wZXJ0eU5hbWUsIHJlY2VpdmVyXSwgbmV4dCkgOiBuZXh0KCk7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgY29uc3QgbmV4dDIgPSB2YWx1ZS5iaW5kKHRhcmdldCwgLi4uYXJncyk7XG4gICAgICAgIGlmICh0eXBlb2YgbWV0aG9kQ2FsbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIHJldHVybiBtZXRob2RDYWxsLmNhbGwodGFyZ2V0LCBbcHJvcGVydHlOYW1lLCBhcmdzXSwgbmV4dDIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXh0MigpO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuICByZXR1cm4gaGFuZGxlcjtcbn1cblxuLy8gc3JjL2ludGVyY2VwdG9ycy9YTUxIdHRwUmVxdWVzdC91dGlscy9pc0RvbVBhcnNlclN1cHBvcnRlZFR5cGUudHNcbmZ1bmN0aW9uIGlzRG9tUGFyc2VyU3VwcG9ydGVkVHlwZSh0eXBlKSB7XG4gIGNvbnN0IHN1cHBvcnRlZFR5cGVzID0gW1xuICAgIFwiYXBwbGljYXRpb24veGh0bWwreG1sXCIsXG4gICAgXCJhcHBsaWNhdGlvbi94bWxcIixcbiAgICBcImltYWdlL3N2Zyt4bWxcIixcbiAgICBcInRleHQvaHRtbFwiLFxuICAgIFwidGV4dC94bWxcIlxuICBdO1xuICByZXR1cm4gc3VwcG9ydGVkVHlwZXMuc29tZSgoc3VwcG9ydGVkVHlwZSkgPT4ge1xuICAgIHJldHVybiB0eXBlLnN0YXJ0c1dpdGgoc3VwcG9ydGVkVHlwZSk7XG4gIH0pO1xufVxuXG4vLyBzcmMvdXRpbHMvcGFyc2VKc29uLnRzXG5mdW5jdGlvbiBwYXJzZUpzb24oZGF0YSkge1xuICB0cnkge1xuICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgIHJldHVybiBqc29uO1xuICB9IGNhdGNoIChfKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLy8gc3JjL2ludGVyY2VwdG9ycy9YTUxIdHRwUmVxdWVzdC91dGlscy9jcmVhdGVSZXNwb25zZS50c1xuZnVuY3Rpb24gY3JlYXRlUmVzcG9uc2UocmVxdWVzdCwgYm9keSkge1xuICBjb25zdCByZXNwb25zZUJvZHlPck51bGwgPSBGZXRjaFJlc3BvbnNlLmlzUmVzcG9uc2VXaXRoQm9keShyZXF1ZXN0LnN0YXR1cykgPyBib2R5IDogbnVsbDtcbiAgcmV0dXJuIG5ldyBGZXRjaFJlc3BvbnNlKHJlc3BvbnNlQm9keU9yTnVsbCwge1xuICAgIHVybDogcmVxdWVzdC5yZXNwb25zZVVSTCxcbiAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzLFxuICAgIHN0YXR1c1RleHQ6IHJlcXVlc3Quc3RhdHVzVGV4dCxcbiAgICBoZWFkZXJzOiBjcmVhdGVIZWFkZXJzRnJvbVhNTEh0dHBSZXF1ZXN0SGVhZGVycyhcbiAgICAgIHJlcXVlc3QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKClcbiAgICApXG4gIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlSGVhZGVyc0Zyb21YTUxIdHRwUmVxdWVzdEhlYWRlcnMoaGVhZGVyc1N0cmluZykge1xuICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgY29uc3QgbGluZXMgPSBoZWFkZXJzU3RyaW5nLnNwbGl0KC9bXFxyXFxuXSsvKTtcbiAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgaWYgKGxpbmUudHJpbSgpID09PSBcIlwiKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3QgW25hbWUsIC4uLnBhcnRzXSA9IGxpbmUuc3BsaXQoXCI6IFwiKTtcbiAgICBjb25zdCB2YWx1ZSA9IHBhcnRzLmpvaW4oXCI6IFwiKTtcbiAgICBoZWFkZXJzLmFwcGVuZChuYW1lLCB2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIGhlYWRlcnM7XG59XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvWE1MSHR0cFJlcXVlc3QvdXRpbHMvZ2V0Qm9keUJ5dGVMZW5ndGgudHNcbmFzeW5jIGZ1bmN0aW9uIGdldEJvZHlCeXRlTGVuZ3RoKGlucHV0KSB7XG4gIGNvbnN0IGV4cGxpY2l0Q29udGVudExlbmd0aCA9IGlucHV0LmhlYWRlcnMuZ2V0KFwiY29udGVudC1sZW5ndGhcIik7XG4gIGlmIChleHBsaWNpdENvbnRlbnRMZW5ndGggIT0gbnVsbCAmJiBleHBsaWNpdENvbnRlbnRMZW5ndGggIT09IFwiXCIpIHtcbiAgICByZXR1cm4gTnVtYmVyKGV4cGxpY2l0Q29udGVudExlbmd0aCk7XG4gIH1cbiAgY29uc3QgYnVmZmVyID0gYXdhaXQgaW5wdXQuYXJyYXlCdWZmZXIoKTtcbiAgcmV0dXJuIGJ1ZmZlci5ieXRlTGVuZ3RoO1xufVxuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL1hNTEh0dHBSZXF1ZXN0L1hNTEh0dHBSZXF1ZXN0Q29udHJvbGxlci50c1xudmFyIGtJc1JlcXVlc3RIYW5kbGVkID0gU3ltYm9sKFwia0lzUmVxdWVzdEhhbmRsZWRcIik7XG52YXIgSVNfTk9ERSA9IGlzTm9kZVByb2Nlc3MoKTtcbnZhciBrRmV0Y2hSZXF1ZXN0ID0gU3ltYm9sKFwia0ZldGNoUmVxdWVzdFwiKTtcbnZhciBYTUxIdHRwUmVxdWVzdENvbnRyb2xsZXIgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGluaXRpYWxSZXF1ZXN0LCBsb2dnZXIpIHtcbiAgICB0aGlzLmluaXRpYWxSZXF1ZXN0ID0gaW5pdGlhbFJlcXVlc3Q7XG4gICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XG4gICAgdGhpcy5tZXRob2QgPSBcIkdFVFwiO1xuICAgIHRoaXMudXJsID0gbnVsbDtcbiAgICB0aGlzW2tJc1JlcXVlc3RIYW5kbGVkXSA9IGZhbHNlO1xuICAgIHRoaXMuZXZlbnRzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICB0aGlzLnVwbG9hZEV2ZW50cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgdGhpcy5yZXF1ZXN0SWQgPSBjcmVhdGVSZXF1ZXN0SWQoKTtcbiAgICB0aGlzLnJlcXVlc3RIZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICB0aGlzLnJlc3BvbnNlQnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoKTtcbiAgICB0aGlzLnJlcXVlc3QgPSBjcmVhdGVQcm94eShpbml0aWFsUmVxdWVzdCwge1xuICAgICAgc2V0UHJvcGVydHk6IChbcHJvcGVydHlOYW1lLCBuZXh0VmFsdWVdLCBpbnZva2UpID0+IHtcbiAgICAgICAgc3dpdGNoIChwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgICBjYXNlIFwib250aW1lb3V0XCI6IHtcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50TmFtZSA9IHByb3BlcnR5TmFtZS5zbGljZShcbiAgICAgICAgICAgICAgMlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbmV4dFZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBpbnZva2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgcmV0dXJuIGludm9rZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG1ldGhvZENhbGw6IChbbWV0aG9kTmFtZSwgYXJnc10sIGludm9rZSkgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHN3aXRjaCAobWV0aG9kTmFtZSkge1xuICAgICAgICAgIGNhc2UgXCJvcGVuXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IFttZXRob2QsIHVybF0gPSBhcmdzO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cmwgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgdGhpcy5tZXRob2QgPSBcIkdFVFwiO1xuICAgICAgICAgICAgICB0aGlzLnVybCA9IHRvQWJzb2x1dGVVcmwobWV0aG9kKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMubWV0aG9kID0gbWV0aG9kO1xuICAgICAgICAgICAgICB0aGlzLnVybCA9IHRvQWJzb2x1dGVVcmwodXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubG9nZ2VyID0gdGhpcy5sb2dnZXIuZXh0ZW5kKGAke3RoaXMubWV0aG9kfSAke3RoaXMudXJsLmhyZWZ9YCk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwib3BlblwiLCB0aGlzLm1ldGhvZCwgdGhpcy51cmwuaHJlZik7XG4gICAgICAgICAgICByZXR1cm4gaW52b2tlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJhZGRFdmVudExpc3RlbmVyXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IFtldmVudE5hbWUsIGxpc3RlbmVyXSA9IGFyZ3M7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoZXZlbnROYW1lLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiYWRkRXZlbnRMaXN0ZW5lclwiLCBldmVudE5hbWUsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIHJldHVybiBpbnZva2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcInNldFJlcXVlc3RIZWFkZXJcIjoge1xuICAgICAgICAgICAgY29uc3QgW25hbWUsIHZhbHVlXSA9IGFyZ3M7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RIZWFkZXJzLnNldChuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwic2V0UmVxdWVzdEhlYWRlclwiLCBuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gaW52b2tlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJzZW5kXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IFtib2R5XSA9IGFyZ3M7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub25SZXNwb25zZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZldGNoUmVzcG9uc2UgPSBjcmVhdGVSZXNwb25zZShcbiAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdCxcbiAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICogVGhlIGByZXNwb25zZWAgcHJvcGVydHkgaXMgdGhlIHJpZ2h0IHdheSB0byByZWFkXG4gICAgICAgICAgICAgICAgICAgKiB0aGUgYW1iaWd1b3VzIHJlc3BvbnNlIGJvZHksIGFzIHRoZSByZXF1ZXN0J3MgXCJyZXNwb25zZVR5cGVcIiBtYXkgZGlmZmVyLlxuICAgICAgICAgICAgICAgICAgICogQHNlZSBodHRwczovL3hoci5zcGVjLndoYXR3Zy5vcmcvI3RoZS1yZXNwb25zZS1hdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0LnJlc3BvbnNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uUmVzcG9uc2UuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICAgICAgICByZXNwb25zZTogZmV0Y2hSZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgIGlzTW9ja2VkUmVzcG9uc2U6IHRoaXNba0lzUmVxdWVzdEhhbmRsZWRdLFxuICAgICAgICAgICAgICAgICAgcmVxdWVzdDogZmV0Y2hSZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgcmVxdWVzdElkOiB0aGlzLnJlcXVlc3RJZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gdHlwZW9mIGJvZHkgPT09IFwic3RyaW5nXCIgPyBlbmNvZGVCdWZmZXIoYm9keSkgOiBib2R5O1xuICAgICAgICAgICAgY29uc3QgZmV0Y2hSZXF1ZXN0ID0gdGhpcy50b0ZldGNoQXBpUmVxdWVzdChyZXF1ZXN0Qm9keSk7XG4gICAgICAgICAgICB0aGlzW2tGZXRjaFJlcXVlc3RdID0gZmV0Y2hSZXF1ZXN0LmNsb25lKCk7XG4gICAgICAgICAgICBjb25zdCBvbmNlUmVxdWVzdFNldHRsZWQgPSAoKF9hID0gdGhpcy5vblJlcXVlc3QpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgICAgcmVxdWVzdDogZmV0Y2hSZXF1ZXN0LFxuICAgICAgICAgICAgICByZXF1ZXN0SWQ6IHRoaXMucmVxdWVzdElkXG4gICAgICAgICAgICB9KSkgfHwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICBvbmNlUmVxdWVzdFNldHRsZWQuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICghdGhpc1trSXNSZXF1ZXN0SGFuZGxlZF0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgICAgXCJyZXF1ZXN0IGNhbGxiYWNrIHNldHRsZWQgYnV0IHJlcXVlc3QgaGFzIG5vdCBiZWVuIGhhbmRsZWQgKHJlYWR5c3RhdGUgJWQpLCBwZXJmb3JtaW5nIGFzLWlzLi4uXCIsXG4gICAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3QucmVhZHlTdGF0ZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKElTX05PREUpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKFxuICAgICAgICAgICAgICAgICAgICBJTlRFUk5BTF9SRVFVRVNUX0lEX0hFQURFUl9OQU1FLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RJZFxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGludm9rZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICByZXR1cm4gaW52b2tlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgZGVmaW5lKFxuICAgICAgdGhpcy5yZXF1ZXN0LFxuICAgICAgXCJ1cGxvYWRcIixcbiAgICAgIGNyZWF0ZVByb3h5KHRoaXMucmVxdWVzdC51cGxvYWQsIHtcbiAgICAgICAgc2V0UHJvcGVydHk6IChbcHJvcGVydHlOYW1lLCBuZXh0VmFsdWVdLCBpbnZva2UpID0+IHtcbiAgICAgICAgICBzd2l0Y2ggKHByb3BlcnR5TmFtZSkge1xuICAgICAgICAgICAgY2FzZSBcIm9ubG9hZHN0YXJ0XCI6XG4gICAgICAgICAgICBjYXNlIFwib25wcm9ncmVzc1wiOlxuICAgICAgICAgICAgY2FzZSBcIm9uYWJvYXJ0XCI6XG4gICAgICAgICAgICBjYXNlIFwib25lcnJvclwiOlxuICAgICAgICAgICAgY2FzZSBcIm9ubG9hZFwiOlxuICAgICAgICAgICAgY2FzZSBcIm9udGltZW91dFwiOlxuICAgICAgICAgICAgY2FzZSBcIm9ubG9hZGVuZFwiOiB7XG4gICAgICAgICAgICAgIGNvbnN0IGV2ZW50TmFtZSA9IHByb3BlcnR5TmFtZS5zbGljZShcbiAgICAgICAgICAgICAgICAyXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJVcGxvYWRFdmVudChldmVudE5hbWUsIG5leHRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBpbnZva2UoKTtcbiAgICAgICAgfSxcbiAgICAgICAgbWV0aG9kQ2FsbDogKFttZXRob2ROYW1lLCBhcmdzXSwgaW52b2tlKSA9PiB7XG4gICAgICAgICAgc3dpdGNoIChtZXRob2ROYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFwiYWRkRXZlbnRMaXN0ZW5lclwiOiB7XG4gICAgICAgICAgICAgIGNvbnN0IFtldmVudE5hbWUsIGxpc3RlbmVyXSA9IGFyZ3M7XG4gICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJVcGxvYWRFdmVudChldmVudE5hbWUsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcInVwbG9hZC5hZGRFdmVudExpc3RlbmVyXCIsIGV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgICByZXR1cm4gaW52b2tlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG4gIH1cbiAgcmVnaXN0ZXJFdmVudChldmVudE5hbWUsIGxpc3RlbmVyKSB7XG4gICAgY29uc3QgcHJldkV2ZW50cyA9IHRoaXMuZXZlbnRzLmdldChldmVudE5hbWUpIHx8IFtdO1xuICAgIGNvbnN0IG5leHRFdmVudHMgPSBwcmV2RXZlbnRzLmNvbmNhdChsaXN0ZW5lcik7XG4gICAgdGhpcy5ldmVudHMuc2V0KGV2ZW50TmFtZSwgbmV4dEV2ZW50cyk7XG4gICAgdGhpcy5sb2dnZXIuaW5mbygncmVnaXN0ZXJlZCBldmVudCBcIiVzXCInLCBldmVudE5hbWUsIGxpc3RlbmVyKTtcbiAgfVxuICByZWdpc3RlclVwbG9hZEV2ZW50KGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICBjb25zdCBwcmV2RXZlbnRzID0gdGhpcy51cGxvYWRFdmVudHMuZ2V0KGV2ZW50TmFtZSkgfHwgW107XG4gICAgY29uc3QgbmV4dEV2ZW50cyA9IHByZXZFdmVudHMuY29uY2F0KGxpc3RlbmVyKTtcbiAgICB0aGlzLnVwbG9hZEV2ZW50cy5zZXQoZXZlbnROYW1lLCBuZXh0RXZlbnRzKTtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKCdyZWdpc3RlcmVkIHVwbG9hZCBldmVudCBcIiVzXCInLCBldmVudE5hbWUsIGxpc3RlbmVyKTtcbiAgfVxuICAvKipcbiAgICogUmVzcG9uZHMgdG8gdGhlIGN1cnJlbnQgcmVxdWVzdCB3aXRoIHRoZSBnaXZlblxuICAgKiBGZXRjaCBBUEkgYFJlc3BvbnNlYCBpbnN0YW5jZS5cbiAgICovXG4gIGFzeW5jIHJlc3BvbmRXaXRoKHJlc3BvbnNlKSB7XG4gICAgdGhpc1trSXNSZXF1ZXN0SGFuZGxlZF0gPSB0cnVlO1xuICAgIGlmICh0aGlzW2tGZXRjaFJlcXVlc3RdKSB7XG4gICAgICBjb25zdCB0b3RhbFJlcXVlc3RCb2R5TGVuZ3RoID0gYXdhaXQgZ2V0Qm9keUJ5dGVMZW5ndGgoXG4gICAgICAgIHRoaXNba0ZldGNoUmVxdWVzdF1cbiAgICAgICk7XG4gICAgICB0aGlzLnRyaWdnZXIoXCJsb2Fkc3RhcnRcIiwgdGhpcy5yZXF1ZXN0LnVwbG9hZCwge1xuICAgICAgICBsb2FkZWQ6IDAsXG4gICAgICAgIHRvdGFsOiB0b3RhbFJlcXVlc3RCb2R5TGVuZ3RoXG4gICAgICB9KTtcbiAgICAgIHRoaXMudHJpZ2dlcihcInByb2dyZXNzXCIsIHRoaXMucmVxdWVzdC51cGxvYWQsIHtcbiAgICAgICAgbG9hZGVkOiB0b3RhbFJlcXVlc3RCb2R5TGVuZ3RoLFxuICAgICAgICB0b3RhbDogdG90YWxSZXF1ZXN0Qm9keUxlbmd0aFxuICAgICAgfSk7XG4gICAgICB0aGlzLnRyaWdnZXIoXCJsb2FkXCIsIHRoaXMucmVxdWVzdC51cGxvYWQsIHtcbiAgICAgICAgbG9hZGVkOiB0b3RhbFJlcXVlc3RCb2R5TGVuZ3RoLFxuICAgICAgICB0b3RhbDogdG90YWxSZXF1ZXN0Qm9keUxlbmd0aFxuICAgICAgfSk7XG4gICAgICB0aGlzLnRyaWdnZXIoXCJsb2FkZW5kXCIsIHRoaXMucmVxdWVzdC51cGxvYWQsIHtcbiAgICAgICAgbG9hZGVkOiB0b3RhbFJlcXVlc3RCb2R5TGVuZ3RoLFxuICAgICAgICB0b3RhbDogdG90YWxSZXF1ZXN0Qm9keUxlbmd0aFxuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICBcInJlc3BvbmRpbmcgd2l0aCBhIG1vY2tlZCByZXNwb25zZTogJWQgJXNcIixcbiAgICAgIHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgIHJlc3BvbnNlLnN0YXR1c1RleHRcbiAgICApO1xuICAgIGRlZmluZSh0aGlzLnJlcXVlc3QsIFwic3RhdHVzXCIsIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgZGVmaW5lKHRoaXMucmVxdWVzdCwgXCJzdGF0dXNUZXh0XCIsIHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuICAgIGRlZmluZSh0aGlzLnJlcXVlc3QsIFwicmVzcG9uc2VVUkxcIiwgdGhpcy51cmwuaHJlZik7XG4gICAgdGhpcy5yZXF1ZXN0LmdldFJlc3BvbnNlSGVhZGVyID0gbmV3IFByb3h5KHRoaXMucmVxdWVzdC5nZXRSZXNwb25zZUhlYWRlciwge1xuICAgICAgYXBwbHk6IChfLCBfXywgYXJncykgPT4ge1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiZ2V0UmVzcG9uc2VIZWFkZXJcIiwgYXJnc1swXSk7XG4gICAgICAgIGlmICh0aGlzLnJlcXVlc3QucmVhZHlTdGF0ZSA8IHRoaXMucmVxdWVzdC5IRUFERVJTX1JFQ0VJVkVEKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcImhlYWRlcnMgbm90IHJlY2VpdmVkIHlldCwgcmV0dXJuaW5nIG51bGxcIik7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGVhZGVyVmFsdWUgPSByZXNwb25zZS5oZWFkZXJzLmdldChhcmdzWzBdKTtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAncmVzb2x2ZWQgcmVzcG9uc2UgaGVhZGVyIFwiJXNcIiB0bycsXG4gICAgICAgICAgYXJnc1swXSxcbiAgICAgICAgICBoZWFkZXJWYWx1ZVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gaGVhZGVyVmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5yZXF1ZXN0LmdldEFsbFJlc3BvbnNlSGVhZGVycyA9IG5ldyBQcm94eShcbiAgICAgIHRoaXMucmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMsXG4gICAgICB7XG4gICAgICAgIGFwcGx5OiAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcImdldEFsbFJlc3BvbnNlSGVhZGVyc1wiKTtcbiAgICAgICAgICBpZiAodGhpcy5yZXF1ZXN0LnJlYWR5U3RhdGUgPCB0aGlzLnJlcXVlc3QuSEVBREVSU19SRUNFSVZFRCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcImhlYWRlcnMgbm90IHJlY2VpdmVkIHlldCwgcmV0dXJuaW5nIGVtcHR5IHN0cmluZ1wiKTtcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBoZWFkZXJzTGlzdCA9IEFycmF5LmZyb20ocmVzcG9uc2UuaGVhZGVycy5lbnRyaWVzKCkpO1xuICAgICAgICAgIGNvbnN0IGFsbEhlYWRlcnMgPSBoZWFkZXJzTGlzdC5tYXAoKFtoZWFkZXJOYW1lLCBoZWFkZXJWYWx1ZV0pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBgJHtoZWFkZXJOYW1lfTogJHtoZWFkZXJWYWx1ZX1gO1xuICAgICAgICAgIH0pLmpvaW4oXCJcXHJcXG5cIik7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcInJlc29sdmVkIGFsbCByZXNwb25zZSBoZWFkZXJzIHRvXCIsIGFsbEhlYWRlcnMpO1xuICAgICAgICAgIHJldHVybiBhbGxIZWFkZXJzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLnJlcXVlc3QsIHtcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgIGdldDogKCkgPT4gdGhpcy5yZXNwb25zZVxuICAgICAgfSxcbiAgICAgIHJlc3BvbnNlVGV4dDoge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICBnZXQ6ICgpID0+IHRoaXMucmVzcG9uc2VUZXh0XG4gICAgICB9LFxuICAgICAgcmVzcG9uc2VYTUw6IHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgZ2V0OiAoKSA9PiB0aGlzLnJlc3BvbnNlWE1MXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgdG90YWxSZXNwb25zZUJvZHlMZW5ndGggPSBhd2FpdCBnZXRCb2R5Qnl0ZUxlbmd0aChyZXNwb25zZS5jbG9uZSgpKTtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKFwiY2FsY3VsYXRlZCByZXNwb25zZSBib2R5IGxlbmd0aFwiLCB0b3RhbFJlc3BvbnNlQm9keUxlbmd0aCk7XG4gICAgdGhpcy50cmlnZ2VyKFwibG9hZHN0YXJ0XCIsIHRoaXMucmVxdWVzdCwge1xuICAgICAgbG9hZGVkOiAwLFxuICAgICAgdG90YWw6IHRvdGFsUmVzcG9uc2VCb2R5TGVuZ3RoXG4gICAgfSk7XG4gICAgdGhpcy5zZXRSZWFkeVN0YXRlKHRoaXMucmVxdWVzdC5IRUFERVJTX1JFQ0VJVkVEKTtcbiAgICB0aGlzLnNldFJlYWR5U3RhdGUodGhpcy5yZXF1ZXN0LkxPQURJTkcpO1xuICAgIGNvbnN0IGZpbmFsaXplUmVzcG9uc2UgPSAoKSA9PiB7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiZmluYWxpemluZyB0aGUgbW9ja2VkIHJlc3BvbnNlLi4uXCIpO1xuICAgICAgdGhpcy5zZXRSZWFkeVN0YXRlKHRoaXMucmVxdWVzdC5ET05FKTtcbiAgICAgIHRoaXMudHJpZ2dlcihcImxvYWRcIiwgdGhpcy5yZXF1ZXN0LCB7XG4gICAgICAgIGxvYWRlZDogdGhpcy5yZXNwb25zZUJ1ZmZlci5ieXRlTGVuZ3RoLFxuICAgICAgICB0b3RhbDogdG90YWxSZXNwb25zZUJvZHlMZW5ndGhcbiAgICAgIH0pO1xuICAgICAgdGhpcy50cmlnZ2VyKFwibG9hZGVuZFwiLCB0aGlzLnJlcXVlc3QsIHtcbiAgICAgICAgbG9hZGVkOiB0aGlzLnJlc3BvbnNlQnVmZmVyLmJ5dGVMZW5ndGgsXG4gICAgICAgIHRvdGFsOiB0b3RhbFJlc3BvbnNlQm9keUxlbmd0aFxuICAgICAgfSk7XG4gICAgfTtcbiAgICBpZiAocmVzcG9uc2UuYm9keSkge1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcIm1vY2tlZCByZXNwb25zZSBoYXMgYm9keSwgc3RyZWFtaW5nLi4uXCIpO1xuICAgICAgY29uc3QgcmVhZGVyID0gcmVzcG9uc2UuYm9keS5nZXRSZWFkZXIoKTtcbiAgICAgIGNvbnN0IHJlYWROZXh0UmVzcG9uc2VCb2R5Q2h1bmsgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcInJlc3BvbnNlIGJvZHkgc3RyZWFtIGRvbmUhXCIpO1xuICAgICAgICAgIGZpbmFsaXplUmVzcG9uc2UoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcInJlYWQgcmVzcG9uc2UgYm9keSBjaHVuazpcIiwgdmFsdWUpO1xuICAgICAgICAgIHRoaXMucmVzcG9uc2VCdWZmZXIgPSBjb25jYXRBcnJheUJ1ZmZlcih0aGlzLnJlc3BvbnNlQnVmZmVyLCB2YWx1ZSk7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyKFwicHJvZ3Jlc3NcIiwgdGhpcy5yZXF1ZXN0LCB7XG4gICAgICAgICAgICBsb2FkZWQ6IHRoaXMucmVzcG9uc2VCdWZmZXIuYnl0ZUxlbmd0aCxcbiAgICAgICAgICAgIHRvdGFsOiB0b3RhbFJlc3BvbnNlQm9keUxlbmd0aFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJlYWROZXh0UmVzcG9uc2VCb2R5Q2h1bmsoKTtcbiAgICAgIH07XG4gICAgICByZWFkTmV4dFJlc3BvbnNlQm9keUNodW5rKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpbmFsaXplUmVzcG9uc2UoKTtcbiAgICB9XG4gIH1cbiAgcmVzcG9uc2VCdWZmZXJUb1RleHQoKSB7XG4gICAgcmV0dXJuIGRlY29kZUJ1ZmZlcih0aGlzLnJlc3BvbnNlQnVmZmVyKTtcbiAgfVxuICBnZXQgcmVzcG9uc2UoKSB7XG4gICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgIFwiZ2V0UmVzcG9uc2UgKHJlc3BvbnNlVHlwZTogJXMpXCIsXG4gICAgICB0aGlzLnJlcXVlc3QucmVzcG9uc2VUeXBlXG4gICAgKTtcbiAgICBpZiAodGhpcy5yZXF1ZXN0LnJlYWR5U3RhdGUgIT09IHRoaXMucmVxdWVzdC5ET05FKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc3dpdGNoICh0aGlzLnJlcXVlc3QucmVzcG9uc2VUeXBlKSB7XG4gICAgICBjYXNlIFwianNvblwiOiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlSnNvbiA9IHBhcnNlSnNvbih0aGlzLnJlc3BvbnNlQnVmZmVyVG9UZXh0KCkpO1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwicmVzb2x2ZWQgcmVzcG9uc2UgSlNPTlwiLCByZXNwb25zZUpzb24pO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2VKc29uO1xuICAgICAgfVxuICAgICAgY2FzZSBcImFycmF5YnVmZmVyXCI6IHtcbiAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB0b0FycmF5QnVmZmVyKHRoaXMucmVzcG9uc2VCdWZmZXIpO1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwicmVzb2x2ZWQgcmVzcG9uc2UgQXJyYXlCdWZmZXJcIiwgYXJyYXlCdWZmZXIpO1xuICAgICAgICByZXR1cm4gYXJyYXlCdWZmZXI7XG4gICAgICB9XG4gICAgICBjYXNlIFwiYmxvYlwiOiB7XG4gICAgICAgIGNvbnN0IG1pbWVUeXBlID0gdGhpcy5yZXF1ZXN0LmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpIHx8IFwidGV4dC9wbGFpblwiO1xuICAgICAgICBjb25zdCByZXNwb25zZUJsb2IgPSBuZXcgQmxvYihbdGhpcy5yZXNwb25zZUJ1ZmZlclRvVGV4dCgpXSwge1xuICAgICAgICAgIHR5cGU6IG1pbWVUeXBlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgIFwicmVzb2x2ZWQgcmVzcG9uc2UgQmxvYiAobWltZSB0eXBlOiAlcylcIixcbiAgICAgICAgICByZXNwb25zZUJsb2IsXG4gICAgICAgICAgbWltZVR5cGVcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlQmxvYjtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gdGhpcy5yZXNwb25zZUJ1ZmZlclRvVGV4dCgpO1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICdyZXNvbHZpbmcgXCIlc1wiIHJlc3BvbnNlIHR5cGUgYXMgdGV4dCcsXG4gICAgICAgICAgdGhpcy5yZXF1ZXN0LnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICByZXNwb25zZVRleHRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlVGV4dDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZ2V0IHJlc3BvbnNlVGV4dCgpIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0aGlzLnJlcXVlc3QucmVzcG9uc2VUeXBlID09PSBcIlwiIHx8IHRoaXMucmVxdWVzdC5yZXNwb25zZVR5cGUgPT09IFwidGV4dFwiLFxuICAgICAgXCJJbnZhbGlkU3RhdGVFcnJvcjogVGhlIG9iamVjdCBpcyBpbiBpbnZhbGlkIHN0YXRlLlwiXG4gICAgKTtcbiAgICBpZiAodGhpcy5yZXF1ZXN0LnJlYWR5U3RhdGUgIT09IHRoaXMucmVxdWVzdC5MT0FESU5HICYmIHRoaXMucmVxdWVzdC5yZWFkeVN0YXRlICE9PSB0aGlzLnJlcXVlc3QuRE9ORSkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IHRoaXMucmVzcG9uc2VCdWZmZXJUb1RleHQoKTtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKCdnZXRSZXNwb25zZVRleHQ6IFwiJXNcIicsIHJlc3BvbnNlVGV4dCk7XG4gICAgcmV0dXJuIHJlc3BvbnNlVGV4dDtcbiAgfVxuICBnZXQgcmVzcG9uc2VYTUwoKSB7XG4gICAgaW52YXJpYW50KFxuICAgICAgdGhpcy5yZXF1ZXN0LnJlc3BvbnNlVHlwZSA9PT0gXCJcIiB8fCB0aGlzLnJlcXVlc3QucmVzcG9uc2VUeXBlID09PSBcImRvY3VtZW50XCIsXG4gICAgICBcIkludmFsaWRTdGF0ZUVycm9yOiBUaGUgb2JqZWN0IGlzIGluIGludmFsaWQgc3RhdGUuXCJcbiAgICApO1xuICAgIGlmICh0aGlzLnJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gdGhpcy5yZXF1ZXN0LkRPTkUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBjb250ZW50VHlwZSA9IHRoaXMucmVxdWVzdC5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSB8fCBcIlwiO1xuICAgIGlmICh0eXBlb2YgRE9NUGFyc2VyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiQ2Fubm90IHJldHJpZXZlIFhNTEh0dHBSZXF1ZXN0IHJlc3BvbnNlIGJvZHkgYXMgWE1MOiBET01QYXJzZXIgaXMgbm90IGRlZmluZWQuIFlvdSBhcmUgbGlrZWx5IHVzaW5nIGFuIGVudmlyb25tZW50IHRoYXQgaXMgbm90IGJyb3dzZXIgb3IgZG9lcyBub3QgcG9seWZpbGwgYnJvd3NlciBnbG9iYWxzIGNvcnJlY3RseS5cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoaXNEb21QYXJzZXJTdXBwb3J0ZWRUeXBlKGNvbnRlbnRUeXBlKSkge1xuICAgICAgcmV0dXJuIG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoXG4gICAgICAgIHRoaXMucmVzcG9uc2VCdWZmZXJUb1RleHQoKSxcbiAgICAgICAgY29udGVudFR5cGVcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGVycm9yV2l0aChlcnJvcikge1xuICAgIHRoaXNba0lzUmVxdWVzdEhhbmRsZWRdID0gdHJ1ZTtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKFwicmVzcG9uZGluZyB3aXRoIGFuIGVycm9yXCIpO1xuICAgIHRoaXMuc2V0UmVhZHlTdGF0ZSh0aGlzLnJlcXVlc3QuRE9ORSk7XG4gICAgdGhpcy50cmlnZ2VyKFwiZXJyb3JcIiwgdGhpcy5yZXF1ZXN0KTtcbiAgICB0aGlzLnRyaWdnZXIoXCJsb2FkZW5kXCIsIHRoaXMucmVxdWVzdCk7XG4gIH1cbiAgLyoqXG4gICAqIFRyYW5zaXRpb25zIHRoaXMgcmVxdWVzdCdzIGByZWFkeVN0YXRlYCB0byB0aGUgZ2l2ZW4gb25lLlxuICAgKi9cbiAgc2V0UmVhZHlTdGF0ZShuZXh0UmVhZHlTdGF0ZSkge1xuICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICBcInNldFJlYWR5U3RhdGU6ICVkIC0+ICVkXCIsXG4gICAgICB0aGlzLnJlcXVlc3QucmVhZHlTdGF0ZSxcbiAgICAgIG5leHRSZWFkeVN0YXRlXG4gICAgKTtcbiAgICBpZiAodGhpcy5yZXF1ZXN0LnJlYWR5U3RhdGUgPT09IG5leHRSZWFkeVN0YXRlKSB7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKFwicmVhZHkgc3RhdGUgaWRlbnRpY2FsLCBza2lwcGluZyB0cmFuc2l0aW9uLi4uXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkZWZpbmUodGhpcy5yZXF1ZXN0LCBcInJlYWR5U3RhdGVcIiwgbmV4dFJlYWR5U3RhdGUpO1xuICAgIHRoaXMubG9nZ2VyLmluZm8oXCJzZXQgcmVhZHlTdGF0ZSB0bzogJWRcIiwgbmV4dFJlYWR5U3RhdGUpO1xuICAgIGlmIChuZXh0UmVhZHlTdGF0ZSAhPT0gdGhpcy5yZXF1ZXN0LlVOU0VOVCkge1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbygndHJpZ2dlcmluZyBcInJlYWR5c3RhdGVjaGFuZ2VcIiBldmVudC4uLicpO1xuICAgICAgdGhpcy50cmlnZ2VyKFwicmVhZHlzdGF0ZWNoYW5nZVwiLCB0aGlzLnJlcXVlc3QpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVHJpZ2dlcnMgZ2l2ZW4gZXZlbnQgb24gdGhlIGBYTUxIdHRwUmVxdWVzdGAgaW5zdGFuY2UuXG4gICAqL1xuICB0cmlnZ2VyKGV2ZW50TmFtZSwgdGFyZ2V0LCBvcHRpb25zKSB7XG4gICAgY29uc3QgY2FsbGJhY2sgPSB0YXJnZXRbYG9uJHtldmVudE5hbWV9YF07XG4gICAgY29uc3QgZXZlbnQgPSBjcmVhdGVFdmVudCh0YXJnZXQsIGV2ZW50TmFtZSwgb3B0aW9ucyk7XG4gICAgdGhpcy5sb2dnZXIuaW5mbygndHJpZ2dlciBcIiVzXCInLCBldmVudE5hbWUsIG9wdGlvbnMgfHwgXCJcIik7XG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKCdmb3VuZCBhIGRpcmVjdCBcIiVzXCIgY2FsbGJhY2ssIGNhbGxpbmcuLi4nLCBldmVudE5hbWUpO1xuICAgICAgY2FsbGJhY2suY2FsbCh0YXJnZXQsIGV2ZW50KTtcbiAgICB9XG4gICAgY29uc3QgZXZlbnRzID0gdGFyZ2V0IGluc3RhbmNlb2YgWE1MSHR0cFJlcXVlc3RVcGxvYWQgPyB0aGlzLnVwbG9hZEV2ZW50cyA6IHRoaXMuZXZlbnRzO1xuICAgIGZvciAoY29uc3QgW3JlZ2lzdGVyZWRFdmVudE5hbWUsIGxpc3RlbmVyc10gb2YgZXZlbnRzKSB7XG4gICAgICBpZiAocmVnaXN0ZXJlZEV2ZW50TmFtZSA9PT0gZXZlbnROYW1lKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgJ2ZvdW5kICVkIGxpc3RlbmVyKHMpIGZvciBcIiVzXCIgZXZlbnQsIGNhbGxpbmcuLi4nLFxuICAgICAgICAgIGxpc3RlbmVycy5sZW5ndGgsXG4gICAgICAgICAgZXZlbnROYW1lXG4gICAgICAgICk7XG4gICAgICAgIGxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIuY2FsbCh0YXJnZXQsIGV2ZW50KSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGlzIGBYTUxIdHRwUmVxdWVzdGAgaW5zdGFuY2UgaW50byBhIEZldGNoIEFQSSBgUmVxdWVzdGAgaW5zdGFuY2UuXG4gICAqL1xuICB0b0ZldGNoQXBpUmVxdWVzdChib2R5KSB7XG4gICAgdGhpcy5sb2dnZXIuaW5mbyhcImNvbnZlcnRpbmcgcmVxdWVzdCB0byBhIEZldGNoIEFQSSBSZXF1ZXN0Li4uXCIpO1xuICAgIGNvbnN0IHJlc29sdmVkQm9keSA9IGJvZHkgaW5zdGFuY2VvZiBEb2N1bWVudCA/IGJvZHkuZG9jdW1lbnRFbGVtZW50LmlubmVyVGV4dCA6IGJvZHk7XG4gICAgY29uc3QgZmV0Y2hSZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy51cmwuaHJlZiwge1xuICAgICAgbWV0aG9kOiB0aGlzLm1ldGhvZCxcbiAgICAgIGhlYWRlcnM6IHRoaXMucmVxdWVzdEhlYWRlcnMsXG4gICAgICAvKipcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly94aHIuc3BlYy53aGF0d2cub3JnLyNjcm9zcy1vcmlnaW4tY3JlZGVudGlhbHNcbiAgICAgICAqL1xuICAgICAgY3JlZGVudGlhbHM6IHRoaXMucmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPyBcImluY2x1ZGVcIiA6IFwic2FtZS1vcmlnaW5cIixcbiAgICAgIGJvZHk6IFtcIkdFVFwiLCBcIkhFQURcIl0uaW5jbHVkZXModGhpcy5tZXRob2QudG9VcHBlckNhc2UoKSkgPyBudWxsIDogcmVzb2x2ZWRCb2R5XG4gICAgfSk7XG4gICAgY29uc3QgcHJveHlIZWFkZXJzID0gY3JlYXRlUHJveHkoZmV0Y2hSZXF1ZXN0LmhlYWRlcnMsIHtcbiAgICAgIG1ldGhvZENhbGw6IChbbWV0aG9kTmFtZSwgYXJnc10sIGludm9rZSkgPT4ge1xuICAgICAgICBzd2l0Y2ggKG1ldGhvZE5hbWUpIHtcbiAgICAgICAgICBjYXNlIFwiYXBwZW5kXCI6XG4gICAgICAgICAgY2FzZSBcInNldFwiOiB7XG4gICAgICAgICAgICBjb25zdCBbaGVhZGVyTmFtZSwgaGVhZGVyVmFsdWVdID0gYXJncztcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlck5hbWUsIGhlYWRlclZhbHVlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwiZGVsZXRlXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IFtoZWFkZXJOYW1lXSA9IGFyZ3M7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgIGBYTUxIdHRwUmVxdWVzdDogQ2Fubm90IHJlbW92ZSBhIFwiJHtoZWFkZXJOYW1lfVwiIGhlYWRlciBmcm9tIHRoZSBGZXRjaCBBUEkgcmVwcmVzZW50YXRpb24gb2YgdGhlIFwiJHtmZXRjaFJlcXVlc3QubWV0aG9kfSAke2ZldGNoUmVxdWVzdC51cmx9XCIgcmVxdWVzdC4gWE1MSHR0cFJlcXVlc3QgaGVhZGVycyBjYW5ub3QgYmUgcmVtb3ZlZC5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnZva2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBkZWZpbmUoZmV0Y2hSZXF1ZXN0LCBcImhlYWRlcnNcIiwgcHJveHlIZWFkZXJzKTtcbiAgICBzZXRSYXdSZXF1ZXN0KGZldGNoUmVxdWVzdCwgdGhpcy5yZXF1ZXN0KTtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKFwiY29udmVydGVkIHJlcXVlc3QgdG8gYSBGZXRjaCBBUEkgUmVxdWVzdCFcIiwgZmV0Y2hSZXF1ZXN0KTtcbiAgICByZXR1cm4gZmV0Y2hSZXF1ZXN0O1xuICB9XG59O1xua0lzUmVxdWVzdEhhbmRsZWQsIGtGZXRjaFJlcXVlc3Q7XG5mdW5jdGlvbiB0b0Fic29sdXRlVXJsKHVybCkge1xuICBpZiAodHlwZW9mIGxvY2F0aW9uID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIG5ldyBVUkwodXJsKTtcbiAgfVxuICByZXR1cm4gbmV3IFVSTCh1cmwudG9TdHJpbmcoKSwgbG9jYXRpb24uaHJlZik7XG59XG5mdW5jdGlvbiBkZWZpbmUodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCB7XG4gICAgLy8gRW5zdXJlIHdyaXRhYmxlIHByb3BlcnRpZXMgdG8gYWxsb3cgcmVkZWZpbmluZyByZWFkb25seSBwcm9wZXJ0aWVzLlxuICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgdmFsdWVcbiAgfSk7XG59XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvWE1MSHR0cFJlcXVlc3QvWE1MSHR0cFJlcXVlc3RQcm94eS50c1xuZnVuY3Rpb24gY3JlYXRlWE1MSHR0cFJlcXVlc3RQcm94eSh7XG4gIGVtaXR0ZXIsXG4gIGxvZ2dlclxufSkge1xuICBjb25zdCBYTUxIdHRwUmVxdWVzdFByb3h5ID0gbmV3IFByb3h5KGdsb2JhbFRoaXMuWE1MSHR0cFJlcXVlc3QsIHtcbiAgICBjb25zdHJ1Y3QodGFyZ2V0LCBhcmdzLCBuZXdUYXJnZXQpIHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiY29uc3RydWN0ZWQgbmV3IFhNTEh0dHBSZXF1ZXN0XCIpO1xuICAgICAgY29uc3Qgb3JpZ2luYWxSZXF1ZXN0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgYXJncyxcbiAgICAgICAgbmV3VGFyZ2V0XG4gICAgICApO1xuICAgICAgY29uc3QgcHJvdG90eXBlRGVzY3JpcHRvcnMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhcbiAgICAgICAgdGFyZ2V0LnByb3RvdHlwZVxuICAgICAgKTtcbiAgICAgIGZvciAoY29uc3QgcHJvcGVydHlOYW1lIGluIHByb3RvdHlwZURlc2NyaXB0b3JzKSB7XG4gICAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkoXG4gICAgICAgICAgb3JpZ2luYWxSZXF1ZXN0LFxuICAgICAgICAgIHByb3BlcnR5TmFtZSxcbiAgICAgICAgICBwcm90b3R5cGVEZXNjcmlwdG9yc1twcm9wZXJ0eU5hbWVdXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCB4aHJSZXF1ZXN0Q29udHJvbGxlciA9IG5ldyBYTUxIdHRwUmVxdWVzdENvbnRyb2xsZXIoXG4gICAgICAgIG9yaWdpbmFsUmVxdWVzdCxcbiAgICAgICAgbG9nZ2VyXG4gICAgICApO1xuICAgICAgeGhyUmVxdWVzdENvbnRyb2xsZXIub25SZXF1ZXN0ID0gYXN5bmMgZnVuY3Rpb24oeyByZXF1ZXN0LCByZXF1ZXN0SWQgfSkge1xuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IFJlcXVlc3RDb250cm9sbGVyKHJlcXVlc3QpO1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiYXdhaXRpbmcgbW9ja2VkIHJlc3BvbnNlLi4uXCIpO1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICdlbWl0dGluZyB0aGUgXCJyZXF1ZXN0XCIgZXZlbnQgZm9yICVzIGxpc3RlbmVyKHMpLi4uJyxcbiAgICAgICAgICBlbWl0dGVyLmxpc3RlbmVyQ291bnQoXCJyZXF1ZXN0XCIpXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGlzUmVxdWVzdEhhbmRsZWQgPSBhd2FpdCBoYW5kbGVSZXF1ZXN0KHtcbiAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgIHJlcXVlc3RJZCxcbiAgICAgICAgICBjb250cm9sbGVyLFxuICAgICAgICAgIGVtaXR0ZXIsXG4gICAgICAgICAgb25SZXNwb25zZTogYXN5bmMgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJlc3BvbmRXaXRoKHJlc3BvbnNlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uUmVxdWVzdEVycm9yOiAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVycm9yV2l0aChuZXcgVHlwZUVycm9yKFwiTmV0d29yayBlcnJvclwiKSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJyZXF1ZXN0IGVycm9yZWQhXCIsIHsgZXJyb3IgfSk7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICB0aGlzLmVycm9yV2l0aChlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFpc1JlcXVlc3RIYW5kbGVkKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAgIFwibm8gbW9ja2VkIHJlc3BvbnNlIHJlY2VpdmVkLCBwZXJmb3JtaW5nIHJlcXVlc3QgYXMtaXMuLi5cIlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB4aHJSZXF1ZXN0Q29udHJvbGxlci5vblJlc3BvbnNlID0gYXN5bmMgZnVuY3Rpb24oe1xuICAgICAgICByZXNwb25zZSxcbiAgICAgICAgaXNNb2NrZWRSZXNwb25zZSxcbiAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgcmVxdWVzdElkXG4gICAgICB9KSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgJ2VtaXR0aW5nIHRoZSBcInJlc3BvbnNlXCIgZXZlbnQgZm9yICVzIGxpc3RlbmVyKHMpLi4uJyxcbiAgICAgICAgICBlbWl0dGVyLmxpc3RlbmVyQ291bnQoXCJyZXNwb25zZVwiKVxuICAgICAgICApO1xuICAgICAgICBlbWl0dGVyLmVtaXQoXCJyZXNwb25zZVwiLCB7XG4gICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgaXNNb2NrZWRSZXNwb25zZSxcbiAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgIHJlcXVlc3RJZFxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICByZXR1cm4geGhyUmVxdWVzdENvbnRyb2xsZXIucmVxdWVzdDtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gWE1MSHR0cFJlcXVlc3RQcm94eTtcbn1cblxuLy8gc3JjL2ludGVyY2VwdG9ycy9YTUxIdHRwUmVxdWVzdC9pbmRleC50c1xudmFyIF9YTUxIdHRwUmVxdWVzdEludGVyY2VwdG9yID0gY2xhc3MgZXh0ZW5kcyBJbnRlcmNlcHRvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKF9YTUxIdHRwUmVxdWVzdEludGVyY2VwdG9yLmludGVyY2VwdG9yU3ltYm9sKTtcbiAgfVxuICBjaGVja0Vudmlyb25tZW50KCkge1xuICAgIHJldHVybiBoYXNDb25maWd1cmFibGVHbG9iYWwoXCJYTUxIdHRwUmVxdWVzdFwiKTtcbiAgfVxuICBzZXR1cCgpIHtcbiAgICBjb25zdCBsb2dnZXIgPSB0aGlzLmxvZ2dlci5leHRlbmQoXCJzZXR1cFwiKTtcbiAgICBsb2dnZXIuaW5mbygncGF0Y2hpbmcgXCJYTUxIdHRwUmVxdWVzdFwiIG1vZHVsZS4uLicpO1xuICAgIGNvbnN0IFB1cmVYTUxIdHRwUmVxdWVzdCA9IGdsb2JhbFRoaXMuWE1MSHR0cFJlcXVlc3Q7XG4gICAgaW52YXJpYW50MihcbiAgICAgICFQdXJlWE1MSHR0cFJlcXVlc3RbSVNfUEFUQ0hFRF9NT0RVTEVdLFxuICAgICAgJ0ZhaWxlZCB0byBwYXRjaCB0aGUgXCJYTUxIdHRwUmVxdWVzdFwiIG1vZHVsZTogYWxyZWFkeSBwYXRjaGVkLidcbiAgICApO1xuICAgIGdsb2JhbFRoaXMuWE1MSHR0cFJlcXVlc3QgPSBjcmVhdGVYTUxIdHRwUmVxdWVzdFByb3h5KHtcbiAgICAgIGVtaXR0ZXI6IHRoaXMuZW1pdHRlcixcbiAgICAgIGxvZ2dlcjogdGhpcy5sb2dnZXJcbiAgICB9KTtcbiAgICBsb2dnZXIuaW5mbyhcbiAgICAgICduYXRpdmUgXCJYTUxIdHRwUmVxdWVzdFwiIG1vZHVsZSBwYXRjaGVkIScsXG4gICAgICBnbG9iYWxUaGlzLlhNTEh0dHBSZXF1ZXN0Lm5hbWVcbiAgICApO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWxUaGlzLlhNTEh0dHBSZXF1ZXN0LCBJU19QQVRDSEVEX01PRFVMRSwge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goKCkgPT4ge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbFRoaXMuWE1MSHR0cFJlcXVlc3QsIElTX1BBVENIRURfTU9EVUxFLCB7XG4gICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgIH0pO1xuICAgICAgZ2xvYmFsVGhpcy5YTUxIdHRwUmVxdWVzdCA9IFB1cmVYTUxIdHRwUmVxdWVzdDtcbiAgICAgIGxvZ2dlci5pbmZvKFxuICAgICAgICAnbmF0aXZlIFwiWE1MSHR0cFJlcXVlc3RcIiBtb2R1bGUgcmVzdG9yZWQhJyxcbiAgICAgICAgZ2xvYmFsVGhpcy5YTUxIdHRwUmVxdWVzdC5uYW1lXG4gICAgICApO1xuICAgIH0pO1xuICB9XG59O1xudmFyIFhNTEh0dHBSZXF1ZXN0SW50ZXJjZXB0b3IgPSBfWE1MSHR0cFJlcXVlc3RJbnRlcmNlcHRvcjtcblhNTEh0dHBSZXF1ZXN0SW50ZXJjZXB0b3IuaW50ZXJjZXB0b3JTeW1ib2wgPSBTeW1ib2woXCJ4aHJcIik7XG5cbmV4cG9ydCB7XG4gIFhNTEh0dHBSZXF1ZXN0SW50ZXJjZXB0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay00TkVZVFZXRC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-4NEYTVWD.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-6HYIRFX2.mjs":
/*!************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-6HYIRFX2.mjs ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decodeBuffer: () => (/* binding */ decodeBuffer),\n/* harmony export */   encodeBuffer: () => (/* binding */ encodeBuffer),\n/* harmony export */   toArrayBuffer: () => (/* binding */ toArrayBuffer)\n/* harmony export */ });\n// src/utils/bufferUtils.ts\nvar encoder = new TextEncoder();\nfunction encodeBuffer(text) {\n  return encoder.encode(text);\n}\nfunction decodeBuffer(buffer, encoding) {\n  const decoder = new TextDecoder(encoding);\n  return decoder.decode(buffer);\n}\nfunction toArrayBuffer(array) {\n  return array.buffer.slice(\n    array.byteOffset,\n    array.byteOffset + array.byteLength\n  );\n}\n\n\n//# sourceMappingURL=chunk-6HYIRFX2.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2NodW5rLTZIWUlSRlgyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBTUU7QUFDRiIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmsvZGF0YS1mZXRjaGluZy1tb25vcmVwby1wb2MvZGF0YS1mZXRjaGluZy1tb25vcmVwby1wb2Mvbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2NodW5rLTZIWUlSRlgyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvYnVmZmVyVXRpbHMudHNcbnZhciBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5mdW5jdGlvbiBlbmNvZGVCdWZmZXIodGV4dCkge1xuICByZXR1cm4gZW5jb2Rlci5lbmNvZGUodGV4dCk7XG59XG5mdW5jdGlvbiBkZWNvZGVCdWZmZXIoYnVmZmVyLCBlbmNvZGluZykge1xuICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKGVuY29kaW5nKTtcbiAgcmV0dXJuIGRlY29kZXIuZGVjb2RlKGJ1ZmZlcik7XG59XG5mdW5jdGlvbiB0b0FycmF5QnVmZmVyKGFycmF5KSB7XG4gIHJldHVybiBhcnJheS5idWZmZXIuc2xpY2UoXG4gICAgYXJyYXkuYnl0ZU9mZnNldCxcbiAgICBhcnJheS5ieXRlT2Zmc2V0ICsgYXJyYXkuYnl0ZUxlbmd0aFxuICApO1xufVxuXG5leHBvcnQge1xuICBlbmNvZGVCdWZmZXIsXG4gIGRlY29kZUJ1ZmZlcixcbiAgdG9BcnJheUJ1ZmZlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLTZIWUlSRlgyLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-6HYIRFX2.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-6YM4PLBI.mjs":
/*!************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-6YM4PLBI.mjs ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IS_PATCHED_MODULE: () => (/* binding */ IS_PATCHED_MODULE)\n/* harmony export */ });\n// src/glossary.ts\nvar IS_PATCHED_MODULE = Symbol(\"isPatchedModule\");\n\n\n//# sourceMappingURL=chunk-6YM4PLBI.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2NodW5rLTZZTTRQTEJJLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTs7QUFJRTtBQUNGIiwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29yay9kYXRhLWZldGNoaW5nLW1vbm9yZXBvLXBvYy9kYXRhLWZldGNoaW5nLW1vbm9yZXBvLXBvYy9ub2RlX21vZHVsZXMvLnBucG0vQG1zd2pzK2ludGVyY2VwdG9yc0AwLjM5LjYvbm9kZV9tb2R1bGVzL0Btc3dqcy9pbnRlcmNlcHRvcnMvbGliL25vZGUvY2h1bmstNllNNFBMQkkubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9nbG9zc2FyeS50c1xudmFyIElTX1BBVENIRURfTU9EVUxFID0gU3ltYm9sKFwiaXNQYXRjaGVkTW9kdWxlXCIpO1xuXG5leHBvcnQge1xuICBJU19QQVRDSEVEX01PRFVMRVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLTZZTTRQTEJJLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-6YM4PLBI.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-A7Q4RTDJ.mjs":
/*!************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-A7Q4RTDJ.mjs ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RequestController: () => (/* binding */ RequestController),\n/* harmony export */   createServerErrorResponse: () => (/* binding */ createServerErrorResponse),\n/* harmony export */   emitAsync: () => (/* binding */ emitAsync),\n/* harmony export */   handleRequest: () => (/* binding */ handleRequest),\n/* harmony export */   isObject: () => (/* binding */ isObject),\n/* harmony export */   isPropertyAccessible: () => (/* binding */ isPropertyAccessible)\n/* harmony export */ });\n/* harmony import */ var outvariant__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! outvariant */ \"(ssr)/../../node_modules/.pnpm/outvariant@1.4.3/node_modules/outvariant/lib/index.mjs\");\n/* harmony import */ var _open_draft_deferred_promise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @open-draft/deferred-promise */ \"(ssr)/../../node_modules/.pnpm/@open-draft+deferred-promise@2.2.0/node_modules/@open-draft/deferred-promise/build/index.mjs\");\n/* harmony import */ var _open_draft_until__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @open-draft/until */ \"(ssr)/../../node_modules/.pnpm/@open-draft+until@2.1.0/node_modules/@open-draft/until/lib/index.mjs\");\n// src/RequestController.ts\n\n\n\n// src/InterceptorError.ts\nvar InterceptorError = class extends Error {\n  constructor(message) {\n    super(message);\n    this.name = \"InterceptorError\";\n    Object.setPrototypeOf(this, InterceptorError.prototype);\n  }\n};\n\n// src/RequestController.ts\nvar kRequestHandled = Symbol(\"kRequestHandled\");\nvar kResponsePromise = Symbol(\"kResponsePromise\");\nvar RequestController = class {\n  constructor(request) {\n    this.request = request;\n    this[kRequestHandled] = false;\n    this[kResponsePromise] = new _open_draft_deferred_promise__WEBPACK_IMPORTED_MODULE_1__.DeferredPromise();\n  }\n  /**\n   * Respond to this request with the given `Response` instance.\n   * @example\n   * controller.respondWith(new Response())\n   * controller.respondWith(Response.json({ id }))\n   * controller.respondWith(Response.error())\n   */\n  respondWith(response) {\n    outvariant__WEBPACK_IMPORTED_MODULE_0__.invariant.as(\n      InterceptorError,\n      !this[kRequestHandled],\n      'Failed to respond to the \"%s %s\" request: the \"request\" event has already been handled.',\n      this.request.method,\n      this.request.url\n    );\n    this[kRequestHandled] = true;\n    this[kResponsePromise].resolve(response);\n  }\n  /**\n   * Error this request with the given reason.\n   *\n   * @example\n   * controller.errorWith()\n   * controller.errorWith(new Error('Oops!'))\n   * controller.errorWith({ message: 'Oops!'})\n   */\n  errorWith(reason) {\n    outvariant__WEBPACK_IMPORTED_MODULE_0__.invariant.as(\n      InterceptorError,\n      !this[kRequestHandled],\n      'Failed to error the \"%s %s\" request: the \"request\" event has already been handled.',\n      this.request.method,\n      this.request.url\n    );\n    this[kRequestHandled] = true;\n    this[kResponsePromise].resolve(reason);\n  }\n};\nkResponsePromise, kRequestHandled;\n\n// src/utils/emitAsync.ts\nasync function emitAsync(emitter, eventName, ...data) {\n  const listeners = emitter.listeners(eventName);\n  if (listeners.length === 0) {\n    return;\n  }\n  for (const listener of listeners) {\n    await listener.apply(emitter, data);\n  }\n}\n\n// src/utils/handleRequest.ts\n\n\n\n// src/utils/isObject.ts\nfunction isObject(value, loose = false) {\n  return loose ? Object.prototype.toString.call(value).startsWith(\"[object \") : Object.prototype.toString.call(value) === \"[object Object]\";\n}\n\n// src/utils/isPropertyAccessible.ts\nfunction isPropertyAccessible(obj, key) {\n  try {\n    obj[key];\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n// src/utils/responseUtils.ts\nfunction createServerErrorResponse(body) {\n  return new Response(\n    JSON.stringify(\n      body instanceof Error ? {\n        name: body.name,\n        message: body.message,\n        stack: body.stack\n      } : body\n    ),\n    {\n      status: 500,\n      statusText: \"Unhandled Exception\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }\n  );\n}\nfunction isResponseError(response) {\n  return response != null && response instanceof Response && isPropertyAccessible(response, \"type\") && response.type === \"error\";\n}\nfunction isResponseLike(value) {\n  return isObject(value, true) && isPropertyAccessible(value, \"status\") && isPropertyAccessible(value, \"statusText\") && isPropertyAccessible(value, \"bodyUsed\");\n}\n\n// src/utils/isNodeLikeError.ts\nfunction isNodeLikeError(error) {\n  if (error == null) {\n    return false;\n  }\n  if (!(error instanceof Error)) {\n    return false;\n  }\n  return \"code\" in error && \"errno\" in error;\n}\n\n// src/utils/handleRequest.ts\nasync function handleRequest(options) {\n  const handleResponse = async (response) => {\n    if (response instanceof Error) {\n      options.onError(response);\n      return true;\n    }\n    if (isResponseError(response)) {\n      options.onRequestError(response);\n      return true;\n    }\n    if (isResponseLike(response)) {\n      await options.onResponse(response);\n      return true;\n    }\n    if (isObject(response)) {\n      options.onError(response);\n      return true;\n    }\n    return false;\n  };\n  const handleResponseError = async (error) => {\n    if (error instanceof InterceptorError) {\n      throw result.error;\n    }\n    if (isNodeLikeError(error)) {\n      options.onError(error);\n      return true;\n    }\n    if (error instanceof Response) {\n      return await handleResponse(error);\n    }\n    return false;\n  };\n  options.emitter.once(\"request\", ({ requestId: pendingRequestId }) => {\n    if (pendingRequestId !== options.requestId) {\n      return;\n    }\n    if (options.controller[kResponsePromise].state === \"pending\") {\n      options.controller[kResponsePromise].resolve(void 0);\n    }\n  });\n  const requestAbortPromise = new _open_draft_deferred_promise__WEBPACK_IMPORTED_MODULE_1__.DeferredPromise();\n  if (options.request.signal) {\n    if (options.request.signal.aborted) {\n      requestAbortPromise.reject(options.request.signal.reason);\n    } else {\n      options.request.signal.addEventListener(\n        \"abort\",\n        () => {\n          requestAbortPromise.reject(options.request.signal.reason);\n        },\n        { once: true }\n      );\n    }\n  }\n  const result = await (0,_open_draft_until__WEBPACK_IMPORTED_MODULE_2__.until)(async () => {\n    const requestListenersPromise = emitAsync(options.emitter, \"request\", {\n      requestId: options.requestId,\n      request: options.request,\n      controller: options.controller\n    });\n    await Promise.race([\n      // Short-circuit the request handling promise if the request gets aborted.\n      requestAbortPromise,\n      requestListenersPromise,\n      options.controller[kResponsePromise]\n    ]);\n    return await options.controller[kResponsePromise];\n  });\n  if (requestAbortPromise.state === \"rejected\") {\n    options.onError(requestAbortPromise.rejectionReason);\n    return true;\n  }\n  if (result.error) {\n    if (await handleResponseError(result.error)) {\n      return true;\n    }\n    if (options.emitter.listenerCount(\"unhandledException\") > 0) {\n      const unhandledExceptionController = new RequestController(\n        options.request\n      );\n      await emitAsync(options.emitter, \"unhandledException\", {\n        error: result.error,\n        request: options.request,\n        requestId: options.requestId,\n        controller: unhandledExceptionController\n      }).then(() => {\n        if (unhandledExceptionController[kResponsePromise].state === \"pending\") {\n          unhandledExceptionController[kResponsePromise].resolve(void 0);\n        }\n      });\n      const nextResult = await (0,_open_draft_until__WEBPACK_IMPORTED_MODULE_2__.until)(\n        () => unhandledExceptionController[kResponsePromise]\n      );\n      if (nextResult.error) {\n        return handleResponseError(nextResult.error);\n      }\n      if (nextResult.data) {\n        return handleResponse(nextResult.data);\n      }\n    }\n    options.onResponse(createServerErrorResponse(result.error));\n    return true;\n  }\n  if (result.data) {\n    return handleResponse(result.data);\n  }\n  return false;\n}\n\n\n//# sourceMappingURL=chunk-A7Q4RTDJ.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2NodW5rLUE3UTRSVERKLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTtBQUN1QztBQUN3Qjs7QUFFL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx5RUFBZTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLElBQUk7QUFDaEQ7QUFDQTtBQUNBO0FBQ0EsSUFBSSxpREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixpQkFBaUI7QUFDN0M7QUFDQTtBQUNBLElBQUksaURBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ21GO0FBQ3pDOztBQUUxQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDZCQUE2QjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsa0NBQWtDLHlFQUFnQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix3REFBSztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCwrQkFBK0Isd0RBQUs7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFTRTtBQUNGIiwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29yay9kYXRhLWZldGNoaW5nLW1vbm9yZXBvLXBvYy9kYXRhLWZldGNoaW5nLW1vbm9yZXBvLXBvYy9ub2RlX21vZHVsZXMvLnBucG0vQG1zd2pzK2ludGVyY2VwdG9yc0AwLjM5LjYvbm9kZV9tb2R1bGVzL0Btc3dqcy9pbnRlcmNlcHRvcnMvbGliL25vZGUvY2h1bmstQTdRNFJUREoubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9SZXF1ZXN0Q29udHJvbGxlci50c1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIm91dHZhcmlhbnRcIjtcbmltcG9ydCB7IERlZmVycmVkUHJvbWlzZSB9IGZyb20gXCJAb3Blbi1kcmFmdC9kZWZlcnJlZC1wcm9taXNlXCI7XG5cbi8vIHNyYy9JbnRlcmNlcHRvckVycm9yLnRzXG52YXIgSW50ZXJjZXB0b3JFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gXCJJbnRlcmNlcHRvckVycm9yXCI7XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEludGVyY2VwdG9yRXJyb3IucHJvdG90eXBlKTtcbiAgfVxufTtcblxuLy8gc3JjL1JlcXVlc3RDb250cm9sbGVyLnRzXG52YXIga1JlcXVlc3RIYW5kbGVkID0gU3ltYm9sKFwia1JlcXVlc3RIYW5kbGVkXCIpO1xudmFyIGtSZXNwb25zZVByb21pc2UgPSBTeW1ib2woXCJrUmVzcG9uc2VQcm9taXNlXCIpO1xudmFyIFJlcXVlc3RDb250cm9sbGVyID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZXF1ZXN0KSB7XG4gICAgdGhpcy5yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgICB0aGlzW2tSZXF1ZXN0SGFuZGxlZF0gPSBmYWxzZTtcbiAgICB0aGlzW2tSZXNwb25zZVByb21pc2VdID0gbmV3IERlZmVycmVkUHJvbWlzZSgpO1xuICB9XG4gIC8qKlxuICAgKiBSZXNwb25kIHRvIHRoaXMgcmVxdWVzdCB3aXRoIHRoZSBnaXZlbiBgUmVzcG9uc2VgIGluc3RhbmNlLlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb250cm9sbGVyLnJlc3BvbmRXaXRoKG5ldyBSZXNwb25zZSgpKVxuICAgKiBjb250cm9sbGVyLnJlc3BvbmRXaXRoKFJlc3BvbnNlLmpzb24oeyBpZCB9KSlcbiAgICogY29udHJvbGxlci5yZXNwb25kV2l0aChSZXNwb25zZS5lcnJvcigpKVxuICAgKi9cbiAgcmVzcG9uZFdpdGgocmVzcG9uc2UpIHtcbiAgICBpbnZhcmlhbnQuYXMoXG4gICAgICBJbnRlcmNlcHRvckVycm9yLFxuICAgICAgIXRoaXNba1JlcXVlc3RIYW5kbGVkXSxcbiAgICAgICdGYWlsZWQgdG8gcmVzcG9uZCB0byB0aGUgXCIlcyAlc1wiIHJlcXVlc3Q6IHRoZSBcInJlcXVlc3RcIiBldmVudCBoYXMgYWxyZWFkeSBiZWVuIGhhbmRsZWQuJyxcbiAgICAgIHRoaXMucmVxdWVzdC5tZXRob2QsXG4gICAgICB0aGlzLnJlcXVlc3QudXJsXG4gICAgKTtcbiAgICB0aGlzW2tSZXF1ZXN0SGFuZGxlZF0gPSB0cnVlO1xuICAgIHRoaXNba1Jlc3BvbnNlUHJvbWlzZV0ucmVzb2x2ZShyZXNwb25zZSk7XG4gIH1cbiAgLyoqXG4gICAqIEVycm9yIHRoaXMgcmVxdWVzdCB3aXRoIHRoZSBnaXZlbiByZWFzb24uXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnRyb2xsZXIuZXJyb3JXaXRoKClcbiAgICogY29udHJvbGxlci5lcnJvcldpdGgobmV3IEVycm9yKCdPb3BzIScpKVxuICAgKiBjb250cm9sbGVyLmVycm9yV2l0aCh7IG1lc3NhZ2U6ICdPb3BzISd9KVxuICAgKi9cbiAgZXJyb3JXaXRoKHJlYXNvbikge1xuICAgIGludmFyaWFudC5hcyhcbiAgICAgIEludGVyY2VwdG9yRXJyb3IsXG4gICAgICAhdGhpc1trUmVxdWVzdEhhbmRsZWRdLFxuICAgICAgJ0ZhaWxlZCB0byBlcnJvciB0aGUgXCIlcyAlc1wiIHJlcXVlc3Q6IHRoZSBcInJlcXVlc3RcIiBldmVudCBoYXMgYWxyZWFkeSBiZWVuIGhhbmRsZWQuJyxcbiAgICAgIHRoaXMucmVxdWVzdC5tZXRob2QsXG4gICAgICB0aGlzLnJlcXVlc3QudXJsXG4gICAgKTtcbiAgICB0aGlzW2tSZXF1ZXN0SGFuZGxlZF0gPSB0cnVlO1xuICAgIHRoaXNba1Jlc3BvbnNlUHJvbWlzZV0ucmVzb2x2ZShyZWFzb24pO1xuICB9XG59O1xua1Jlc3BvbnNlUHJvbWlzZSwga1JlcXVlc3RIYW5kbGVkO1xuXG4vLyBzcmMvdXRpbHMvZW1pdEFzeW5jLnRzXG5hc3luYyBmdW5jdGlvbiBlbWl0QXN5bmMoZW1pdHRlciwgZXZlbnROYW1lLCAuLi5kYXRhKSB7XG4gIGNvbnN0IGxpc3RlbmVycyA9IGVtaXR0ZXIubGlzdGVuZXJzKGV2ZW50TmFtZSk7XG4gIGlmIChsaXN0ZW5lcnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgbGlzdGVuZXJzKSB7XG4gICAgYXdhaXQgbGlzdGVuZXIuYXBwbHkoZW1pdHRlciwgZGF0YSk7XG4gIH1cbn1cblxuLy8gc3JjL3V0aWxzL2hhbmRsZVJlcXVlc3QudHNcbmltcG9ydCB7IERlZmVycmVkUHJvbWlzZSBhcyBEZWZlcnJlZFByb21pc2UyIH0gZnJvbSBcIkBvcGVuLWRyYWZ0L2RlZmVycmVkLXByb21pc2VcIjtcbmltcG9ydCB7IHVudGlsIH0gZnJvbSBcIkBvcGVuLWRyYWZ0L3VudGlsXCI7XG5cbi8vIHNyYy91dGlscy9pc09iamVjdC50c1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUsIGxvb3NlID0gZmFsc2UpIHtcbiAgcmV0dXJuIGxvb3NlID8gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKS5zdGFydHNXaXRoKFwiW29iamVjdCBcIikgOiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpID09PSBcIltvYmplY3QgT2JqZWN0XVwiO1xufVxuXG4vLyBzcmMvdXRpbHMvaXNQcm9wZXJ0eUFjY2Vzc2libGUudHNcbmZ1bmN0aW9uIGlzUHJvcGVydHlBY2Nlc3NpYmxlKG9iaiwga2V5KSB7XG4gIHRyeSB7XG4gICAgb2JqW2tleV07XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLy8gc3JjL3V0aWxzL3Jlc3BvbnNlVXRpbHMudHNcbmZ1bmN0aW9uIGNyZWF0ZVNlcnZlckVycm9yUmVzcG9uc2UoYm9keSkge1xuICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgIEpTT04uc3RyaW5naWZ5KFxuICAgICAgYm9keSBpbnN0YW5jZW9mIEVycm9yID8ge1xuICAgICAgICBuYW1lOiBib2R5Lm5hbWUsXG4gICAgICAgIG1lc3NhZ2U6IGJvZHkubWVzc2FnZSxcbiAgICAgICAgc3RhY2s6IGJvZHkuc3RhY2tcbiAgICAgIH0gOiBib2R5XG4gICAgKSxcbiAgICB7XG4gICAgICBzdGF0dXM6IDUwMCxcbiAgICAgIHN0YXR1c1RleHQ6IFwiVW5oYW5kbGVkIEV4Y2VwdGlvblwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgfVxuICAgIH1cbiAgKTtcbn1cbmZ1bmN0aW9uIGlzUmVzcG9uc2VFcnJvcihyZXNwb25zZSkge1xuICByZXR1cm4gcmVzcG9uc2UgIT0gbnVsbCAmJiByZXNwb25zZSBpbnN0YW5jZW9mIFJlc3BvbnNlICYmIGlzUHJvcGVydHlBY2Nlc3NpYmxlKHJlc3BvbnNlLCBcInR5cGVcIikgJiYgcmVzcG9uc2UudHlwZSA9PT0gXCJlcnJvclwiO1xufVxuZnVuY3Rpb24gaXNSZXNwb25zZUxpa2UodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KHZhbHVlLCB0cnVlKSAmJiBpc1Byb3BlcnR5QWNjZXNzaWJsZSh2YWx1ZSwgXCJzdGF0dXNcIikgJiYgaXNQcm9wZXJ0eUFjY2Vzc2libGUodmFsdWUsIFwic3RhdHVzVGV4dFwiKSAmJiBpc1Byb3BlcnR5QWNjZXNzaWJsZSh2YWx1ZSwgXCJib2R5VXNlZFwiKTtcbn1cblxuLy8gc3JjL3V0aWxzL2lzTm9kZUxpa2VFcnJvci50c1xuZnVuY3Rpb24gaXNOb2RlTGlrZUVycm9yKGVycm9yKSB7XG4gIGlmIChlcnJvciA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICghKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBcImNvZGVcIiBpbiBlcnJvciAmJiBcImVycm5vXCIgaW4gZXJyb3I7XG59XG5cbi8vIHNyYy91dGlscy9oYW5kbGVSZXF1ZXN0LnRzXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVSZXF1ZXN0KG9wdGlvbnMpIHtcbiAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAocmVzcG9uc2UpID0+IHtcbiAgICBpZiAocmVzcG9uc2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgb3B0aW9ucy5vbkVycm9yKHJlc3BvbnNlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoaXNSZXNwb25zZUVycm9yKHJlc3BvbnNlKSkge1xuICAgICAgb3B0aW9ucy5vblJlcXVlc3RFcnJvcihyZXNwb25zZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGlzUmVzcG9uc2VMaWtlKHJlc3BvbnNlKSkge1xuICAgICAgYXdhaXQgb3B0aW9ucy5vblJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoaXNPYmplY3QocmVzcG9uc2UpKSB7XG4gICAgICBvcHRpb25zLm9uRXJyb3IocmVzcG9uc2UpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlUmVzcG9uc2VFcnJvciA9IGFzeW5jIChlcnJvcikgPT4ge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEludGVyY2VwdG9yRXJyb3IpIHtcbiAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgICB9XG4gICAgaWYgKGlzTm9kZUxpa2VFcnJvcihlcnJvcikpIHtcbiAgICAgIG9wdGlvbnMub25FcnJvcihlcnJvcik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiBhd2FpdCBoYW5kbGVSZXNwb25zZShlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbiAgb3B0aW9ucy5lbWl0dGVyLm9uY2UoXCJyZXF1ZXN0XCIsICh7IHJlcXVlc3RJZDogcGVuZGluZ1JlcXVlc3RJZCB9KSA9PiB7XG4gICAgaWYgKHBlbmRpbmdSZXF1ZXN0SWQgIT09IG9wdGlvbnMucmVxdWVzdElkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmNvbnRyb2xsZXJba1Jlc3BvbnNlUHJvbWlzZV0uc3RhdGUgPT09IFwicGVuZGluZ1wiKSB7XG4gICAgICBvcHRpb25zLmNvbnRyb2xsZXJba1Jlc3BvbnNlUHJvbWlzZV0ucmVzb2x2ZSh2b2lkIDApO1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IHJlcXVlc3RBYm9ydFByb21pc2UgPSBuZXcgRGVmZXJyZWRQcm9taXNlMigpO1xuICBpZiAob3B0aW9ucy5yZXF1ZXN0LnNpZ25hbCkge1xuICAgIGlmIChvcHRpb25zLnJlcXVlc3Quc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgIHJlcXVlc3RBYm9ydFByb21pc2UucmVqZWN0KG9wdGlvbnMucmVxdWVzdC5zaWduYWwucmVhc29uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3B0aW9ucy5yZXF1ZXN0LnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICBcImFib3J0XCIsXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICByZXF1ZXN0QWJvcnRQcm9taXNlLnJlamVjdChvcHRpb25zLnJlcXVlc3Quc2lnbmFsLnJlYXNvbik7XG4gICAgICAgIH0sXG4gICAgICAgIHsgb25jZTogdHJ1ZSB9XG4gICAgICApO1xuICAgIH1cbiAgfVxuICBjb25zdCByZXN1bHQgPSBhd2FpdCB1bnRpbChhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmVxdWVzdExpc3RlbmVyc1Byb21pc2UgPSBlbWl0QXN5bmMob3B0aW9ucy5lbWl0dGVyLCBcInJlcXVlc3RcIiwge1xuICAgICAgcmVxdWVzdElkOiBvcHRpb25zLnJlcXVlc3RJZCxcbiAgICAgIHJlcXVlc3Q6IG9wdGlvbnMucmVxdWVzdCxcbiAgICAgIGNvbnRyb2xsZXI6IG9wdGlvbnMuY29udHJvbGxlclxuICAgIH0pO1xuICAgIGF3YWl0IFByb21pc2UucmFjZShbXG4gICAgICAvLyBTaG9ydC1jaXJjdWl0IHRoZSByZXF1ZXN0IGhhbmRsaW5nIHByb21pc2UgaWYgdGhlIHJlcXVlc3QgZ2V0cyBhYm9ydGVkLlxuICAgICAgcmVxdWVzdEFib3J0UHJvbWlzZSxcbiAgICAgIHJlcXVlc3RMaXN0ZW5lcnNQcm9taXNlLFxuICAgICAgb3B0aW9ucy5jb250cm9sbGVyW2tSZXNwb25zZVByb21pc2VdXG4gICAgXSk7XG4gICAgcmV0dXJuIGF3YWl0IG9wdGlvbnMuY29udHJvbGxlcltrUmVzcG9uc2VQcm9taXNlXTtcbiAgfSk7XG4gIGlmIChyZXF1ZXN0QWJvcnRQcm9taXNlLnN0YXRlID09PSBcInJlamVjdGVkXCIpIHtcbiAgICBvcHRpb25zLm9uRXJyb3IocmVxdWVzdEFib3J0UHJvbWlzZS5yZWplY3Rpb25SZWFzb24pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChyZXN1bHQuZXJyb3IpIHtcbiAgICBpZiAoYXdhaXQgaGFuZGxlUmVzcG9uc2VFcnJvcihyZXN1bHQuZXJyb3IpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuZW1pdHRlci5saXN0ZW5lckNvdW50KFwidW5oYW5kbGVkRXhjZXB0aW9uXCIpID4gMCkge1xuICAgICAgY29uc3QgdW5oYW5kbGVkRXhjZXB0aW9uQ29udHJvbGxlciA9IG5ldyBSZXF1ZXN0Q29udHJvbGxlcihcbiAgICAgICAgb3B0aW9ucy5yZXF1ZXN0XG4gICAgICApO1xuICAgICAgYXdhaXQgZW1pdEFzeW5jKG9wdGlvbnMuZW1pdHRlciwgXCJ1bmhhbmRsZWRFeGNlcHRpb25cIiwge1xuICAgICAgICBlcnJvcjogcmVzdWx0LmVycm9yLFxuICAgICAgICByZXF1ZXN0OiBvcHRpb25zLnJlcXVlc3QsXG4gICAgICAgIHJlcXVlc3RJZDogb3B0aW9ucy5yZXF1ZXN0SWQsXG4gICAgICAgIGNvbnRyb2xsZXI6IHVuaGFuZGxlZEV4Y2VwdGlvbkNvbnRyb2xsZXJcbiAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICBpZiAodW5oYW5kbGVkRXhjZXB0aW9uQ29udHJvbGxlcltrUmVzcG9uc2VQcm9taXNlXS5zdGF0ZSA9PT0gXCJwZW5kaW5nXCIpIHtcbiAgICAgICAgICB1bmhhbmRsZWRFeGNlcHRpb25Db250cm9sbGVyW2tSZXNwb25zZVByb21pc2VdLnJlc29sdmUodm9pZCAwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjb25zdCBuZXh0UmVzdWx0ID0gYXdhaXQgdW50aWwoXG4gICAgICAgICgpID0+IHVuaGFuZGxlZEV4Y2VwdGlvbkNvbnRyb2xsZXJba1Jlc3BvbnNlUHJvbWlzZV1cbiAgICAgICk7XG4gICAgICBpZiAobmV4dFJlc3VsdC5lcnJvcikge1xuICAgICAgICByZXR1cm4gaGFuZGxlUmVzcG9uc2VFcnJvcihuZXh0UmVzdWx0LmVycm9yKTtcbiAgICAgIH1cbiAgICAgIGlmIChuZXh0UmVzdWx0LmRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3BvbnNlKG5leHRSZXN1bHQuZGF0YSk7XG4gICAgICB9XG4gICAgfVxuICAgIG9wdGlvbnMub25SZXNwb25zZShjcmVhdGVTZXJ2ZXJFcnJvclJlc3BvbnNlKHJlc3VsdC5lcnJvcikpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChyZXN1bHQuZGF0YSkge1xuICAgIHJldHVybiBoYW5kbGVSZXNwb25zZShyZXN1bHQuZGF0YSk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQge1xuICBpc1Byb3BlcnR5QWNjZXNzaWJsZSxcbiAgaXNPYmplY3QsXG4gIGNyZWF0ZVNlcnZlckVycm9yUmVzcG9uc2UsXG4gIFJlcXVlc3RDb250cm9sbGVyLFxuICBlbWl0QXN5bmMsXG4gIGhhbmRsZVJlcXVlc3Rcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1BN1E0UlRESi5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-A7Q4RTDJ.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-EKNRB5ZS.mjs":
/*!************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-EKNRB5ZS.mjs ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClientRequestInterceptor: () => (/* binding */ ClientRequestInterceptor)\n/* harmony export */ });\n/* harmony import */ var _chunk_TJDMZZXE_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-TJDMZZXE.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-TJDMZZXE.mjs\");\n/* harmony import */ var _chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-A7Q4RTDJ.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-A7Q4RTDJ.mjs\");\n/* harmony import */ var _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-IHJSPMYM.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-IHJSPMYM.mjs\");\n/* harmony import */ var _chunk_3GJB4JDF_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-3GJB4JDF.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-3GJB4JDF.mjs\");\n/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! http */ \"http\");\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! https */ \"https\");\n/* harmony import */ var net__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! net */ \"net\");\n/* harmony import */ var _http_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! _http_common */ \"_http_common\");\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! stream */ \"stream\");\n/* harmony import */ var outvariant__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! outvariant */ \"(ssr)/../../node_modules/.pnpm/outvariant@1.4.3/node_modules/outvariant/lib/index.mjs\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! url */ \"url\");\n/* harmony import */ var _open_draft_logger__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @open-draft/logger */ \"(ssr)/../../node_modules/.pnpm/@open-draft+logger@0.3.0/node_modules/@open-draft/logger/lib/index.mjs\");\n\n\n\n\n\n// src/interceptors/ClientRequest/index.ts\n\n\n\n// src/interceptors/ClientRequest/MockHttpSocket.ts\n\n\n\n\n\n\n// src/interceptors/Socket/MockSocket.ts\n\n\n// src/interceptors/Socket/utils/normalizeSocketWriteArgs.ts\nfunction normalizeSocketWriteArgs(args) {\n  const normalized = [args[0], void 0, void 0];\n  if (typeof args[1] === \"string\") {\n    normalized[1] = args[1];\n  } else if (typeof args[1] === \"function\") {\n    normalized[2] = args[1];\n  }\n  if (typeof args[2] === \"function\") {\n    normalized[2] = args[2];\n  }\n  return normalized;\n}\n\n// src/interceptors/Socket/MockSocket.ts\nvar MockSocket = class extends net__WEBPACK_IMPORTED_MODULE_6__.Socket {\n  constructor(options) {\n    super();\n    this.options = options;\n    this.connecting = false;\n    this.connect();\n    this._final = (callback) => {\n      callback(null);\n    };\n  }\n  connect() {\n    this.connecting = true;\n    return this;\n  }\n  write(...args) {\n    const [chunk, encoding, callback] = normalizeSocketWriteArgs(\n      args\n    );\n    this.options.write(chunk, encoding, callback);\n    return true;\n  }\n  end(...args) {\n    const [chunk, encoding, callback] = normalizeSocketWriteArgs(\n      args\n    );\n    this.options.write(chunk, encoding, callback);\n    return super.end.apply(this, args);\n  }\n  push(chunk, encoding) {\n    this.options.read(chunk, encoding);\n    return super.push(chunk, encoding);\n  }\n};\n\n// src/interceptors/Socket/utils/baseUrlFromConnectionOptions.ts\nfunction baseUrlFromConnectionOptions(options) {\n  if (\"href\" in options) {\n    return new URL(options.href);\n  }\n  const protocol = options.port === 443 ? \"https:\" : \"http:\";\n  const host = options.host;\n  const url = new URL(`${protocol}//${host}`);\n  if (options.port) {\n    url.port = options.port.toString();\n  }\n  if (options.path) {\n    url.pathname = options.path;\n  }\n  if (options.auth) {\n    const [username, password] = options.auth.split(\":\");\n    url.username = username;\n    url.password = password;\n  }\n  return url;\n}\n\n// src/interceptors/ClientRequest/utils/recordRawHeaders.ts\nvar kRawHeaders = Symbol(\"kRawHeaders\");\nvar kRestorePatches = Symbol(\"kRestorePatches\");\nfunction recordRawHeader(headers, args, behavior) {\n  ensureRawHeadersSymbol(headers, []);\n  const rawHeaders = Reflect.get(headers, kRawHeaders);\n  if (behavior === \"set\") {\n    for (let index = rawHeaders.length - 1; index >= 0; index--) {\n      if (rawHeaders[index][0].toLowerCase() === args[0].toLowerCase()) {\n        rawHeaders.splice(index, 1);\n      }\n    }\n  }\n  rawHeaders.push(args);\n}\nfunction ensureRawHeadersSymbol(headers, rawHeaders) {\n  if (Reflect.has(headers, kRawHeaders)) {\n    return;\n  }\n  defineRawHeadersSymbol(headers, rawHeaders);\n}\nfunction defineRawHeadersSymbol(headers, rawHeaders) {\n  Object.defineProperty(headers, kRawHeaders, {\n    value: rawHeaders,\n    enumerable: false,\n    // Mark the symbol as configurable so its value can be overridden.\n    // Overrides happen when merging raw headers from multiple sources.\n    // E.g. new Request(new Request(url, { headers }), { headers })\n    configurable: true\n  });\n}\nfunction recordRawFetchHeaders() {\n  if (Reflect.get(Headers, kRestorePatches)) {\n    return Reflect.get(Headers, kRestorePatches);\n  }\n  const {\n    Headers: OriginalHeaders,\n    Request: OriginalRequest,\n    Response: OriginalResponse\n  } = globalThis;\n  const { set, append, delete: headersDeleteMethod } = Headers.prototype;\n  Object.defineProperty(Headers, kRestorePatches, {\n    value: () => {\n      Headers.prototype.set = set;\n      Headers.prototype.append = append;\n      Headers.prototype.delete = headersDeleteMethod;\n      globalThis.Headers = OriginalHeaders;\n      globalThis.Request = OriginalRequest;\n      globalThis.Response = OriginalResponse;\n      Reflect.deleteProperty(Headers, kRestorePatches);\n    },\n    enumerable: false,\n    /**\n     * @note Mark this property as configurable\n     * so we can delete it using `Reflect.delete` during cleanup.\n     */\n    configurable: true\n  });\n  Object.defineProperty(globalThis, \"Headers\", {\n    enumerable: true,\n    writable: true,\n    value: new Proxy(Headers, {\n      construct(target, args, newTarget) {\n        const headersInit = args[0] || [];\n        if (headersInit instanceof Headers && Reflect.has(headersInit, kRawHeaders)) {\n          const headers2 = Reflect.construct(\n            target,\n            [Reflect.get(headersInit, kRawHeaders)],\n            newTarget\n          );\n          ensureRawHeadersSymbol(headers2, [\n            /**\n             * @note Spread the retrieved headers to clone them.\n             * This prevents multiple Headers instances from pointing\n             * at the same internal \"rawHeaders\" array.\n             */\n            ...Reflect.get(headersInit, kRawHeaders)\n          ]);\n          return headers2;\n        }\n        const headers = Reflect.construct(target, args, newTarget);\n        if (!Reflect.has(headers, kRawHeaders)) {\n          const rawHeadersInit = Array.isArray(headersInit) ? headersInit : Object.entries(headersInit);\n          ensureRawHeadersSymbol(headers, rawHeadersInit);\n        }\n        return headers;\n      }\n    })\n  });\n  Headers.prototype.set = new Proxy(Headers.prototype.set, {\n    apply(target, thisArg, args) {\n      recordRawHeader(thisArg, args, \"set\");\n      return Reflect.apply(target, thisArg, args);\n    }\n  });\n  Headers.prototype.append = new Proxy(Headers.prototype.append, {\n    apply(target, thisArg, args) {\n      recordRawHeader(thisArg, args, \"append\");\n      return Reflect.apply(target, thisArg, args);\n    }\n  });\n  Headers.prototype.delete = new Proxy(Headers.prototype.delete, {\n    apply(target, thisArg, args) {\n      const rawHeaders = Reflect.get(thisArg, kRawHeaders);\n      if (rawHeaders) {\n        for (let index = rawHeaders.length - 1; index >= 0; index--) {\n          if (rawHeaders[index][0].toLowerCase() === args[0].toLowerCase()) {\n            rawHeaders.splice(index, 1);\n          }\n        }\n      }\n      return Reflect.apply(target, thisArg, args);\n    }\n  });\n  Object.defineProperty(globalThis, \"Request\", {\n    enumerable: true,\n    writable: true,\n    value: new Proxy(Request, {\n      construct(target, args, newTarget) {\n        const request = Reflect.construct(target, args, newTarget);\n        const inferredRawHeaders = [];\n        if (typeof args[0] === \"object\" && args[0].headers != null) {\n          inferredRawHeaders.push(...inferRawHeaders(args[0].headers));\n        }\n        if (typeof args[1] === \"object\" && args[1].headers != null) {\n          inferredRawHeaders.push(...inferRawHeaders(args[1].headers));\n        }\n        if (inferredRawHeaders.length > 0) {\n          ensureRawHeadersSymbol(request.headers, inferredRawHeaders);\n        }\n        return request;\n      }\n    })\n  });\n  Object.defineProperty(globalThis, \"Response\", {\n    enumerable: true,\n    writable: true,\n    value: new Proxy(Response, {\n      construct(target, args, newTarget) {\n        const response = Reflect.construct(target, args, newTarget);\n        if (typeof args[1] === \"object\" && args[1].headers != null) {\n          ensureRawHeadersSymbol(\n            response.headers,\n            inferRawHeaders(args[1].headers)\n          );\n        }\n        return response;\n      }\n    })\n  });\n}\nfunction restoreHeadersPrototype() {\n  if (!Reflect.get(Headers, kRestorePatches)) {\n    return;\n  }\n  Reflect.get(Headers, kRestorePatches)();\n}\nfunction getRawFetchHeaders(headers) {\n  if (!Reflect.has(headers, kRawHeaders)) {\n    return Array.from(headers.entries());\n  }\n  const rawHeaders = Reflect.get(headers, kRawHeaders);\n  return rawHeaders.length > 0 ? rawHeaders : Array.from(headers.entries());\n}\nfunction inferRawHeaders(headers) {\n  if (headers instanceof Headers) {\n    return Reflect.get(headers, kRawHeaders) || [];\n  }\n  return Reflect.get(new Headers(headers), kRawHeaders);\n}\n\n// src/interceptors/ClientRequest/MockHttpSocket.ts\nvar kRequestId = Symbol(\"kRequestId\");\nvar MockHttpSocket = class extends MockSocket {\n  constructor(options) {\n    super({\n      write: (chunk, encoding, callback) => {\n        var _a;\n        if (this.socketState !== \"passthrough\") {\n          this.writeBuffer.push([chunk, encoding, callback]);\n        }\n        if (chunk) {\n          if (this.socketState === \"passthrough\") {\n            (_a = this.originalSocket) == null ? void 0 : _a.write(chunk, encoding, callback);\n          }\n          this.requestParser.execute(\n            Buffer.isBuffer(chunk) ? chunk : Buffer.from(chunk, encoding)\n          );\n        }\n      },\n      read: (chunk) => {\n        if (chunk !== null) {\n          this.responseParser.execute(\n            Buffer.isBuffer(chunk) ? chunk : Buffer.from(chunk)\n          );\n        }\n      }\n    });\n    this.requestRawHeadersBuffer = [];\n    this.responseRawHeadersBuffer = [];\n    this.writeBuffer = [];\n    this.socketState = \"unknown\";\n    /**\n     * This callback might be called when the request is \"slow\":\n     * - Request headers were fragmented across multiple TCP packages;\n     * - Request headers were too large to be processed in a single run\n     * (e.g. more than 30 request headers).\n     * @note This is called before request start.\n     */\n    this.onRequestHeaders = (rawHeaders) => {\n      this.requestRawHeadersBuffer.push(...rawHeaders);\n    };\n    this.onRequestStart = (versionMajor, versionMinor, rawHeaders, _, path, __, ___, ____, shouldKeepAlive) => {\n      var _a;\n      this.shouldKeepAlive = shouldKeepAlive;\n      const url = new URL(path || \"\", this.baseUrl);\n      const method = ((_a = this.connectionOptions.method) == null ? void 0 : _a.toUpperCase()) || \"GET\";\n      const headers = _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_2__.FetchResponse.parseRawHeaders([\n        ...this.requestRawHeadersBuffer,\n        ...rawHeaders || []\n      ]);\n      this.requestRawHeadersBuffer.length = 0;\n      const canHaveBody = method !== \"GET\" && method !== \"HEAD\";\n      if (url.username || url.password) {\n        if (!headers.has(\"authorization\")) {\n          headers.set(\"authorization\", `Basic ${url.username}:${url.password}`);\n        }\n        url.username = \"\";\n        url.password = \"\";\n      }\n      this.requestStream = new stream__WEBPACK_IMPORTED_MODULE_8__.Readable({\n        /**\n         * @note Provide the `read()` method so a `Readable` could be\n         * used as the actual request body (the stream calls \"read()\").\n         * We control the queue in the onRequestBody/End functions.\n         */\n        read: () => {\n          this.flushWriteBuffer();\n        }\n      });\n      const requestId = (0,_chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_2__.createRequestId)();\n      this.request = new Request(url, {\n        method,\n        headers,\n        credentials: \"same-origin\",\n        // @ts-expect-error Undocumented Fetch property.\n        duplex: canHaveBody ? \"half\" : void 0,\n        body: canHaveBody ? stream__WEBPACK_IMPORTED_MODULE_8__.Readable.toWeb(this.requestStream) : null\n      });\n      Reflect.set(this.request, kRequestId, requestId);\n      (0,_chunk_3GJB4JDF_mjs__WEBPACK_IMPORTED_MODULE_3__.setRawRequest)(this.request, Reflect.get(this, \"_httpMessage\"));\n      (0,_chunk_TJDMZZXE_mjs__WEBPACK_IMPORTED_MODULE_0__.setRawRequestBodyStream)(this.request, this.requestStream);\n      if (this.request.headers.has(_chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_2__.INTERNAL_REQUEST_ID_HEADER_NAME)) {\n        this.passthrough();\n        return;\n      }\n      this.onRequest({\n        requestId,\n        request: this.request,\n        socket: this\n      });\n    };\n    /**\n     * This callback might be called when the response is \"slow\":\n     * - Response headers were fragmented across multiple TCP packages;\n     * - Response headers were too large to be processed in a single run\n     * (e.g. more than 30 response headers).\n     * @note This is called before response start.\n     */\n    this.onResponseHeaders = (rawHeaders) => {\n      this.responseRawHeadersBuffer.push(...rawHeaders);\n    };\n    this.onResponseStart = (versionMajor, versionMinor, rawHeaders, method, url, status, statusText) => {\n      const headers = _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_2__.FetchResponse.parseRawHeaders([\n        ...this.responseRawHeadersBuffer,\n        ...rawHeaders || []\n      ]);\n      this.responseRawHeadersBuffer.length = 0;\n      const response = new _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_2__.FetchResponse(\n        /**\n         * @note The Fetch API response instance exposed to the consumer\n         * is created over the response stream of the HTTP parser. It is NOT\n         * related to the Socket instance. This way, you can read response body\n         * in response listener while the Socket instance delays the emission\n         * of \"end\" and other events until those response listeners are finished.\n         */\n        _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_2__.FetchResponse.isResponseWithBody(status) ? stream__WEBPACK_IMPORTED_MODULE_8__.Readable.toWeb(\n          this.responseStream = new stream__WEBPACK_IMPORTED_MODULE_8__.Readable({ read() {\n          } })\n        ) : null,\n        {\n          url,\n          status,\n          statusText,\n          headers\n        }\n      );\n      (0,outvariant__WEBPACK_IMPORTED_MODULE_9__.invariant)(\n        this.request,\n        \"Failed to handle a response: request does not exist\"\n      );\n      _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_2__.FetchResponse.setUrl(this.request.url, response);\n      if (this.request.headers.has(_chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_2__.INTERNAL_REQUEST_ID_HEADER_NAME)) {\n        return;\n      }\n      this.responseListenersPromise = this.onResponse({\n        response,\n        isMockedResponse: this.socketState === \"mock\",\n        requestId: Reflect.get(this.request, kRequestId),\n        request: this.request,\n        socket: this\n      });\n    };\n    this.connectionOptions = options.connectionOptions;\n    this.createConnection = options.createConnection;\n    this.onRequest = options.onRequest;\n    this.onResponse = options.onResponse;\n    this.baseUrl = baseUrlFromConnectionOptions(this.connectionOptions);\n    this.requestParser = new _http_common__WEBPACK_IMPORTED_MODULE_7__.HTTPParser();\n    this.requestParser.initialize(_http_common__WEBPACK_IMPORTED_MODULE_7__.HTTPParser.REQUEST, {});\n    this.requestParser[_http_common__WEBPACK_IMPORTED_MODULE_7__.HTTPParser.kOnHeaders] = this.onRequestHeaders.bind(this);\n    this.requestParser[_http_common__WEBPACK_IMPORTED_MODULE_7__.HTTPParser.kOnHeadersComplete] = this.onRequestStart.bind(this);\n    this.requestParser[_http_common__WEBPACK_IMPORTED_MODULE_7__.HTTPParser.kOnBody] = this.onRequestBody.bind(this);\n    this.requestParser[_http_common__WEBPACK_IMPORTED_MODULE_7__.HTTPParser.kOnMessageComplete] = this.onRequestEnd.bind(this);\n    this.responseParser = new _http_common__WEBPACK_IMPORTED_MODULE_7__.HTTPParser();\n    this.responseParser.initialize(_http_common__WEBPACK_IMPORTED_MODULE_7__.HTTPParser.RESPONSE, {});\n    this.responseParser[_http_common__WEBPACK_IMPORTED_MODULE_7__.HTTPParser.kOnHeaders] = this.onResponseHeaders.bind(this);\n    this.responseParser[_http_common__WEBPACK_IMPORTED_MODULE_7__.HTTPParser.kOnHeadersComplete] = this.onResponseStart.bind(this);\n    this.responseParser[_http_common__WEBPACK_IMPORTED_MODULE_7__.HTTPParser.kOnBody] = this.onResponseBody.bind(this);\n    this.responseParser[_http_common__WEBPACK_IMPORTED_MODULE_7__.HTTPParser.kOnMessageComplete] = this.onResponseEnd.bind(this);\n    this.once(\"finish\", () => this.requestParser.free());\n    if (this.baseUrl.protocol === \"https:\") {\n      Reflect.set(this, \"encrypted\", true);\n      Reflect.set(this, \"authorized\", false);\n      Reflect.set(this, \"getProtocol\", () => \"TLSv1.3\");\n      Reflect.set(this, \"getSession\", () => void 0);\n      Reflect.set(this, \"isSessionReused\", () => false);\n    }\n  }\n  emit(event, ...args) {\n    const emitEvent = super.emit.bind(this, event, ...args);\n    if (this.responseListenersPromise) {\n      this.responseListenersPromise.finally(emitEvent);\n      return this.listenerCount(event) > 0;\n    }\n    return emitEvent();\n  }\n  destroy(error) {\n    this.responseParser.free();\n    if (error) {\n      this.emit(\"error\", error);\n    }\n    return super.destroy(error);\n  }\n  /**\n   * Establish this Socket connection as-is and pipe\n   * its data/events through this Socket.\n   */\n  passthrough() {\n    this.socketState = \"passthrough\";\n    if (this.destroyed) {\n      return;\n    }\n    const socket = this.createConnection();\n    this.originalSocket = socket;\n    if (\"_handle\" in socket) {\n      Object.defineProperty(this, \"_handle\", {\n        value: socket._handle,\n        enumerable: true,\n        writable: true\n      });\n    }\n    this.once(\"error\", (error) => {\n      socket.destroy(error);\n    });\n    this.address = socket.address.bind(socket);\n    let writeArgs;\n    let headersWritten = false;\n    while (writeArgs = this.writeBuffer.shift()) {\n      if (writeArgs !== void 0) {\n        if (!headersWritten) {\n          const [chunk, encoding, callback] = writeArgs;\n          const chunkString = chunk.toString();\n          const chunkBeforeRequestHeaders = chunkString.slice(\n            0,\n            chunkString.indexOf(\"\\r\\n\") + 2\n          );\n          const chunkAfterRequestHeaders = chunkString.slice(\n            chunk.indexOf(\"\\r\\n\\r\\n\")\n          );\n          const rawRequestHeaders = getRawFetchHeaders(this.request.headers);\n          const requestHeadersString = rawRequestHeaders.filter(([name]) => {\n            return name.toLowerCase() !== _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_2__.INTERNAL_REQUEST_ID_HEADER_NAME;\n          }).map(([name, value]) => `${name}: ${value}`).join(\"\\r\\n\");\n          const headersChunk = `${chunkBeforeRequestHeaders}${requestHeadersString}${chunkAfterRequestHeaders}`;\n          socket.write(headersChunk, encoding, callback);\n          headersWritten = true;\n          continue;\n        }\n        socket.write(...writeArgs);\n      }\n    }\n    if (Reflect.get(socket, \"encrypted\")) {\n      const tlsProperties = [\n        \"encrypted\",\n        \"authorized\",\n        \"getProtocol\",\n        \"getSession\",\n        \"isSessionReused\"\n      ];\n      tlsProperties.forEach((propertyName) => {\n        Object.defineProperty(this, propertyName, {\n          enumerable: true,\n          get: () => {\n            const value = Reflect.get(socket, propertyName);\n            return typeof value === \"function\" ? value.bind(socket) : value;\n          }\n        });\n      });\n    }\n    socket.on(\"lookup\", (...args) => this.emit(\"lookup\", ...args)).on(\"connect\", () => {\n      this.connecting = socket.connecting;\n      this.emit(\"connect\");\n    }).on(\"secureConnect\", () => this.emit(\"secureConnect\")).on(\"secure\", () => this.emit(\"secure\")).on(\"session\", (session) => this.emit(\"session\", session)).on(\"ready\", () => this.emit(\"ready\")).on(\"drain\", () => this.emit(\"drain\")).on(\"data\", (chunk) => {\n      this.push(chunk);\n    }).on(\"error\", (error) => {\n      Reflect.set(this, \"_hadError\", Reflect.get(socket, \"_hadError\"));\n      this.emit(\"error\", error);\n    }).on(\"resume\", () => this.emit(\"resume\")).on(\"timeout\", () => this.emit(\"timeout\")).on(\"prefinish\", () => this.emit(\"prefinish\")).on(\"finish\", () => this.emit(\"finish\")).on(\"close\", (hadError) => this.emit(\"close\", hadError)).on(\"end\", () => this.emit(\"end\"));\n  }\n  /**\n   * Convert the given Fetch API `Response` instance to an\n   * HTTP message and push it to the socket.\n   */\n  async respondWith(response) {\n    var _a;\n    if (this.destroyed) {\n      return;\n    }\n    if ((0,_chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_1__.isPropertyAccessible)(response, \"type\") && response.type === \"error\") {\n      this.errorWith(new TypeError(\"Network error\"));\n      return;\n    }\n    this.mockConnect();\n    this.socketState = \"mock\";\n    this.flushWriteBuffer();\n    const serverResponse = new http__WEBPACK_IMPORTED_MODULE_4__.ServerResponse(new http__WEBPACK_IMPORTED_MODULE_4__.IncomingMessage(this));\n    serverResponse.assignSocket(\n      new MockSocket({\n        write: (chunk, encoding, callback) => {\n          this.push(chunk, encoding);\n          callback == null ? void 0 : callback();\n        },\n        read() {\n        }\n      })\n    );\n    serverResponse.removeHeader(\"connection\");\n    serverResponse.removeHeader(\"date\");\n    const rawResponseHeaders = getRawFetchHeaders(response.headers);\n    serverResponse.writeHead(\n      response.status,\n      response.statusText || http__WEBPACK_IMPORTED_MODULE_4__.STATUS_CODES[response.status],\n      rawResponseHeaders\n    );\n    this.once(\"error\", () => {\n      serverResponse.destroy();\n    });\n    if (response.body) {\n      try {\n        const reader = response.body.getReader();\n        while (true) {\n          const { done, value } = await reader.read();\n          if (done) {\n            serverResponse.end();\n            break;\n          }\n          serverResponse.write(value);\n        }\n      } catch (error) {\n        this.respondWith((0,_chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_1__.createServerErrorResponse)(error));\n        return;\n      }\n    } else {\n      serverResponse.end();\n    }\n    if (!this.shouldKeepAlive) {\n      this.emit(\"readable\");\n      (_a = this.responseStream) == null ? void 0 : _a.push(null);\n      this.push(null);\n    }\n  }\n  /**\n   * Close this socket connection with the given error.\n   */\n  errorWith(error) {\n    this.destroy(error);\n  }\n  mockConnect() {\n    this.connecting = false;\n    const isIPv6 = net__WEBPACK_IMPORTED_MODULE_6__.isIPv6(this.connectionOptions.hostname) || this.connectionOptions.family === 6;\n    const addressInfo = {\n      address: isIPv6 ? \"::1\" : \"127.0.0.1\",\n      family: isIPv6 ? \"IPv6\" : \"IPv4\",\n      port: this.connectionOptions.port\n    };\n    this.address = () => addressInfo;\n    this.emit(\n      \"lookup\",\n      null,\n      addressInfo.address,\n      addressInfo.family === \"IPv6\" ? 6 : 4,\n      this.connectionOptions.host\n    );\n    this.emit(\"connect\");\n    this.emit(\"ready\");\n    if (this.baseUrl.protocol === \"https:\") {\n      this.emit(\"secure\");\n      this.emit(\"secureConnect\");\n      this.emit(\n        \"session\",\n        this.connectionOptions.session || Buffer.from(\"mock-session-renegotiate\")\n      );\n      this.emit(\"session\", Buffer.from(\"mock-session-resume\"));\n    }\n  }\n  flushWriteBuffer() {\n    for (const writeCall of this.writeBuffer) {\n      if (typeof writeCall[2] === \"function\") {\n        writeCall[2]();\n        writeCall[2] = void 0;\n      }\n    }\n  }\n  onRequestBody(chunk) {\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_9__.invariant)(\n      this.requestStream,\n      \"Failed to write to a request stream: stream does not exist\"\n    );\n    this.requestStream.push(chunk);\n  }\n  onRequestEnd() {\n    if (this.requestStream) {\n      this.requestStream.push(null);\n    }\n  }\n  onResponseBody(chunk) {\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_9__.invariant)(\n      this.responseStream,\n      \"Failed to write to a response stream: stream does not exist\"\n    );\n    this.responseStream.push(chunk);\n  }\n  onResponseEnd() {\n    if (this.responseStream) {\n      this.responseStream.push(null);\n    }\n  }\n};\n\n// src/interceptors/ClientRequest/agents.ts\n\n\nvar MockAgent = class extends http__WEBPACK_IMPORTED_MODULE_4__.Agent {\n  constructor(options) {\n    super();\n    this.customAgent = options.customAgent;\n    this.onRequest = options.onRequest;\n    this.onResponse = options.onResponse;\n  }\n  createConnection(options, callback) {\n    const createConnection = this.customAgent instanceof http__WEBPACK_IMPORTED_MODULE_4__.Agent ? this.customAgent.createConnection : super.createConnection;\n    const createConnectionOptions = this.customAgent instanceof http__WEBPACK_IMPORTED_MODULE_4__.Agent ? {\n      ...options,\n      ...this.customAgent.options\n    } : options;\n    const socket = new MockHttpSocket({\n      connectionOptions: options,\n      createConnection: createConnection.bind(\n        this.customAgent || this,\n        createConnectionOptions,\n        callback\n      ),\n      onRequest: this.onRequest.bind(this),\n      onResponse: this.onResponse.bind(this)\n    });\n    return socket;\n  }\n};\nvar MockHttpsAgent = class extends https__WEBPACK_IMPORTED_MODULE_5__.Agent {\n  constructor(options) {\n    super();\n    this.customAgent = options.customAgent;\n    this.onRequest = options.onRequest;\n    this.onResponse = options.onResponse;\n  }\n  createConnection(options, callback) {\n    const createConnection = this.customAgent instanceof http__WEBPACK_IMPORTED_MODULE_4__.Agent ? this.customAgent.createConnection : super.createConnection;\n    const createConnectionOptions = this.customAgent instanceof http__WEBPACK_IMPORTED_MODULE_4__.Agent ? {\n      ...options,\n      ...this.customAgent.options\n    } : options;\n    const socket = new MockHttpSocket({\n      connectionOptions: options,\n      createConnection: createConnection.bind(\n        this.customAgent || this,\n        createConnectionOptions,\n        callback\n      ),\n      onRequest: this.onRequest.bind(this),\n      onResponse: this.onResponse.bind(this)\n    });\n    return socket;\n  }\n};\n\n// src/interceptors/ClientRequest/utils/normalizeClientRequestArgs.ts\n\n\n\n\n\n\n// src/utils/getUrlByRequestOptions.ts\n\n\nvar logger = new _open_draft_logger__WEBPACK_IMPORTED_MODULE_11__.Logger(\"utils getUrlByRequestOptions\");\nvar DEFAULT_PATH = \"/\";\nvar DEFAULT_PROTOCOL = \"http:\";\nvar DEFAULT_HOSTNAME = \"localhost\";\nvar SSL_PORT = 443;\nfunction getAgent(options) {\n  return options.agent instanceof http__WEBPACK_IMPORTED_MODULE_4__.Agent ? options.agent : void 0;\n}\nfunction getProtocolByRequestOptions(options) {\n  var _a;\n  if (options.protocol) {\n    return options.protocol;\n  }\n  const agent = getAgent(options);\n  const agentProtocol = agent == null ? void 0 : agent.protocol;\n  if (agentProtocol) {\n    return agentProtocol;\n  }\n  const port = getPortByRequestOptions(options);\n  const isSecureRequest = options.cert || port === SSL_PORT;\n  return isSecureRequest ? \"https:\" : ((_a = options.uri) == null ? void 0 : _a.protocol) || DEFAULT_PROTOCOL;\n}\nfunction getPortByRequestOptions(options) {\n  if (options.port) {\n    return Number(options.port);\n  }\n  const agent = getAgent(options);\n  if (agent == null ? void 0 : agent.options.port) {\n    return Number(agent.options.port);\n  }\n  if (agent == null ? void 0 : agent.defaultPort) {\n    return Number(agent.defaultPort);\n  }\n  return void 0;\n}\nfunction getAuthByRequestOptions(options) {\n  if (options.auth) {\n    const [username, password] = options.auth.split(\":\");\n    return { username, password };\n  }\n}\nfunction isRawIPv6Address(host) {\n  return host.includes(\":\") && !host.startsWith(\"[\") && !host.endsWith(\"]\");\n}\nfunction getHostname(options) {\n  let host = options.hostname || options.host;\n  if (host) {\n    if (isRawIPv6Address(host)) {\n      host = `[${host}]`;\n    }\n    return new URL(`http://${host}`).hostname;\n  }\n  return DEFAULT_HOSTNAME;\n}\nfunction getUrlByRequestOptions(options) {\n  logger.info(\"request options\", options);\n  if (options.uri) {\n    logger.info(\n      'constructing url from explicitly provided \"options.uri\": %s',\n      options.uri\n    );\n    return new URL(options.uri.href);\n  }\n  logger.info(\"figuring out url from request options...\");\n  const protocol = getProtocolByRequestOptions(options);\n  logger.info(\"protocol\", protocol);\n  const port = getPortByRequestOptions(options);\n  logger.info(\"port\", port);\n  const hostname = getHostname(options);\n  logger.info(\"hostname\", hostname);\n  const path = options.path || DEFAULT_PATH;\n  logger.info(\"path\", path);\n  const credentials = getAuthByRequestOptions(options);\n  logger.info(\"credentials\", credentials);\n  const authString = credentials ? `${credentials.username}:${credentials.password}@` : \"\";\n  logger.info(\"auth string:\", authString);\n  const portString = typeof port !== \"undefined\" ? `:${port}` : \"\";\n  const url = new URL(`${protocol}//${hostname}${portString}${path}`);\n  url.username = (credentials == null ? void 0 : credentials.username) || \"\";\n  url.password = (credentials == null ? void 0 : credentials.password) || \"\";\n  logger.info(\"created url:\", url);\n  return url;\n}\n\n// src/utils/cloneObject.ts\n\nvar logger2 = new _open_draft_logger__WEBPACK_IMPORTED_MODULE_11__.Logger(\"cloneObject\");\nfunction isPlainObject(obj) {\n  var _a;\n  logger2.info(\"is plain object?\", obj);\n  if (obj == null || !((_a = obj.constructor) == null ? void 0 : _a.name)) {\n    logger2.info(\"given object is undefined, not a plain object...\");\n    return false;\n  }\n  logger2.info(\"checking the object constructor:\", obj.constructor.name);\n  return obj.constructor.name === \"Object\";\n}\nfunction cloneObject(obj) {\n  logger2.info(\"cloning object:\", obj);\n  const enumerableProperties = Object.entries(obj).reduce(\n    (acc, [key, value]) => {\n      logger2.info(\"analyzing key-value pair:\", key, value);\n      acc[key] = isPlainObject(value) ? cloneObject(value) : value;\n      return acc;\n    },\n    {}\n  );\n  return isPlainObject(obj) ? enumerableProperties : Object.assign(Object.getPrototypeOf(obj), enumerableProperties);\n}\n\n// src/interceptors/ClientRequest/utils/normalizeClientRequestArgs.ts\nvar logger3 = new _open_draft_logger__WEBPACK_IMPORTED_MODULE_11__.Logger(\"http normalizeClientRequestArgs\");\nfunction resolveRequestOptions(args, url) {\n  if (typeof args[1] === \"undefined\" || typeof args[1] === \"function\") {\n    logger3.info(\"request options not provided, deriving from the url\", url);\n    return (0,url__WEBPACK_IMPORTED_MODULE_10__.urlToHttpOptions)(url);\n  }\n  if (args[1]) {\n    logger3.info(\"has custom RequestOptions!\", args[1]);\n    const requestOptionsFromUrl = (0,url__WEBPACK_IMPORTED_MODULE_10__.urlToHttpOptions)(url);\n    logger3.info(\"derived RequestOptions from the URL:\", requestOptionsFromUrl);\n    logger3.info(\"cloning RequestOptions...\");\n    const clonedRequestOptions = cloneObject(args[1]);\n    logger3.info(\"successfully cloned RequestOptions!\", clonedRequestOptions);\n    return {\n      ...requestOptionsFromUrl,\n      ...clonedRequestOptions\n    };\n  }\n  logger3.info(\"using an empty object as request options\");\n  return {};\n}\nfunction overrideUrlByRequestOptions(url, options) {\n  url.host = options.host || url.host;\n  url.hostname = options.hostname || url.hostname;\n  url.port = options.port ? options.port.toString() : url.port;\n  if (options.path) {\n    const parsedOptionsPath = (0,url__WEBPACK_IMPORTED_MODULE_10__.parse)(options.path, false);\n    url.pathname = parsedOptionsPath.pathname || \"\";\n    url.search = parsedOptionsPath.search || \"\";\n  }\n  return url;\n}\nfunction resolveCallback(args) {\n  return typeof args[1] === \"function\" ? args[1] : args[2];\n}\nfunction normalizeClientRequestArgs(defaultProtocol, args) {\n  let url;\n  let options;\n  let callback;\n  logger3.info(\"arguments\", args);\n  logger3.info(\"using default protocol:\", defaultProtocol);\n  if (args.length === 0) {\n    const url2 = new url__WEBPACK_IMPORTED_MODULE_10__.URL(\"http://localhost\");\n    const options2 = resolveRequestOptions(args, url2);\n    return [url2, options2];\n  }\n  if (typeof args[0] === \"string\") {\n    logger3.info(\"first argument is a location string:\", args[0]);\n    url = new url__WEBPACK_IMPORTED_MODULE_10__.URL(args[0]);\n    logger3.info(\"created a url:\", url);\n    const requestOptionsFromUrl = (0,url__WEBPACK_IMPORTED_MODULE_10__.urlToHttpOptions)(url);\n    logger3.info(\"request options from url:\", requestOptionsFromUrl);\n    options = resolveRequestOptions(args, url);\n    logger3.info(\"resolved request options:\", options);\n    callback = resolveCallback(args);\n  } else if (args[0] instanceof url__WEBPACK_IMPORTED_MODULE_10__.URL) {\n    url = args[0];\n    logger3.info(\"first argument is a URL:\", url);\n    if (typeof args[1] !== \"undefined\" && (0,_chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_1__.isObject)(args[1])) {\n      url = overrideUrlByRequestOptions(url, args[1]);\n    }\n    options = resolveRequestOptions(args, url);\n    logger3.info(\"derived request options:\", options);\n    callback = resolveCallback(args);\n  } else if (\"hash\" in args[0] && !(\"method\" in args[0])) {\n    const [legacyUrl] = args;\n    logger3.info(\"first argument is a legacy URL:\", legacyUrl);\n    if (legacyUrl.hostname === null) {\n      logger3.info(\"given legacy URL is relative (no hostname)\");\n      return (0,_chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_1__.isObject)(args[1]) ? normalizeClientRequestArgs(defaultProtocol, [\n        { path: legacyUrl.path, ...args[1] },\n        args[2]\n      ]) : normalizeClientRequestArgs(defaultProtocol, [\n        { path: legacyUrl.path },\n        args[1]\n      ]);\n    }\n    logger3.info(\"given legacy url is absolute\");\n    const resolvedUrl = new url__WEBPACK_IMPORTED_MODULE_10__.URL(legacyUrl.href);\n    return args[1] === void 0 ? normalizeClientRequestArgs(defaultProtocol, [resolvedUrl]) : typeof args[1] === \"function\" ? normalizeClientRequestArgs(defaultProtocol, [resolvedUrl, args[1]]) : normalizeClientRequestArgs(defaultProtocol, [\n      resolvedUrl,\n      args[1],\n      args[2]\n    ]);\n  } else if ((0,_chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_1__.isObject)(args[0])) {\n    options = { ...args[0] };\n    logger3.info(\"first argument is RequestOptions:\", options);\n    options.protocol = options.protocol || defaultProtocol;\n    logger3.info(\"normalized request options:\", options);\n    url = getUrlByRequestOptions(options);\n    logger3.info(\"created a URL from RequestOptions:\", url.href);\n    callback = resolveCallback(args);\n  } else {\n    throw new Error(\n      `Failed to construct ClientRequest with these parameters: ${args}`\n    );\n  }\n  options.protocol = options.protocol || url.protocol;\n  options.method = options.method || \"GET\";\n  if (!options._defaultAgent) {\n    logger3.info(\n      'has no default agent, setting the default agent for \"%s\"',\n      options.protocol\n    );\n    options._defaultAgent = options.protocol === \"https:\" ? https__WEBPACK_IMPORTED_MODULE_5__.globalAgent : http__WEBPACK_IMPORTED_MODULE_4__.globalAgent;\n  }\n  logger3.info(\"successfully resolved url:\", url.href);\n  logger3.info(\"successfully resolved options:\", options);\n  logger3.info(\"successfully resolved callback:\", callback);\n  if (!(url instanceof url__WEBPACK_IMPORTED_MODULE_10__.URL)) {\n    url = url.toString();\n  }\n  return [url, options, callback];\n}\n\n// src/interceptors/ClientRequest/index.ts\nvar _ClientRequestInterceptor = class extends _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_2__.Interceptor {\n  constructor() {\n    super(_ClientRequestInterceptor.symbol);\n    this.onRequest = async ({\n      request,\n      socket\n    }) => {\n      const requestId = Reflect.get(request, kRequestId);\n      const controller = new _chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_1__.RequestController(request);\n      const isRequestHandled = await (0,_chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_1__.handleRequest)({\n        request,\n        requestId,\n        controller,\n        emitter: this.emitter,\n        onResponse: (response) => {\n          socket.respondWith(response);\n        },\n        onRequestError: (response) => {\n          socket.respondWith(response);\n        },\n        onError: (error) => {\n          if (error instanceof Error) {\n            socket.errorWith(error);\n          }\n        }\n      });\n      if (!isRequestHandled) {\n        return socket.passthrough();\n      }\n    };\n    this.onResponse = async ({\n      requestId,\n      request,\n      response,\n      isMockedResponse\n    }) => {\n      return (0,_chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_1__.emitAsync)(this.emitter, \"response\", {\n        requestId,\n        request,\n        response,\n        isMockedResponse\n      });\n    };\n  }\n  setup() {\n    const {\n      ClientRequest: OriginalClientRequest,\n      get: originalGet,\n      request: originalRequest\n    } = http__WEBPACK_IMPORTED_MODULE_4__;\n    const { get: originalHttpsGet, request: originalHttpsRequest } = https__WEBPACK_IMPORTED_MODULE_5__;\n    const onRequest = this.onRequest.bind(this);\n    const onResponse = this.onResponse.bind(this);\n    http__WEBPACK_IMPORTED_MODULE_4__.ClientRequest = new Proxy(http__WEBPACK_IMPORTED_MODULE_4__.ClientRequest, {\n      construct: (target, args) => {\n        const [url, options, callback] = normalizeClientRequestArgs(\n          \"http:\",\n          args\n        );\n        const Agent2 = options.protocol === \"https:\" ? MockHttpsAgent : MockAgent;\n        const mockAgent = new Agent2({\n          customAgent: options.agent,\n          onRequest,\n          onResponse\n        });\n        options.agent = mockAgent;\n        return Reflect.construct(target, [url, options, callback]);\n      }\n    });\n    http__WEBPACK_IMPORTED_MODULE_4__.request = new Proxy(http__WEBPACK_IMPORTED_MODULE_4__.request, {\n      apply: (target, thisArg, args) => {\n        const [url, options, callback] = normalizeClientRequestArgs(\n          \"http:\",\n          args\n        );\n        const mockAgent = new MockAgent({\n          customAgent: options.agent,\n          onRequest,\n          onResponse\n        });\n        options.agent = mockAgent;\n        return Reflect.apply(target, thisArg, [url, options, callback]);\n      }\n    });\n    http__WEBPACK_IMPORTED_MODULE_4__.get = new Proxy(http__WEBPACK_IMPORTED_MODULE_4__.get, {\n      apply: (target, thisArg, args) => {\n        const [url, options, callback] = normalizeClientRequestArgs(\n          \"http:\",\n          args\n        );\n        const mockAgent = new MockAgent({\n          customAgent: options.agent,\n          onRequest,\n          onResponse\n        });\n        options.agent = mockAgent;\n        return Reflect.apply(target, thisArg, [url, options, callback]);\n      }\n    });\n    https__WEBPACK_IMPORTED_MODULE_5__.request = new Proxy(https__WEBPACK_IMPORTED_MODULE_5__.request, {\n      apply: (target, thisArg, args) => {\n        const [url, options, callback] = normalizeClientRequestArgs(\n          \"https:\",\n          args\n        );\n        const mockAgent = new MockHttpsAgent({\n          customAgent: options.agent,\n          onRequest,\n          onResponse\n        });\n        options.agent = mockAgent;\n        return Reflect.apply(target, thisArg, [url, options, callback]);\n      }\n    });\n    https__WEBPACK_IMPORTED_MODULE_5__.get = new Proxy(https__WEBPACK_IMPORTED_MODULE_5__.get, {\n      apply: (target, thisArg, args) => {\n        const [url, options, callback] = normalizeClientRequestArgs(\n          \"https:\",\n          args\n        );\n        const mockAgent = new MockHttpsAgent({\n          customAgent: options.agent,\n          onRequest,\n          onResponse\n        });\n        options.agent = mockAgent;\n        return Reflect.apply(target, thisArg, [url, options, callback]);\n      }\n    });\n    recordRawFetchHeaders();\n    this.subscriptions.push(() => {\n      http__WEBPACK_IMPORTED_MODULE_4__.ClientRequest = OriginalClientRequest;\n      http__WEBPACK_IMPORTED_MODULE_4__.get = originalGet;\n      http__WEBPACK_IMPORTED_MODULE_4__.request = originalRequest;\n      https__WEBPACK_IMPORTED_MODULE_5__.get = originalHttpsGet;\n      https__WEBPACK_IMPORTED_MODULE_5__.request = originalHttpsRequest;\n      restoreHeadersPrototype();\n    });\n  }\n};\nvar ClientRequestInterceptor = _ClientRequestInterceptor;\nClientRequestInterceptor.symbol = Symbol(\"client-request-interceptor\");\n\n\n//# sourceMappingURL=chunk-EKNRB5ZS.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2NodW5rLUVLTlJCNVpTLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBRThCO0FBUUE7QUFNQTtBQUdBOztBQUU5QjtBQUN5QjtBQUNFOztBQUUzQjtBQUN1QjtBQUdEO0FBQytDO0FBQ25DO0FBQ0s7O0FBRXZDO0FBQ3NCOztBQUV0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0JBQStCLHVDQUFVO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsU0FBUyxJQUFJLEtBQUs7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsWUFBWTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxTQUFTLEtBQUssU0FBUztBQUNsRTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osVUFBVSwyQ0FBMkM7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsWUFBWTtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDhEQUFhO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELGFBQWEsR0FBRyxhQUFhO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDRDQUFRO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1Asd0JBQXdCLG9FQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw0Q0FBUTtBQUNwQyxPQUFPO0FBQ1A7QUFDQSxNQUFNLGtFQUFhO0FBQ25CLE1BQU0sNEVBQXVCO0FBQzdCLG1DQUFtQyxnRkFBK0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDhEQUFhO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDhEQUFhO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw4REFBYSw4QkFBOEIsNENBQVE7QUFDM0Qsb0NBQW9DLDRDQUFRLEdBQUc7QUFDL0MsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHFEQUFTO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsTUFBTSw4REFBYTtBQUNuQixtQ0FBbUMsZ0ZBQStCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG9EQUFVO0FBQ3ZDLGtDQUFrQyxvREFBVSxZQUFZO0FBQ3hELHVCQUF1QixvREFBVTtBQUNqQyx1QkFBdUIsb0RBQVU7QUFDakMsdUJBQXVCLG9EQUFVO0FBQ2pDLHVCQUF1QixvREFBVTtBQUNqQyw4QkFBOEIsb0RBQVU7QUFDeEMsbUNBQW1DLG9EQUFVLGFBQWE7QUFDMUQsd0JBQXdCLG9EQUFVO0FBQ2xDLHdCQUF3QixvREFBVTtBQUNsQyx3QkFBd0Isb0RBQVU7QUFDbEMsd0JBQXdCLG9EQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGdGQUErQjtBQUN6RSxXQUFXLDRCQUE0QixLQUFLLElBQUksTUFBTTtBQUN0RCxrQ0FBa0MsMEJBQTBCLEVBQUUscUJBQXFCLEVBQUUseUJBQXlCO0FBQzlHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSx5RUFBb0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGdEQUFjLEtBQUssaURBQWU7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw4Q0FBWTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixjQUFjO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUix5QkFBeUIsOEVBQXlCO0FBQ2xEO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsdUNBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHFEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkscURBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3dCO0FBQ0U7QUFDMUIsOEJBQThCLHVDQUFVO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELHVDQUFVO0FBQ25FLGdFQUFnRSx1Q0FBVTtBQUMxRTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsd0NBQVc7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsdUNBQVU7QUFDbkUsZ0VBQWdFLHVDQUFVO0FBQzFFO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUN1QztBQUd6QjtBQUdDO0FBSUY7QUFDMEM7O0FBRXZEO0FBQzZCO0FBQ2U7QUFDNUMsaUJBQWlCLHVEQUFNO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsdUNBQUs7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLEtBQUs7QUFDdEI7QUFDQSw2QkFBNkIsS0FBSztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHFCQUFxQixHQUFHLHFCQUFxQjtBQUNuRjtBQUNBLHVEQUF1RCxLQUFLO0FBQzVELHlCQUF5QixTQUFTLElBQUksU0FBUyxFQUFFLFdBQVcsRUFBRSxLQUFLO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDdUQ7QUFDdkQsa0JBQWtCLHVEQUFPO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0IsdURBQU87QUFDekI7QUFDQTtBQUNBO0FBQ0EsV0FBVyxzREFBZ0I7QUFDM0I7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHNEQUFnQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDJDQUFRO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixxQ0FBSTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxxQ0FBSTtBQUNsQjtBQUNBLGtDQUFrQyxzREFBZ0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDRCQUE0QixxQ0FBSTtBQUNwQztBQUNBO0FBQ0EsMENBQTBDLDZEQUFRO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDZEQUFRO0FBQ3JCLFVBQVUsa0NBQWtDO0FBQzVDO0FBQ0E7QUFDQSxVQUFVLHNCQUFzQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixxQ0FBSTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxTQUFTLDZEQUFRO0FBQ3JCLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxrRUFBa0UsS0FBSztBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsOENBQWdCLEdBQUcsNkNBQWU7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIscUNBQUk7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4Q0FBOEMsNERBQVc7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLDZCQUE2QixrRUFBaUI7QUFDOUMscUNBQXFDLGtFQUFhO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGFBQWEsOERBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLEVBQUUsaUNBQUs7QUFDYixZQUFZLHVEQUF1RCxFQUFFLGtDQUFNO0FBQzNFO0FBQ0E7QUFDQSxJQUFJLCtDQUFtQixhQUFhLCtDQUFtQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSx5Q0FBYSxhQUFhLHlDQUFhO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSxxQ0FBUyxhQUFhLHFDQUFTO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSwwQ0FBYyxhQUFhLDBDQUFjO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSxzQ0FBVSxhQUFhLHNDQUFVO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLE1BQU0sK0NBQW1CO0FBQ3pCLE1BQU0scUNBQVM7QUFDZixNQUFNLHlDQUFhO0FBQ25CLE1BQU0sc0NBQVU7QUFDaEIsTUFBTSwwQ0FBYztBQUNwQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFJRTtBQUNGIiwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29yay9kYXRhLWZldGNoaW5nLW1vbm9yZXBvLXBvYy9kYXRhLWZldGNoaW5nLW1vbm9yZXBvLXBvYy9ub2RlX21vZHVsZXMvLnBucG0vQG1zd2pzK2ludGVyY2VwdG9yc0AwLjM5LjYvbm9kZV9tb2R1bGVzL0Btc3dqcy9pbnRlcmNlcHRvcnMvbGliL25vZGUvY2h1bmstRUtOUkI1WlMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHNldFJhd1JlcXVlc3RCb2R5U3RyZWFtXG59IGZyb20gXCIuL2NodW5rLVRKRE1aWlhFLm1qc1wiO1xuaW1wb3J0IHtcbiAgUmVxdWVzdENvbnRyb2xsZXIsXG4gIGNyZWF0ZVNlcnZlckVycm9yUmVzcG9uc2UsXG4gIGVtaXRBc3luYyxcbiAgaGFuZGxlUmVxdWVzdCxcbiAgaXNPYmplY3QsXG4gIGlzUHJvcGVydHlBY2Nlc3NpYmxlXG59IGZyb20gXCIuL2NodW5rLUE3UTRSVERKLm1qc1wiO1xuaW1wb3J0IHtcbiAgRmV0Y2hSZXNwb25zZSxcbiAgSU5URVJOQUxfUkVRVUVTVF9JRF9IRUFERVJfTkFNRSxcbiAgSW50ZXJjZXB0b3IsXG4gIGNyZWF0ZVJlcXVlc3RJZFxufSBmcm9tIFwiLi9jaHVuay1JSEpTUE1ZTS5tanNcIjtcbmltcG9ydCB7XG4gIHNldFJhd1JlcXVlc3Rcbn0gZnJvbSBcIi4vY2h1bmstM0dKQjRKREYubWpzXCI7XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvQ2xpZW50UmVxdWVzdC9pbmRleC50c1xuaW1wb3J0IGh0dHAyIGZyb20gXCJodHRwXCI7XG5pbXBvcnQgaHR0cHMyIGZyb20gXCJodHRwc1wiO1xuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL0NsaWVudFJlcXVlc3QvTW9ja0h0dHBTb2NrZXQudHNcbmltcG9ydCBuZXQyIGZyb20gXCJuZXRcIjtcbmltcG9ydCB7XG4gIEhUVFBQYXJzZXJcbn0gZnJvbSBcIl9odHRwX2NvbW1vblwiO1xuaW1wb3J0IHsgU1RBVFVTX0NPREVTLCBJbmNvbWluZ01lc3NhZ2UsIFNlcnZlclJlc3BvbnNlIH0gZnJvbSBcImh0dHBcIjtcbmltcG9ydCB7IFJlYWRhYmxlIH0gZnJvbSBcInN0cmVhbVwiO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIm91dHZhcmlhbnRcIjtcblxuLy8gc3JjL2ludGVyY2VwdG9ycy9Tb2NrZXQvTW9ja1NvY2tldC50c1xuaW1wb3J0IG5ldCBmcm9tIFwibmV0XCI7XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvU29ja2V0L3V0aWxzL25vcm1hbGl6ZVNvY2tldFdyaXRlQXJncy50c1xuZnVuY3Rpb24gbm9ybWFsaXplU29ja2V0V3JpdGVBcmdzKGFyZ3MpIHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IFthcmdzWzBdLCB2b2lkIDAsIHZvaWQgMF07XG4gIGlmICh0eXBlb2YgYXJnc1sxXSA9PT0gXCJzdHJpbmdcIikge1xuICAgIG5vcm1hbGl6ZWRbMV0gPSBhcmdzWzFdO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBhcmdzWzFdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBub3JtYWxpemVkWzJdID0gYXJnc1sxXTtcbiAgfVxuICBpZiAodHlwZW9mIGFyZ3NbMl0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIG5vcm1hbGl6ZWRbMl0gPSBhcmdzWzJdO1xuICB9XG4gIHJldHVybiBub3JtYWxpemVkO1xufVxuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL1NvY2tldC9Nb2NrU29ja2V0LnRzXG52YXIgTW9ja1NvY2tldCA9IGNsYXNzIGV4dGVuZHMgbmV0LlNvY2tldCB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5jb25uZWN0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5jb25uZWN0KCk7XG4gICAgdGhpcy5fZmluYWwgPSAoY2FsbGJhY2spID0+IHtcbiAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgIH07XG4gIH1cbiAgY29ubmVjdCgpIHtcbiAgICB0aGlzLmNvbm5lY3RpbmcgPSB0cnVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHdyaXRlKC4uLmFyZ3MpIHtcbiAgICBjb25zdCBbY2h1bmssIGVuY29kaW5nLCBjYWxsYmFja10gPSBub3JtYWxpemVTb2NrZXRXcml0ZUFyZ3MoXG4gICAgICBhcmdzXG4gICAgKTtcbiAgICB0aGlzLm9wdGlvbnMud3JpdGUoY2h1bmssIGVuY29kaW5nLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgZW5kKC4uLmFyZ3MpIHtcbiAgICBjb25zdCBbY2h1bmssIGVuY29kaW5nLCBjYWxsYmFja10gPSBub3JtYWxpemVTb2NrZXRXcml0ZUFyZ3MoXG4gICAgICBhcmdzXG4gICAgKTtcbiAgICB0aGlzLm9wdGlvbnMud3JpdGUoY2h1bmssIGVuY29kaW5nLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHN1cGVyLmVuZC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxuICBwdXNoKGNodW5rLCBlbmNvZGluZykge1xuICAgIHRoaXMub3B0aW9ucy5yZWFkKGNodW5rLCBlbmNvZGluZyk7XG4gICAgcmV0dXJuIHN1cGVyLnB1c2goY2h1bmssIGVuY29kaW5nKTtcbiAgfVxufTtcblxuLy8gc3JjL2ludGVyY2VwdG9ycy9Tb2NrZXQvdXRpbHMvYmFzZVVybEZyb21Db25uZWN0aW9uT3B0aW9ucy50c1xuZnVuY3Rpb24gYmFzZVVybEZyb21Db25uZWN0aW9uT3B0aW9ucyhvcHRpb25zKSB7XG4gIGlmIChcImhyZWZcIiBpbiBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBVUkwob3B0aW9ucy5ocmVmKTtcbiAgfVxuICBjb25zdCBwcm90b2NvbCA9IG9wdGlvbnMucG9ydCA9PT0gNDQzID8gXCJodHRwczpcIiA6IFwiaHR0cDpcIjtcbiAgY29uc3QgaG9zdCA9IG9wdGlvbnMuaG9zdDtcbiAgY29uc3QgdXJsID0gbmV3IFVSTChgJHtwcm90b2NvbH0vLyR7aG9zdH1gKTtcbiAgaWYgKG9wdGlvbnMucG9ydCkge1xuICAgIHVybC5wb3J0ID0gb3B0aW9ucy5wb3J0LnRvU3RyaW5nKCk7XG4gIH1cbiAgaWYgKG9wdGlvbnMucGF0aCkge1xuICAgIHVybC5wYXRobmFtZSA9IG9wdGlvbnMucGF0aDtcbiAgfVxuICBpZiAob3B0aW9ucy5hdXRoKSB7XG4gICAgY29uc3QgW3VzZXJuYW1lLCBwYXNzd29yZF0gPSBvcHRpb25zLmF1dGguc3BsaXQoXCI6XCIpO1xuICAgIHVybC51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgIHVybC5wYXNzd29yZCA9IHBhc3N3b3JkO1xuICB9XG4gIHJldHVybiB1cmw7XG59XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvQ2xpZW50UmVxdWVzdC91dGlscy9yZWNvcmRSYXdIZWFkZXJzLnRzXG52YXIga1Jhd0hlYWRlcnMgPSBTeW1ib2woXCJrUmF3SGVhZGVyc1wiKTtcbnZhciBrUmVzdG9yZVBhdGNoZXMgPSBTeW1ib2woXCJrUmVzdG9yZVBhdGNoZXNcIik7XG5mdW5jdGlvbiByZWNvcmRSYXdIZWFkZXIoaGVhZGVycywgYXJncywgYmVoYXZpb3IpIHtcbiAgZW5zdXJlUmF3SGVhZGVyc1N5bWJvbChoZWFkZXJzLCBbXSk7XG4gIGNvbnN0IHJhd0hlYWRlcnMgPSBSZWZsZWN0LmdldChoZWFkZXJzLCBrUmF3SGVhZGVycyk7XG4gIGlmIChiZWhhdmlvciA9PT0gXCJzZXRcIikge1xuICAgIGZvciAobGV0IGluZGV4ID0gcmF3SGVhZGVycy5sZW5ndGggLSAxOyBpbmRleCA+PSAwOyBpbmRleC0tKSB7XG4gICAgICBpZiAocmF3SGVhZGVyc1tpbmRleF1bMF0udG9Mb3dlckNhc2UoKSA9PT0gYXJnc1swXS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgIHJhd0hlYWRlcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmF3SGVhZGVycy5wdXNoKGFyZ3MpO1xufVxuZnVuY3Rpb24gZW5zdXJlUmF3SGVhZGVyc1N5bWJvbChoZWFkZXJzLCByYXdIZWFkZXJzKSB7XG4gIGlmIChSZWZsZWN0LmhhcyhoZWFkZXJzLCBrUmF3SGVhZGVycykpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZGVmaW5lUmF3SGVhZGVyc1N5bWJvbChoZWFkZXJzLCByYXdIZWFkZXJzKTtcbn1cbmZ1bmN0aW9uIGRlZmluZVJhd0hlYWRlcnNTeW1ib2woaGVhZGVycywgcmF3SGVhZGVycykge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaGVhZGVycywga1Jhd0hlYWRlcnMsIHtcbiAgICB2YWx1ZTogcmF3SGVhZGVycyxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAvLyBNYXJrIHRoZSBzeW1ib2wgYXMgY29uZmlndXJhYmxlIHNvIGl0cyB2YWx1ZSBjYW4gYmUgb3ZlcnJpZGRlbi5cbiAgICAvLyBPdmVycmlkZXMgaGFwcGVuIHdoZW4gbWVyZ2luZyByYXcgaGVhZGVycyBmcm9tIG11bHRpcGxlIHNvdXJjZXMuXG4gICAgLy8gRS5nLiBuZXcgUmVxdWVzdChuZXcgUmVxdWVzdCh1cmwsIHsgaGVhZGVycyB9KSwgeyBoZWFkZXJzIH0pXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufVxuZnVuY3Rpb24gcmVjb3JkUmF3RmV0Y2hIZWFkZXJzKCkge1xuICBpZiAoUmVmbGVjdC5nZXQoSGVhZGVycywga1Jlc3RvcmVQYXRjaGVzKSkge1xuICAgIHJldHVybiBSZWZsZWN0LmdldChIZWFkZXJzLCBrUmVzdG9yZVBhdGNoZXMpO1xuICB9XG4gIGNvbnN0IHtcbiAgICBIZWFkZXJzOiBPcmlnaW5hbEhlYWRlcnMsXG4gICAgUmVxdWVzdDogT3JpZ2luYWxSZXF1ZXN0LFxuICAgIFJlc3BvbnNlOiBPcmlnaW5hbFJlc3BvbnNlXG4gIH0gPSBnbG9iYWxUaGlzO1xuICBjb25zdCB7IHNldCwgYXBwZW5kLCBkZWxldGU6IGhlYWRlcnNEZWxldGVNZXRob2QgfSA9IEhlYWRlcnMucHJvdG90eXBlO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSGVhZGVycywga1Jlc3RvcmVQYXRjaGVzLCB7XG4gICAgdmFsdWU6ICgpID0+IHtcbiAgICAgIEhlYWRlcnMucHJvdG90eXBlLnNldCA9IHNldDtcbiAgICAgIEhlYWRlcnMucHJvdG90eXBlLmFwcGVuZCA9IGFwcGVuZDtcbiAgICAgIEhlYWRlcnMucHJvdG90eXBlLmRlbGV0ZSA9IGhlYWRlcnNEZWxldGVNZXRob2Q7XG4gICAgICBnbG9iYWxUaGlzLkhlYWRlcnMgPSBPcmlnaW5hbEhlYWRlcnM7XG4gICAgICBnbG9iYWxUaGlzLlJlcXVlc3QgPSBPcmlnaW5hbFJlcXVlc3Q7XG4gICAgICBnbG9iYWxUaGlzLlJlc3BvbnNlID0gT3JpZ2luYWxSZXNwb25zZTtcbiAgICAgIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkoSGVhZGVycywga1Jlc3RvcmVQYXRjaGVzKTtcbiAgICB9LFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIC8qKlxuICAgICAqIEBub3RlIE1hcmsgdGhpcyBwcm9wZXJ0eSBhcyBjb25maWd1cmFibGVcbiAgICAgKiBzbyB3ZSBjYW4gZGVsZXRlIGl0IHVzaW5nIGBSZWZsZWN0LmRlbGV0ZWAgZHVyaW5nIGNsZWFudXAuXG4gICAgICovXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsVGhpcywgXCJIZWFkZXJzXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIHZhbHVlOiBuZXcgUHJveHkoSGVhZGVycywge1xuICAgICAgY29uc3RydWN0KHRhcmdldCwgYXJncywgbmV3VGFyZ2V0KSB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnNJbml0ID0gYXJnc1swXSB8fCBbXTtcbiAgICAgICAgaWYgKGhlYWRlcnNJbml0IGluc3RhbmNlb2YgSGVhZGVycyAmJiBSZWZsZWN0LmhhcyhoZWFkZXJzSW5pdCwga1Jhd0hlYWRlcnMpKSB7XG4gICAgICAgICAgY29uc3QgaGVhZGVyczIgPSBSZWZsZWN0LmNvbnN0cnVjdChcbiAgICAgICAgICAgIHRhcmdldCxcbiAgICAgICAgICAgIFtSZWZsZWN0LmdldChoZWFkZXJzSW5pdCwga1Jhd0hlYWRlcnMpXSxcbiAgICAgICAgICAgIG5ld1RhcmdldFxuICAgICAgICAgICk7XG4gICAgICAgICAgZW5zdXJlUmF3SGVhZGVyc1N5bWJvbChoZWFkZXJzMiwgW1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAbm90ZSBTcHJlYWQgdGhlIHJldHJpZXZlZCBoZWFkZXJzIHRvIGNsb25lIHRoZW0uXG4gICAgICAgICAgICAgKiBUaGlzIHByZXZlbnRzIG11bHRpcGxlIEhlYWRlcnMgaW5zdGFuY2VzIGZyb20gcG9pbnRpbmdcbiAgICAgICAgICAgICAqIGF0IHRoZSBzYW1lIGludGVybmFsIFwicmF3SGVhZGVyc1wiIGFycmF5LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICAuLi5SZWZsZWN0LmdldChoZWFkZXJzSW5pdCwga1Jhd0hlYWRlcnMpXG4gICAgICAgICAgXSk7XG4gICAgICAgICAgcmV0dXJuIGhlYWRlcnMyO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBSZWZsZWN0LmNvbnN0cnVjdCh0YXJnZXQsIGFyZ3MsIG5ld1RhcmdldCk7XG4gICAgICAgIGlmICghUmVmbGVjdC5oYXMoaGVhZGVycywga1Jhd0hlYWRlcnMpKSB7XG4gICAgICAgICAgY29uc3QgcmF3SGVhZGVyc0luaXQgPSBBcnJheS5pc0FycmF5KGhlYWRlcnNJbml0KSA/IGhlYWRlcnNJbml0IDogT2JqZWN0LmVudHJpZXMoaGVhZGVyc0luaXQpO1xuICAgICAgICAgIGVuc3VyZVJhd0hlYWRlcnNTeW1ib2woaGVhZGVycywgcmF3SGVhZGVyc0luaXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoZWFkZXJzO1xuICAgICAgfVxuICAgIH0pXG4gIH0pO1xuICBIZWFkZXJzLnByb3RvdHlwZS5zZXQgPSBuZXcgUHJveHkoSGVhZGVycy5wcm90b3R5cGUuc2V0LCB7XG4gICAgYXBwbHkodGFyZ2V0LCB0aGlzQXJnLCBhcmdzKSB7XG4gICAgICByZWNvcmRSYXdIZWFkZXIodGhpc0FyZywgYXJncywgXCJzZXRcIik7XG4gICAgICByZXR1cm4gUmVmbGVjdC5hcHBseSh0YXJnZXQsIHRoaXNBcmcsIGFyZ3MpO1xuICAgIH1cbiAgfSk7XG4gIEhlYWRlcnMucHJvdG90eXBlLmFwcGVuZCA9IG5ldyBQcm94eShIZWFkZXJzLnByb3RvdHlwZS5hcHBlbmQsIHtcbiAgICBhcHBseSh0YXJnZXQsIHRoaXNBcmcsIGFyZ3MpIHtcbiAgICAgIHJlY29yZFJhd0hlYWRlcih0aGlzQXJnLCBhcmdzLCBcImFwcGVuZFwiKTtcbiAgICAgIHJldHVybiBSZWZsZWN0LmFwcGx5KHRhcmdldCwgdGhpc0FyZywgYXJncyk7XG4gICAgfVxuICB9KTtcbiAgSGVhZGVycy5wcm90b3R5cGUuZGVsZXRlID0gbmV3IFByb3h5KEhlYWRlcnMucHJvdG90eXBlLmRlbGV0ZSwge1xuICAgIGFwcGx5KHRhcmdldCwgdGhpc0FyZywgYXJncykge1xuICAgICAgY29uc3QgcmF3SGVhZGVycyA9IFJlZmxlY3QuZ2V0KHRoaXNBcmcsIGtSYXdIZWFkZXJzKTtcbiAgICAgIGlmIChyYXdIZWFkZXJzKSB7XG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gcmF3SGVhZGVycy5sZW5ndGggLSAxOyBpbmRleCA+PSAwOyBpbmRleC0tKSB7XG4gICAgICAgICAgaWYgKHJhd0hlYWRlcnNbaW5kZXhdWzBdLnRvTG93ZXJDYXNlKCkgPT09IGFyZ3NbMF0udG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgcmF3SGVhZGVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIFJlZmxlY3QuYXBwbHkodGFyZ2V0LCB0aGlzQXJnLCBhcmdzKTtcbiAgICB9XG4gIH0pO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsVGhpcywgXCJSZXF1ZXN0XCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIHZhbHVlOiBuZXcgUHJveHkoUmVxdWVzdCwge1xuICAgICAgY29uc3RydWN0KHRhcmdldCwgYXJncywgbmV3VGFyZ2V0KSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBSZWZsZWN0LmNvbnN0cnVjdCh0YXJnZXQsIGFyZ3MsIG5ld1RhcmdldCk7XG4gICAgICAgIGNvbnN0IGluZmVycmVkUmF3SGVhZGVycyA9IFtdO1xuICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09IFwib2JqZWN0XCIgJiYgYXJnc1swXS5oZWFkZXJzICE9IG51bGwpIHtcbiAgICAgICAgICBpbmZlcnJlZFJhd0hlYWRlcnMucHVzaCguLi5pbmZlclJhd0hlYWRlcnMoYXJnc1swXS5oZWFkZXJzKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzFdID09PSBcIm9iamVjdFwiICYmIGFyZ3NbMV0uaGVhZGVycyAhPSBudWxsKSB7XG4gICAgICAgICAgaW5mZXJyZWRSYXdIZWFkZXJzLnB1c2goLi4uaW5mZXJSYXdIZWFkZXJzKGFyZ3NbMV0uaGVhZGVycykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmZlcnJlZFJhd0hlYWRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGVuc3VyZVJhd0hlYWRlcnNTeW1ib2wocmVxdWVzdC5oZWFkZXJzLCBpbmZlcnJlZFJhd0hlYWRlcnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXF1ZXN0O1xuICAgICAgfVxuICAgIH0pXG4gIH0pO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsVGhpcywgXCJSZXNwb25zZVwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICB2YWx1ZTogbmV3IFByb3h5KFJlc3BvbnNlLCB7XG4gICAgICBjb25zdHJ1Y3QodGFyZ2V0LCBhcmdzLCBuZXdUYXJnZXQpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBSZWZsZWN0LmNvbnN0cnVjdCh0YXJnZXQsIGFyZ3MsIG5ld1RhcmdldCk7XG4gICAgICAgIGlmICh0eXBlb2YgYXJnc1sxXSA9PT0gXCJvYmplY3RcIiAmJiBhcmdzWzFdLmhlYWRlcnMgIT0gbnVsbCkge1xuICAgICAgICAgIGVuc3VyZVJhd0hlYWRlcnNTeW1ib2woXG4gICAgICAgICAgICByZXNwb25zZS5oZWFkZXJzLFxuICAgICAgICAgICAgaW5mZXJSYXdIZWFkZXJzKGFyZ3NbMV0uaGVhZGVycylcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgIH1cbiAgICB9KVxuICB9KTtcbn1cbmZ1bmN0aW9uIHJlc3RvcmVIZWFkZXJzUHJvdG90eXBlKCkge1xuICBpZiAoIVJlZmxlY3QuZ2V0KEhlYWRlcnMsIGtSZXN0b3JlUGF0Y2hlcykpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgUmVmbGVjdC5nZXQoSGVhZGVycywga1Jlc3RvcmVQYXRjaGVzKSgpO1xufVxuZnVuY3Rpb24gZ2V0UmF3RmV0Y2hIZWFkZXJzKGhlYWRlcnMpIHtcbiAgaWYgKCFSZWZsZWN0LmhhcyhoZWFkZXJzLCBrUmF3SGVhZGVycykpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShoZWFkZXJzLmVudHJpZXMoKSk7XG4gIH1cbiAgY29uc3QgcmF3SGVhZGVycyA9IFJlZmxlY3QuZ2V0KGhlYWRlcnMsIGtSYXdIZWFkZXJzKTtcbiAgcmV0dXJuIHJhd0hlYWRlcnMubGVuZ3RoID4gMCA/IHJhd0hlYWRlcnMgOiBBcnJheS5mcm9tKGhlYWRlcnMuZW50cmllcygpKTtcbn1cbmZ1bmN0aW9uIGluZmVyUmF3SGVhZGVycyhoZWFkZXJzKSB7XG4gIGlmIChoZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycykge1xuICAgIHJldHVybiBSZWZsZWN0LmdldChoZWFkZXJzLCBrUmF3SGVhZGVycykgfHwgW107XG4gIH1cbiAgcmV0dXJuIFJlZmxlY3QuZ2V0KG5ldyBIZWFkZXJzKGhlYWRlcnMpLCBrUmF3SGVhZGVycyk7XG59XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvQ2xpZW50UmVxdWVzdC9Nb2NrSHR0cFNvY2tldC50c1xudmFyIGtSZXF1ZXN0SWQgPSBTeW1ib2woXCJrUmVxdWVzdElkXCIpO1xudmFyIE1vY2tIdHRwU29ja2V0ID0gY2xhc3MgZXh0ZW5kcyBNb2NrU29ja2V0IHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHN1cGVyKHtcbiAgICAgIHdyaXRlOiAoY2h1bmssIGVuY29kaW5nLCBjYWxsYmFjaykgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aGlzLnNvY2tldFN0YXRlICE9PSBcInBhc3N0aHJvdWdoXCIpIHtcbiAgICAgICAgICB0aGlzLndyaXRlQnVmZmVyLnB1c2goW2NodW5rLCBlbmNvZGluZywgY2FsbGJhY2tdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2h1bmspIHtcbiAgICAgICAgICBpZiAodGhpcy5zb2NrZXRTdGF0ZSA9PT0gXCJwYXNzdGhyb3VnaFwiKSB7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLm9yaWdpbmFsU29ja2V0KSA9PSBudWxsID8gdm9pZCAwIDogX2Eud3JpdGUoY2h1bmssIGVuY29kaW5nLCBjYWxsYmFjayk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMucmVxdWVzdFBhcnNlci5leGVjdXRlKFxuICAgICAgICAgICAgQnVmZmVyLmlzQnVmZmVyKGNodW5rKSA/IGNodW5rIDogQnVmZmVyLmZyb20oY2h1bmssIGVuY29kaW5nKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICByZWFkOiAoY2h1bmspID0+IHtcbiAgICAgICAgaWYgKGNodW5rICE9PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5yZXNwb25zZVBhcnNlci5leGVjdXRlKFxuICAgICAgICAgICAgQnVmZmVyLmlzQnVmZmVyKGNodW5rKSA/IGNodW5rIDogQnVmZmVyLmZyb20oY2h1bmspXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMucmVxdWVzdFJhd0hlYWRlcnNCdWZmZXIgPSBbXTtcbiAgICB0aGlzLnJlc3BvbnNlUmF3SGVhZGVyc0J1ZmZlciA9IFtdO1xuICAgIHRoaXMud3JpdGVCdWZmZXIgPSBbXTtcbiAgICB0aGlzLnNvY2tldFN0YXRlID0gXCJ1bmtub3duXCI7XG4gICAgLyoqXG4gICAgICogVGhpcyBjYWxsYmFjayBtaWdodCBiZSBjYWxsZWQgd2hlbiB0aGUgcmVxdWVzdCBpcyBcInNsb3dcIjpcbiAgICAgKiAtIFJlcXVlc3QgaGVhZGVycyB3ZXJlIGZyYWdtZW50ZWQgYWNyb3NzIG11bHRpcGxlIFRDUCBwYWNrYWdlcztcbiAgICAgKiAtIFJlcXVlc3QgaGVhZGVycyB3ZXJlIHRvbyBsYXJnZSB0byBiZSBwcm9jZXNzZWQgaW4gYSBzaW5nbGUgcnVuXG4gICAgICogKGUuZy4gbW9yZSB0aGFuIDMwIHJlcXVlc3QgaGVhZGVycykuXG4gICAgICogQG5vdGUgVGhpcyBpcyBjYWxsZWQgYmVmb3JlIHJlcXVlc3Qgc3RhcnQuXG4gICAgICovXG4gICAgdGhpcy5vblJlcXVlc3RIZWFkZXJzID0gKHJhd0hlYWRlcnMpID0+IHtcbiAgICAgIHRoaXMucmVxdWVzdFJhd0hlYWRlcnNCdWZmZXIucHVzaCguLi5yYXdIZWFkZXJzKTtcbiAgICB9O1xuICAgIHRoaXMub25SZXF1ZXN0U3RhcnQgPSAodmVyc2lvbk1ham9yLCB2ZXJzaW9uTWlub3IsIHJhd0hlYWRlcnMsIF8sIHBhdGgsIF9fLCBfX18sIF9fX18sIHNob3VsZEtlZXBBbGl2ZSkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgdGhpcy5zaG91bGRLZWVwQWxpdmUgPSBzaG91bGRLZWVwQWxpdmU7XG4gICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHBhdGggfHwgXCJcIiwgdGhpcy5iYXNlVXJsKTtcbiAgICAgIGNvbnN0IG1ldGhvZCA9ICgoX2EgPSB0aGlzLmNvbm5lY3Rpb25PcHRpb25zLm1ldGhvZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnRvVXBwZXJDYXNlKCkpIHx8IFwiR0VUXCI7XG4gICAgICBjb25zdCBoZWFkZXJzID0gRmV0Y2hSZXNwb25zZS5wYXJzZVJhd0hlYWRlcnMoW1xuICAgICAgICAuLi50aGlzLnJlcXVlc3RSYXdIZWFkZXJzQnVmZmVyLFxuICAgICAgICAuLi5yYXdIZWFkZXJzIHx8IFtdXG4gICAgICBdKTtcbiAgICAgIHRoaXMucmVxdWVzdFJhd0hlYWRlcnNCdWZmZXIubGVuZ3RoID0gMDtcbiAgICAgIGNvbnN0IGNhbkhhdmVCb2R5ID0gbWV0aG9kICE9PSBcIkdFVFwiICYmIG1ldGhvZCAhPT0gXCJIRUFEXCI7XG4gICAgICBpZiAodXJsLnVzZXJuYW1lIHx8IHVybC5wYXNzd29yZCkge1xuICAgICAgICBpZiAoIWhlYWRlcnMuaGFzKFwiYXV0aG9yaXphdGlvblwiKSkge1xuICAgICAgICAgIGhlYWRlcnMuc2V0KFwiYXV0aG9yaXphdGlvblwiLCBgQmFzaWMgJHt1cmwudXNlcm5hbWV9OiR7dXJsLnBhc3N3b3JkfWApO1xuICAgICAgICB9XG4gICAgICAgIHVybC51c2VybmFtZSA9IFwiXCI7XG4gICAgICAgIHVybC5wYXNzd29yZCA9IFwiXCI7XG4gICAgICB9XG4gICAgICB0aGlzLnJlcXVlc3RTdHJlYW0gPSBuZXcgUmVhZGFibGUoe1xuICAgICAgICAvKipcbiAgICAgICAgICogQG5vdGUgUHJvdmlkZSB0aGUgYHJlYWQoKWAgbWV0aG9kIHNvIGEgYFJlYWRhYmxlYCBjb3VsZCBiZVxuICAgICAgICAgKiB1c2VkIGFzIHRoZSBhY3R1YWwgcmVxdWVzdCBib2R5ICh0aGUgc3RyZWFtIGNhbGxzIFwicmVhZCgpXCIpLlxuICAgICAgICAgKiBXZSBjb250cm9sIHRoZSBxdWV1ZSBpbiB0aGUgb25SZXF1ZXN0Qm9keS9FbmQgZnVuY3Rpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgcmVhZDogKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZmx1c2hXcml0ZUJ1ZmZlcigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHJlcXVlc3RJZCA9IGNyZWF0ZVJlcXVlc3RJZCgpO1xuICAgICAgdGhpcy5yZXF1ZXN0ID0gbmV3IFJlcXVlc3QodXJsLCB7XG4gICAgICAgIG1ldGhvZCxcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgY3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIixcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBVbmRvY3VtZW50ZWQgRmV0Y2ggcHJvcGVydHkuXG4gICAgICAgIGR1cGxleDogY2FuSGF2ZUJvZHkgPyBcImhhbGZcIiA6IHZvaWQgMCxcbiAgICAgICAgYm9keTogY2FuSGF2ZUJvZHkgPyBSZWFkYWJsZS50b1dlYih0aGlzLnJlcXVlc3RTdHJlYW0pIDogbnVsbFxuICAgICAgfSk7XG4gICAgICBSZWZsZWN0LnNldCh0aGlzLnJlcXVlc3QsIGtSZXF1ZXN0SWQsIHJlcXVlc3RJZCk7XG4gICAgICBzZXRSYXdSZXF1ZXN0KHRoaXMucmVxdWVzdCwgUmVmbGVjdC5nZXQodGhpcywgXCJfaHR0cE1lc3NhZ2VcIikpO1xuICAgICAgc2V0UmF3UmVxdWVzdEJvZHlTdHJlYW0odGhpcy5yZXF1ZXN0LCB0aGlzLnJlcXVlc3RTdHJlYW0pO1xuICAgICAgaWYgKHRoaXMucmVxdWVzdC5oZWFkZXJzLmhhcyhJTlRFUk5BTF9SRVFVRVNUX0lEX0hFQURFUl9OQU1FKSkge1xuICAgICAgICB0aGlzLnBhc3N0aHJvdWdoKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMub25SZXF1ZXN0KHtcbiAgICAgICAgcmVxdWVzdElkLFxuICAgICAgICByZXF1ZXN0OiB0aGlzLnJlcXVlc3QsXG4gICAgICAgIHNvY2tldDogdGhpc1xuICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGlzIGNhbGxiYWNrIG1pZ2h0IGJlIGNhbGxlZCB3aGVuIHRoZSByZXNwb25zZSBpcyBcInNsb3dcIjpcbiAgICAgKiAtIFJlc3BvbnNlIGhlYWRlcnMgd2VyZSBmcmFnbWVudGVkIGFjcm9zcyBtdWx0aXBsZSBUQ1AgcGFja2FnZXM7XG4gICAgICogLSBSZXNwb25zZSBoZWFkZXJzIHdlcmUgdG9vIGxhcmdlIHRvIGJlIHByb2Nlc3NlZCBpbiBhIHNpbmdsZSBydW5cbiAgICAgKiAoZS5nLiBtb3JlIHRoYW4gMzAgcmVzcG9uc2UgaGVhZGVycykuXG4gICAgICogQG5vdGUgVGhpcyBpcyBjYWxsZWQgYmVmb3JlIHJlc3BvbnNlIHN0YXJ0LlxuICAgICAqL1xuICAgIHRoaXMub25SZXNwb25zZUhlYWRlcnMgPSAocmF3SGVhZGVycykgPT4ge1xuICAgICAgdGhpcy5yZXNwb25zZVJhd0hlYWRlcnNCdWZmZXIucHVzaCguLi5yYXdIZWFkZXJzKTtcbiAgICB9O1xuICAgIHRoaXMub25SZXNwb25zZVN0YXJ0ID0gKHZlcnNpb25NYWpvciwgdmVyc2lvbk1pbm9yLCByYXdIZWFkZXJzLCBtZXRob2QsIHVybCwgc3RhdHVzLCBzdGF0dXNUZXh0KSA9PiB7XG4gICAgICBjb25zdCBoZWFkZXJzID0gRmV0Y2hSZXNwb25zZS5wYXJzZVJhd0hlYWRlcnMoW1xuICAgICAgICAuLi50aGlzLnJlc3BvbnNlUmF3SGVhZGVyc0J1ZmZlcixcbiAgICAgICAgLi4ucmF3SGVhZGVycyB8fCBbXVxuICAgICAgXSk7XG4gICAgICB0aGlzLnJlc3BvbnNlUmF3SGVhZGVyc0J1ZmZlci5sZW5ndGggPSAwO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBuZXcgRmV0Y2hSZXNwb25zZShcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBub3RlIFRoZSBGZXRjaCBBUEkgcmVzcG9uc2UgaW5zdGFuY2UgZXhwb3NlZCB0byB0aGUgY29uc3VtZXJcbiAgICAgICAgICogaXMgY3JlYXRlZCBvdmVyIHRoZSByZXNwb25zZSBzdHJlYW0gb2YgdGhlIEhUVFAgcGFyc2VyLiBJdCBpcyBOT1RcbiAgICAgICAgICogcmVsYXRlZCB0byB0aGUgU29ja2V0IGluc3RhbmNlLiBUaGlzIHdheSwgeW91IGNhbiByZWFkIHJlc3BvbnNlIGJvZHlcbiAgICAgICAgICogaW4gcmVzcG9uc2UgbGlzdGVuZXIgd2hpbGUgdGhlIFNvY2tldCBpbnN0YW5jZSBkZWxheXMgdGhlIGVtaXNzaW9uXG4gICAgICAgICAqIG9mIFwiZW5kXCIgYW5kIG90aGVyIGV2ZW50cyB1bnRpbCB0aG9zZSByZXNwb25zZSBsaXN0ZW5lcnMgYXJlIGZpbmlzaGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgRmV0Y2hSZXNwb25zZS5pc1Jlc3BvbnNlV2l0aEJvZHkoc3RhdHVzKSA/IFJlYWRhYmxlLnRvV2ViKFxuICAgICAgICAgIHRoaXMucmVzcG9uc2VTdHJlYW0gPSBuZXcgUmVhZGFibGUoeyByZWFkKCkge1xuICAgICAgICAgIH0gfSlcbiAgICAgICAgKSA6IG51bGwsXG4gICAgICAgIHtcbiAgICAgICAgICB1cmwsXG4gICAgICAgICAgc3RhdHVzLFxuICAgICAgICAgIHN0YXR1c1RleHQsXG4gICAgICAgICAgaGVhZGVyc1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgaW52YXJpYW50KFxuICAgICAgICB0aGlzLnJlcXVlc3QsXG4gICAgICAgIFwiRmFpbGVkIHRvIGhhbmRsZSBhIHJlc3BvbnNlOiByZXF1ZXN0IGRvZXMgbm90IGV4aXN0XCJcbiAgICAgICk7XG4gICAgICBGZXRjaFJlc3BvbnNlLnNldFVybCh0aGlzLnJlcXVlc3QudXJsLCByZXNwb25zZSk7XG4gICAgICBpZiAodGhpcy5yZXF1ZXN0LmhlYWRlcnMuaGFzKElOVEVSTkFMX1JFUVVFU1RfSURfSEVBREVSX05BTUUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVzcG9uc2VMaXN0ZW5lcnNQcm9taXNlID0gdGhpcy5vblJlc3BvbnNlKHtcbiAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgIGlzTW9ja2VkUmVzcG9uc2U6IHRoaXMuc29ja2V0U3RhdGUgPT09IFwibW9ja1wiLFxuICAgICAgICByZXF1ZXN0SWQ6IFJlZmxlY3QuZ2V0KHRoaXMucmVxdWVzdCwga1JlcXVlc3RJZCksXG4gICAgICAgIHJlcXVlc3Q6IHRoaXMucmVxdWVzdCxcbiAgICAgICAgc29ja2V0OiB0aGlzXG4gICAgICB9KTtcbiAgICB9O1xuICAgIHRoaXMuY29ubmVjdGlvbk9wdGlvbnMgPSBvcHRpb25zLmNvbm5lY3Rpb25PcHRpb25zO1xuICAgIHRoaXMuY3JlYXRlQ29ubmVjdGlvbiA9IG9wdGlvbnMuY3JlYXRlQ29ubmVjdGlvbjtcbiAgICB0aGlzLm9uUmVxdWVzdCA9IG9wdGlvbnMub25SZXF1ZXN0O1xuICAgIHRoaXMub25SZXNwb25zZSA9IG9wdGlvbnMub25SZXNwb25zZTtcbiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsRnJvbUNvbm5lY3Rpb25PcHRpb25zKHRoaXMuY29ubmVjdGlvbk9wdGlvbnMpO1xuICAgIHRoaXMucmVxdWVzdFBhcnNlciA9IG5ldyBIVFRQUGFyc2VyKCk7XG4gICAgdGhpcy5yZXF1ZXN0UGFyc2VyLmluaXRpYWxpemUoSFRUUFBhcnNlci5SRVFVRVNULCB7fSk7XG4gICAgdGhpcy5yZXF1ZXN0UGFyc2VyW0hUVFBQYXJzZXIua09uSGVhZGVyc10gPSB0aGlzLm9uUmVxdWVzdEhlYWRlcnMuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlcXVlc3RQYXJzZXJbSFRUUFBhcnNlci5rT25IZWFkZXJzQ29tcGxldGVdID0gdGhpcy5vblJlcXVlc3RTdGFydC5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVxdWVzdFBhcnNlcltIVFRQUGFyc2VyLmtPbkJvZHldID0gdGhpcy5vblJlcXVlc3RCb2R5LmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZXF1ZXN0UGFyc2VyW0hUVFBQYXJzZXIua09uTWVzc2FnZUNvbXBsZXRlXSA9IHRoaXMub25SZXF1ZXN0RW5kLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZXNwb25zZVBhcnNlciA9IG5ldyBIVFRQUGFyc2VyKCk7XG4gICAgdGhpcy5yZXNwb25zZVBhcnNlci5pbml0aWFsaXplKEhUVFBQYXJzZXIuUkVTUE9OU0UsIHt9KTtcbiAgICB0aGlzLnJlc3BvbnNlUGFyc2VyW0hUVFBQYXJzZXIua09uSGVhZGVyc10gPSB0aGlzLm9uUmVzcG9uc2VIZWFkZXJzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZXNwb25zZVBhcnNlcltIVFRQUGFyc2VyLmtPbkhlYWRlcnNDb21wbGV0ZV0gPSB0aGlzLm9uUmVzcG9uc2VTdGFydC5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVzcG9uc2VQYXJzZXJbSFRUUFBhcnNlci5rT25Cb2R5XSA9IHRoaXMub25SZXNwb25zZUJvZHkuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlc3BvbnNlUGFyc2VyW0hUVFBQYXJzZXIua09uTWVzc2FnZUNvbXBsZXRlXSA9IHRoaXMub25SZXNwb25zZUVuZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25jZShcImZpbmlzaFwiLCAoKSA9PiB0aGlzLnJlcXVlc3RQYXJzZXIuZnJlZSgpKTtcbiAgICBpZiAodGhpcy5iYXNlVXJsLnByb3RvY29sID09PSBcImh0dHBzOlwiKSB7XG4gICAgICBSZWZsZWN0LnNldCh0aGlzLCBcImVuY3J5cHRlZFwiLCB0cnVlKTtcbiAgICAgIFJlZmxlY3Quc2V0KHRoaXMsIFwiYXV0aG9yaXplZFwiLCBmYWxzZSk7XG4gICAgICBSZWZsZWN0LnNldCh0aGlzLCBcImdldFByb3RvY29sXCIsICgpID0+IFwiVExTdjEuM1wiKTtcbiAgICAgIFJlZmxlY3Quc2V0KHRoaXMsIFwiZ2V0U2Vzc2lvblwiLCAoKSA9PiB2b2lkIDApO1xuICAgICAgUmVmbGVjdC5zZXQodGhpcywgXCJpc1Nlc3Npb25SZXVzZWRcIiwgKCkgPT4gZmFsc2UpO1xuICAgIH1cbiAgfVxuICBlbWl0KGV2ZW50LCAuLi5hcmdzKSB7XG4gICAgY29uc3QgZW1pdEV2ZW50ID0gc3VwZXIuZW1pdC5iaW5kKHRoaXMsIGV2ZW50LCAuLi5hcmdzKTtcbiAgICBpZiAodGhpcy5yZXNwb25zZUxpc3RlbmVyc1Byb21pc2UpIHtcbiAgICAgIHRoaXMucmVzcG9uc2VMaXN0ZW5lcnNQcm9taXNlLmZpbmFsbHkoZW1pdEV2ZW50KTtcbiAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyQ291bnQoZXZlbnQpID4gMDtcbiAgICB9XG4gICAgcmV0dXJuIGVtaXRFdmVudCgpO1xuICB9XG4gIGRlc3Ryb3koZXJyb3IpIHtcbiAgICB0aGlzLnJlc3BvbnNlUGFyc2VyLmZyZWUoKTtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRoaXMuZW1pdChcImVycm9yXCIsIGVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLmRlc3Ryb3koZXJyb3IpO1xuICB9XG4gIC8qKlxuICAgKiBFc3RhYmxpc2ggdGhpcyBTb2NrZXQgY29ubmVjdGlvbiBhcy1pcyBhbmQgcGlwZVxuICAgKiBpdHMgZGF0YS9ldmVudHMgdGhyb3VnaCB0aGlzIFNvY2tldC5cbiAgICovXG4gIHBhc3N0aHJvdWdoKCkge1xuICAgIHRoaXMuc29ja2V0U3RhdGUgPSBcInBhc3N0aHJvdWdoXCI7XG4gICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNvY2tldCA9IHRoaXMuY3JlYXRlQ29ubmVjdGlvbigpO1xuICAgIHRoaXMub3JpZ2luYWxTb2NrZXQgPSBzb2NrZXQ7XG4gICAgaWYgKFwiX2hhbmRsZVwiIGluIHNvY2tldCkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX2hhbmRsZVwiLCB7XG4gICAgICAgIHZhbHVlOiBzb2NrZXQuX2hhbmRsZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLm9uY2UoXCJlcnJvclwiLCAoZXJyb3IpID0+IHtcbiAgICAgIHNvY2tldC5kZXN0cm95KGVycm9yKTtcbiAgICB9KTtcbiAgICB0aGlzLmFkZHJlc3MgPSBzb2NrZXQuYWRkcmVzcy5iaW5kKHNvY2tldCk7XG4gICAgbGV0IHdyaXRlQXJncztcbiAgICBsZXQgaGVhZGVyc1dyaXR0ZW4gPSBmYWxzZTtcbiAgICB3aGlsZSAod3JpdGVBcmdzID0gdGhpcy53cml0ZUJ1ZmZlci5zaGlmdCgpKSB7XG4gICAgICBpZiAod3JpdGVBcmdzICE9PSB2b2lkIDApIHtcbiAgICAgICAgaWYgKCFoZWFkZXJzV3JpdHRlbikge1xuICAgICAgICAgIGNvbnN0IFtjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrXSA9IHdyaXRlQXJncztcbiAgICAgICAgICBjb25zdCBjaHVua1N0cmluZyA9IGNodW5rLnRvU3RyaW5nKCk7XG4gICAgICAgICAgY29uc3QgY2h1bmtCZWZvcmVSZXF1ZXN0SGVhZGVycyA9IGNodW5rU3RyaW5nLnNsaWNlKFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIGNodW5rU3RyaW5nLmluZGV4T2YoXCJcXHJcXG5cIikgKyAyXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBjaHVua0FmdGVyUmVxdWVzdEhlYWRlcnMgPSBjaHVua1N0cmluZy5zbGljZShcbiAgICAgICAgICAgIGNodW5rLmluZGV4T2YoXCJcXHJcXG5cXHJcXG5cIilcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IHJhd1JlcXVlc3RIZWFkZXJzID0gZ2V0UmF3RmV0Y2hIZWFkZXJzKHRoaXMucmVxdWVzdC5oZWFkZXJzKTtcbiAgICAgICAgICBjb25zdCByZXF1ZXN0SGVhZGVyc1N0cmluZyA9IHJhd1JlcXVlc3RIZWFkZXJzLmZpbHRlcigoW25hbWVdKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpICE9PSBJTlRFUk5BTF9SRVFVRVNUX0lEX0hFQURFUl9OQU1FO1xuICAgICAgICAgIH0pLm1hcCgoW25hbWUsIHZhbHVlXSkgPT4gYCR7bmFtZX06ICR7dmFsdWV9YCkuam9pbihcIlxcclxcblwiKTtcbiAgICAgICAgICBjb25zdCBoZWFkZXJzQ2h1bmsgPSBgJHtjaHVua0JlZm9yZVJlcXVlc3RIZWFkZXJzfSR7cmVxdWVzdEhlYWRlcnNTdHJpbmd9JHtjaHVua0FmdGVyUmVxdWVzdEhlYWRlcnN9YDtcbiAgICAgICAgICBzb2NrZXQud3JpdGUoaGVhZGVyc0NodW5rLCBlbmNvZGluZywgY2FsbGJhY2spO1xuICAgICAgICAgIGhlYWRlcnNXcml0dGVuID0gdHJ1ZTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBzb2NrZXQud3JpdGUoLi4ud3JpdGVBcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKFJlZmxlY3QuZ2V0KHNvY2tldCwgXCJlbmNyeXB0ZWRcIikpIHtcbiAgICAgIGNvbnN0IHRsc1Byb3BlcnRpZXMgPSBbXG4gICAgICAgIFwiZW5jcnlwdGVkXCIsXG4gICAgICAgIFwiYXV0aG9yaXplZFwiLFxuICAgICAgICBcImdldFByb3RvY29sXCIsXG4gICAgICAgIFwiZ2V0U2Vzc2lvblwiLFxuICAgICAgICBcImlzU2Vzc2lvblJldXNlZFwiXG4gICAgICBdO1xuICAgICAgdGxzUHJvcGVydGllcy5mb3JFYWNoKChwcm9wZXJ0eU5hbWUpID0+IHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIHByb3BlcnR5TmFtZSwge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgZ2V0OiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IFJlZmxlY3QuZ2V0KHNvY2tldCwgcHJvcGVydHlOYW1lKTtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiA/IHZhbHVlLmJpbmQoc29ja2V0KSA6IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgc29ja2V0Lm9uKFwibG9va3VwXCIsICguLi5hcmdzKSA9PiB0aGlzLmVtaXQoXCJsb29rdXBcIiwgLi4uYXJncykpLm9uKFwiY29ubmVjdFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNvbm5lY3RpbmcgPSBzb2NrZXQuY29ubmVjdGluZztcbiAgICAgIHRoaXMuZW1pdChcImNvbm5lY3RcIik7XG4gICAgfSkub24oXCJzZWN1cmVDb25uZWN0XCIsICgpID0+IHRoaXMuZW1pdChcInNlY3VyZUNvbm5lY3RcIikpLm9uKFwic2VjdXJlXCIsICgpID0+IHRoaXMuZW1pdChcInNlY3VyZVwiKSkub24oXCJzZXNzaW9uXCIsIChzZXNzaW9uKSA9PiB0aGlzLmVtaXQoXCJzZXNzaW9uXCIsIHNlc3Npb24pKS5vbihcInJlYWR5XCIsICgpID0+IHRoaXMuZW1pdChcInJlYWR5XCIpKS5vbihcImRyYWluXCIsICgpID0+IHRoaXMuZW1pdChcImRyYWluXCIpKS5vbihcImRhdGFcIiwgKGNodW5rKSA9PiB7XG4gICAgICB0aGlzLnB1c2goY2h1bmspO1xuICAgIH0pLm9uKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB7XG4gICAgICBSZWZsZWN0LnNldCh0aGlzLCBcIl9oYWRFcnJvclwiLCBSZWZsZWN0LmdldChzb2NrZXQsIFwiX2hhZEVycm9yXCIpKTtcbiAgICAgIHRoaXMuZW1pdChcImVycm9yXCIsIGVycm9yKTtcbiAgICB9KS5vbihcInJlc3VtZVwiLCAoKSA9PiB0aGlzLmVtaXQoXCJyZXN1bWVcIikpLm9uKFwidGltZW91dFwiLCAoKSA9PiB0aGlzLmVtaXQoXCJ0aW1lb3V0XCIpKS5vbihcInByZWZpbmlzaFwiLCAoKSA9PiB0aGlzLmVtaXQoXCJwcmVmaW5pc2hcIikpLm9uKFwiZmluaXNoXCIsICgpID0+IHRoaXMuZW1pdChcImZpbmlzaFwiKSkub24oXCJjbG9zZVwiLCAoaGFkRXJyb3IpID0+IHRoaXMuZW1pdChcImNsb3NlXCIsIGhhZEVycm9yKSkub24oXCJlbmRcIiwgKCkgPT4gdGhpcy5lbWl0KFwiZW5kXCIpKTtcbiAgfVxuICAvKipcbiAgICogQ29udmVydCB0aGUgZ2l2ZW4gRmV0Y2ggQVBJIGBSZXNwb25zZWAgaW5zdGFuY2UgdG8gYW5cbiAgICogSFRUUCBtZXNzYWdlIGFuZCBwdXNoIGl0IHRvIHRoZSBzb2NrZXQuXG4gICAqL1xuICBhc3luYyByZXNwb25kV2l0aChyZXNwb25zZSkge1xuICAgIHZhciBfYTtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGlzUHJvcGVydHlBY2Nlc3NpYmxlKHJlc3BvbnNlLCBcInR5cGVcIikgJiYgcmVzcG9uc2UudHlwZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgICB0aGlzLmVycm9yV2l0aChuZXcgVHlwZUVycm9yKFwiTmV0d29yayBlcnJvclwiKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMubW9ja0Nvbm5lY3QoKTtcbiAgICB0aGlzLnNvY2tldFN0YXRlID0gXCJtb2NrXCI7XG4gICAgdGhpcy5mbHVzaFdyaXRlQnVmZmVyKCk7XG4gICAgY29uc3Qgc2VydmVyUmVzcG9uc2UgPSBuZXcgU2VydmVyUmVzcG9uc2UobmV3IEluY29taW5nTWVzc2FnZSh0aGlzKSk7XG4gICAgc2VydmVyUmVzcG9uc2UuYXNzaWduU29ja2V0KFxuICAgICAgbmV3IE1vY2tTb2NrZXQoe1xuICAgICAgICB3cml0ZTogKGNodW5rLCBlbmNvZGluZywgY2FsbGJhY2spID0+IHtcbiAgICAgICAgICB0aGlzLnB1c2goY2h1bmssIGVuY29kaW5nKTtcbiAgICAgICAgICBjYWxsYmFjayA9PSBudWxsID8gdm9pZCAwIDogY2FsbGJhY2soKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVhZCgpIHtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICApO1xuICAgIHNlcnZlclJlc3BvbnNlLnJlbW92ZUhlYWRlcihcImNvbm5lY3Rpb25cIik7XG4gICAgc2VydmVyUmVzcG9uc2UucmVtb3ZlSGVhZGVyKFwiZGF0ZVwiKTtcbiAgICBjb25zdCByYXdSZXNwb25zZUhlYWRlcnMgPSBnZXRSYXdGZXRjaEhlYWRlcnMocmVzcG9uc2UuaGVhZGVycyk7XG4gICAgc2VydmVyUmVzcG9uc2Uud3JpdGVIZWFkKFxuICAgICAgcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgcmVzcG9uc2Uuc3RhdHVzVGV4dCB8fCBTVEFUVVNfQ09ERVNbcmVzcG9uc2Uuc3RhdHVzXSxcbiAgICAgIHJhd1Jlc3BvbnNlSGVhZGVyc1xuICAgICk7XG4gICAgdGhpcy5vbmNlKFwiZXJyb3JcIiwgKCkgPT4ge1xuICAgICAgc2VydmVyUmVzcG9uc2UuZGVzdHJveSgpO1xuICAgIH0pO1xuICAgIGlmIChyZXNwb25zZS5ib2R5KSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSByZXNwb25zZS5ib2R5LmdldFJlYWRlcigpO1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLmVuZCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNlcnZlclJlc3BvbnNlLndyaXRlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5yZXNwb25kV2l0aChjcmVhdGVTZXJ2ZXJFcnJvclJlc3BvbnNlKGVycm9yKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2VydmVyUmVzcG9uc2UuZW5kKCk7XG4gICAgfVxuICAgIGlmICghdGhpcy5zaG91bGRLZWVwQWxpdmUpIHtcbiAgICAgIHRoaXMuZW1pdChcInJlYWRhYmxlXCIpO1xuICAgICAgKF9hID0gdGhpcy5yZXNwb25zZVN0cmVhbSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnB1c2gobnVsbCk7XG4gICAgICB0aGlzLnB1c2gobnVsbCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDbG9zZSB0aGlzIHNvY2tldCBjb25uZWN0aW9uIHdpdGggdGhlIGdpdmVuIGVycm9yLlxuICAgKi9cbiAgZXJyb3JXaXRoKGVycm9yKSB7XG4gICAgdGhpcy5kZXN0cm95KGVycm9yKTtcbiAgfVxuICBtb2NrQ29ubmVjdCgpIHtcbiAgICB0aGlzLmNvbm5lY3RpbmcgPSBmYWxzZTtcbiAgICBjb25zdCBpc0lQdjYgPSBuZXQyLmlzSVB2Nih0aGlzLmNvbm5lY3Rpb25PcHRpb25zLmhvc3RuYW1lKSB8fCB0aGlzLmNvbm5lY3Rpb25PcHRpb25zLmZhbWlseSA9PT0gNjtcbiAgICBjb25zdCBhZGRyZXNzSW5mbyA9IHtcbiAgICAgIGFkZHJlc3M6IGlzSVB2NiA/IFwiOjoxXCIgOiBcIjEyNy4wLjAuMVwiLFxuICAgICAgZmFtaWx5OiBpc0lQdjYgPyBcIklQdjZcIiA6IFwiSVB2NFwiLFxuICAgICAgcG9ydDogdGhpcy5jb25uZWN0aW9uT3B0aW9ucy5wb3J0XG4gICAgfTtcbiAgICB0aGlzLmFkZHJlc3MgPSAoKSA9PiBhZGRyZXNzSW5mbztcbiAgICB0aGlzLmVtaXQoXG4gICAgICBcImxvb2t1cFwiLFxuICAgICAgbnVsbCxcbiAgICAgIGFkZHJlc3NJbmZvLmFkZHJlc3MsXG4gICAgICBhZGRyZXNzSW5mby5mYW1pbHkgPT09IFwiSVB2NlwiID8gNiA6IDQsXG4gICAgICB0aGlzLmNvbm5lY3Rpb25PcHRpb25zLmhvc3RcbiAgICApO1xuICAgIHRoaXMuZW1pdChcImNvbm5lY3RcIik7XG4gICAgdGhpcy5lbWl0KFwicmVhZHlcIik7XG4gICAgaWYgKHRoaXMuYmFzZVVybC5wcm90b2NvbCA9PT0gXCJodHRwczpcIikge1xuICAgICAgdGhpcy5lbWl0KFwic2VjdXJlXCIpO1xuICAgICAgdGhpcy5lbWl0KFwic2VjdXJlQ29ubmVjdFwiKTtcbiAgICAgIHRoaXMuZW1pdChcbiAgICAgICAgXCJzZXNzaW9uXCIsXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbk9wdGlvbnMuc2Vzc2lvbiB8fCBCdWZmZXIuZnJvbShcIm1vY2stc2Vzc2lvbi1yZW5lZ290aWF0ZVwiKVxuICAgICAgKTtcbiAgICAgIHRoaXMuZW1pdChcInNlc3Npb25cIiwgQnVmZmVyLmZyb20oXCJtb2NrLXNlc3Npb24tcmVzdW1lXCIpKTtcbiAgICB9XG4gIH1cbiAgZmx1c2hXcml0ZUJ1ZmZlcigpIHtcbiAgICBmb3IgKGNvbnN0IHdyaXRlQ2FsbCBvZiB0aGlzLndyaXRlQnVmZmVyKSB7XG4gICAgICBpZiAodHlwZW9mIHdyaXRlQ2FsbFsyXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHdyaXRlQ2FsbFsyXSgpO1xuICAgICAgICB3cml0ZUNhbGxbMl0gPSB2b2lkIDA7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIG9uUmVxdWVzdEJvZHkoY2h1bmspIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0aGlzLnJlcXVlc3RTdHJlYW0sXG4gICAgICBcIkZhaWxlZCB0byB3cml0ZSB0byBhIHJlcXVlc3Qgc3RyZWFtOiBzdHJlYW0gZG9lcyBub3QgZXhpc3RcIlxuICAgICk7XG4gICAgdGhpcy5yZXF1ZXN0U3RyZWFtLnB1c2goY2h1bmspO1xuICB9XG4gIG9uUmVxdWVzdEVuZCgpIHtcbiAgICBpZiAodGhpcy5yZXF1ZXN0U3RyZWFtKSB7XG4gICAgICB0aGlzLnJlcXVlc3RTdHJlYW0ucHVzaChudWxsKTtcbiAgICB9XG4gIH1cbiAgb25SZXNwb25zZUJvZHkoY2h1bmspIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0aGlzLnJlc3BvbnNlU3RyZWFtLFxuICAgICAgXCJGYWlsZWQgdG8gd3JpdGUgdG8gYSByZXNwb25zZSBzdHJlYW06IHN0cmVhbSBkb2VzIG5vdCBleGlzdFwiXG4gICAgKTtcbiAgICB0aGlzLnJlc3BvbnNlU3RyZWFtLnB1c2goY2h1bmspO1xuICB9XG4gIG9uUmVzcG9uc2VFbmQoKSB7XG4gICAgaWYgKHRoaXMucmVzcG9uc2VTdHJlYW0pIHtcbiAgICAgIHRoaXMucmVzcG9uc2VTdHJlYW0ucHVzaChudWxsKTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvQ2xpZW50UmVxdWVzdC9hZ2VudHMudHNcbmltcG9ydCBodHRwIGZyb20gXCJodHRwXCI7XG5pbXBvcnQgaHR0cHMgZnJvbSBcImh0dHBzXCI7XG52YXIgTW9ja0FnZW50ID0gY2xhc3MgZXh0ZW5kcyBodHRwLkFnZW50IHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5jdXN0b21BZ2VudCA9IG9wdGlvbnMuY3VzdG9tQWdlbnQ7XG4gICAgdGhpcy5vblJlcXVlc3QgPSBvcHRpb25zLm9uUmVxdWVzdDtcbiAgICB0aGlzLm9uUmVzcG9uc2UgPSBvcHRpb25zLm9uUmVzcG9uc2U7XG4gIH1cbiAgY3JlYXRlQ29ubmVjdGlvbihvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGNyZWF0ZUNvbm5lY3Rpb24gPSB0aGlzLmN1c3RvbUFnZW50IGluc3RhbmNlb2YgaHR0cC5BZ2VudCA/IHRoaXMuY3VzdG9tQWdlbnQuY3JlYXRlQ29ubmVjdGlvbiA6IHN1cGVyLmNyZWF0ZUNvbm5lY3Rpb247XG4gICAgY29uc3QgY3JlYXRlQ29ubmVjdGlvbk9wdGlvbnMgPSB0aGlzLmN1c3RvbUFnZW50IGluc3RhbmNlb2YgaHR0cC5BZ2VudCA/IHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAuLi50aGlzLmN1c3RvbUFnZW50Lm9wdGlvbnNcbiAgICB9IDogb3B0aW9ucztcbiAgICBjb25zdCBzb2NrZXQgPSBuZXcgTW9ja0h0dHBTb2NrZXQoe1xuICAgICAgY29ubmVjdGlvbk9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICBjcmVhdGVDb25uZWN0aW9uOiBjcmVhdGVDb25uZWN0aW9uLmJpbmQoXG4gICAgICAgIHRoaXMuY3VzdG9tQWdlbnQgfHwgdGhpcyxcbiAgICAgICAgY3JlYXRlQ29ubmVjdGlvbk9wdGlvbnMsXG4gICAgICAgIGNhbGxiYWNrXG4gICAgICApLFxuICAgICAgb25SZXF1ZXN0OiB0aGlzLm9uUmVxdWVzdC5iaW5kKHRoaXMpLFxuICAgICAgb25SZXNwb25zZTogdGhpcy5vblJlc3BvbnNlLmJpbmQodGhpcylcbiAgICB9KTtcbiAgICByZXR1cm4gc29ja2V0O1xuICB9XG59O1xudmFyIE1vY2tIdHRwc0FnZW50ID0gY2xhc3MgZXh0ZW5kcyBodHRwcy5BZ2VudCB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuY3VzdG9tQWdlbnQgPSBvcHRpb25zLmN1c3RvbUFnZW50O1xuICAgIHRoaXMub25SZXF1ZXN0ID0gb3B0aW9ucy5vblJlcXVlc3Q7XG4gICAgdGhpcy5vblJlc3BvbnNlID0gb3B0aW9ucy5vblJlc3BvbnNlO1xuICB9XG4gIGNyZWF0ZUNvbm5lY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICBjb25zdCBjcmVhdGVDb25uZWN0aW9uID0gdGhpcy5jdXN0b21BZ2VudCBpbnN0YW5jZW9mIGh0dHAuQWdlbnQgPyB0aGlzLmN1c3RvbUFnZW50LmNyZWF0ZUNvbm5lY3Rpb24gOiBzdXBlci5jcmVhdGVDb25uZWN0aW9uO1xuICAgIGNvbnN0IGNyZWF0ZUNvbm5lY3Rpb25PcHRpb25zID0gdGhpcy5jdXN0b21BZ2VudCBpbnN0YW5jZW9mIGh0dHAuQWdlbnQgPyB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgLi4udGhpcy5jdXN0b21BZ2VudC5vcHRpb25zXG4gICAgfSA6IG9wdGlvbnM7XG4gICAgY29uc3Qgc29ja2V0ID0gbmV3IE1vY2tIdHRwU29ja2V0KHtcbiAgICAgIGNvbm5lY3Rpb25PcHRpb25zOiBvcHRpb25zLFxuICAgICAgY3JlYXRlQ29ubmVjdGlvbjogY3JlYXRlQ29ubmVjdGlvbi5iaW5kKFxuICAgICAgICB0aGlzLmN1c3RvbUFnZW50IHx8IHRoaXMsXG4gICAgICAgIGNyZWF0ZUNvbm5lY3Rpb25PcHRpb25zLFxuICAgICAgICBjYWxsYmFja1xuICAgICAgKSxcbiAgICAgIG9uUmVxdWVzdDogdGhpcy5vblJlcXVlc3QuYmluZCh0aGlzKSxcbiAgICAgIG9uUmVzcG9uc2U6IHRoaXMub25SZXNwb25zZS5iaW5kKHRoaXMpXG4gICAgfSk7XG4gICAgcmV0dXJuIHNvY2tldDtcbiAgfVxufTtcblxuLy8gc3JjL2ludGVyY2VwdG9ycy9DbGllbnRSZXF1ZXN0L3V0aWxzL25vcm1hbGl6ZUNsaWVudFJlcXVlc3RBcmdzLnRzXG5pbXBvcnQgeyB1cmxUb0h0dHBPcHRpb25zIH0gZnJvbSBcInVybFwiO1xuaW1wb3J0IHtcbiAgZ2xvYmFsQWdlbnQgYXMgaHR0cEdsb2JhbEFnZW50XG59IGZyb20gXCJodHRwXCI7XG5pbXBvcnQge1xuICBnbG9iYWxBZ2VudCBhcyBodHRwc0dsb2JhbEFnZW50XG59IGZyb20gXCJodHRwc1wiO1xuaW1wb3J0IHtcbiAgVVJMIGFzIFVSTDIsXG4gIHBhcnNlIGFzIHBhcnNlVXJsXG59IGZyb20gXCJ1cmxcIjtcbmltcG9ydCB7IExvZ2dlciBhcyBMb2dnZXIzIH0gZnJvbSBcIkBvcGVuLWRyYWZ0L2xvZ2dlclwiO1xuXG4vLyBzcmMvdXRpbHMvZ2V0VXJsQnlSZXF1ZXN0T3B0aW9ucy50c1xuaW1wb3J0IHsgQWdlbnQgfSBmcm9tIFwiaHR0cFwiO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIkBvcGVuLWRyYWZ0L2xvZ2dlclwiO1xudmFyIGxvZ2dlciA9IG5ldyBMb2dnZXIoXCJ1dGlscyBnZXRVcmxCeVJlcXVlc3RPcHRpb25zXCIpO1xudmFyIERFRkFVTFRfUEFUSCA9IFwiL1wiO1xudmFyIERFRkFVTFRfUFJPVE9DT0wgPSBcImh0dHA6XCI7XG52YXIgREVGQVVMVF9IT1NUTkFNRSA9IFwibG9jYWxob3N0XCI7XG52YXIgU1NMX1BPUlQgPSA0NDM7XG5mdW5jdGlvbiBnZXRBZ2VudChvcHRpb25zKSB7XG4gIHJldHVybiBvcHRpb25zLmFnZW50IGluc3RhbmNlb2YgQWdlbnQgPyBvcHRpb25zLmFnZW50IDogdm9pZCAwO1xufVxuZnVuY3Rpb24gZ2V0UHJvdG9jb2xCeVJlcXVlc3RPcHRpb25zKG9wdGlvbnMpIHtcbiAgdmFyIF9hO1xuICBpZiAob3B0aW9ucy5wcm90b2NvbCkge1xuICAgIHJldHVybiBvcHRpb25zLnByb3RvY29sO1xuICB9XG4gIGNvbnN0IGFnZW50ID0gZ2V0QWdlbnQob3B0aW9ucyk7XG4gIGNvbnN0IGFnZW50UHJvdG9jb2wgPSBhZ2VudCA9PSBudWxsID8gdm9pZCAwIDogYWdlbnQucHJvdG9jb2w7XG4gIGlmIChhZ2VudFByb3RvY29sKSB7XG4gICAgcmV0dXJuIGFnZW50UHJvdG9jb2w7XG4gIH1cbiAgY29uc3QgcG9ydCA9IGdldFBvcnRCeVJlcXVlc3RPcHRpb25zKG9wdGlvbnMpO1xuICBjb25zdCBpc1NlY3VyZVJlcXVlc3QgPSBvcHRpb25zLmNlcnQgfHwgcG9ydCA9PT0gU1NMX1BPUlQ7XG4gIHJldHVybiBpc1NlY3VyZVJlcXVlc3QgPyBcImh0dHBzOlwiIDogKChfYSA9IG9wdGlvbnMudXJpKSA9PSBudWxsID8gdm9pZCAwIDogX2EucHJvdG9jb2wpIHx8IERFRkFVTFRfUFJPVE9DT0w7XG59XG5mdW5jdGlvbiBnZXRQb3J0QnlSZXF1ZXN0T3B0aW9ucyhvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zLnBvcnQpIHtcbiAgICByZXR1cm4gTnVtYmVyKG9wdGlvbnMucG9ydCk7XG4gIH1cbiAgY29uc3QgYWdlbnQgPSBnZXRBZ2VudChvcHRpb25zKTtcbiAgaWYgKGFnZW50ID09IG51bGwgPyB2b2lkIDAgOiBhZ2VudC5vcHRpb25zLnBvcnQpIHtcbiAgICByZXR1cm4gTnVtYmVyKGFnZW50Lm9wdGlvbnMucG9ydCk7XG4gIH1cbiAgaWYgKGFnZW50ID09IG51bGwgPyB2b2lkIDAgOiBhZ2VudC5kZWZhdWx0UG9ydCkge1xuICAgIHJldHVybiBOdW1iZXIoYWdlbnQuZGVmYXVsdFBvcnQpO1xuICB9XG4gIHJldHVybiB2b2lkIDA7XG59XG5mdW5jdGlvbiBnZXRBdXRoQnlSZXF1ZXN0T3B0aW9ucyhvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zLmF1dGgpIHtcbiAgICBjb25zdCBbdXNlcm5hbWUsIHBhc3N3b3JkXSA9IG9wdGlvbnMuYXV0aC5zcGxpdChcIjpcIik7XG4gICAgcmV0dXJuIHsgdXNlcm5hbWUsIHBhc3N3b3JkIH07XG4gIH1cbn1cbmZ1bmN0aW9uIGlzUmF3SVB2NkFkZHJlc3MoaG9zdCkge1xuICByZXR1cm4gaG9zdC5pbmNsdWRlcyhcIjpcIikgJiYgIWhvc3Quc3RhcnRzV2l0aChcIltcIikgJiYgIWhvc3QuZW5kc1dpdGgoXCJdXCIpO1xufVxuZnVuY3Rpb24gZ2V0SG9zdG5hbWUob3B0aW9ucykge1xuICBsZXQgaG9zdCA9IG9wdGlvbnMuaG9zdG5hbWUgfHwgb3B0aW9ucy5ob3N0O1xuICBpZiAoaG9zdCkge1xuICAgIGlmIChpc1Jhd0lQdjZBZGRyZXNzKGhvc3QpKSB7XG4gICAgICBob3N0ID0gYFske2hvc3R9XWA7XG4gICAgfVxuICAgIHJldHVybiBuZXcgVVJMKGBodHRwOi8vJHtob3N0fWApLmhvc3RuYW1lO1xuICB9XG4gIHJldHVybiBERUZBVUxUX0hPU1ROQU1FO1xufVxuZnVuY3Rpb24gZ2V0VXJsQnlSZXF1ZXN0T3B0aW9ucyhvcHRpb25zKSB7XG4gIGxvZ2dlci5pbmZvKFwicmVxdWVzdCBvcHRpb25zXCIsIG9wdGlvbnMpO1xuICBpZiAob3B0aW9ucy51cmkpIHtcbiAgICBsb2dnZXIuaW5mbyhcbiAgICAgICdjb25zdHJ1Y3RpbmcgdXJsIGZyb20gZXhwbGljaXRseSBwcm92aWRlZCBcIm9wdGlvbnMudXJpXCI6ICVzJyxcbiAgICAgIG9wdGlvbnMudXJpXG4gICAgKTtcbiAgICByZXR1cm4gbmV3IFVSTChvcHRpb25zLnVyaS5ocmVmKTtcbiAgfVxuICBsb2dnZXIuaW5mbyhcImZpZ3VyaW5nIG91dCB1cmwgZnJvbSByZXF1ZXN0IG9wdGlvbnMuLi5cIik7XG4gIGNvbnN0IHByb3RvY29sID0gZ2V0UHJvdG9jb2xCeVJlcXVlc3RPcHRpb25zKG9wdGlvbnMpO1xuICBsb2dnZXIuaW5mbyhcInByb3RvY29sXCIsIHByb3RvY29sKTtcbiAgY29uc3QgcG9ydCA9IGdldFBvcnRCeVJlcXVlc3RPcHRpb25zKG9wdGlvbnMpO1xuICBsb2dnZXIuaW5mbyhcInBvcnRcIiwgcG9ydCk7XG4gIGNvbnN0IGhvc3RuYW1lID0gZ2V0SG9zdG5hbWUob3B0aW9ucyk7XG4gIGxvZ2dlci5pbmZvKFwiaG9zdG5hbWVcIiwgaG9zdG5hbWUpO1xuICBjb25zdCBwYXRoID0gb3B0aW9ucy5wYXRoIHx8IERFRkFVTFRfUEFUSDtcbiAgbG9nZ2VyLmluZm8oXCJwYXRoXCIsIHBhdGgpO1xuICBjb25zdCBjcmVkZW50aWFscyA9IGdldEF1dGhCeVJlcXVlc3RPcHRpb25zKG9wdGlvbnMpO1xuICBsb2dnZXIuaW5mbyhcImNyZWRlbnRpYWxzXCIsIGNyZWRlbnRpYWxzKTtcbiAgY29uc3QgYXV0aFN0cmluZyA9IGNyZWRlbnRpYWxzID8gYCR7Y3JlZGVudGlhbHMudXNlcm5hbWV9OiR7Y3JlZGVudGlhbHMucGFzc3dvcmR9QGAgOiBcIlwiO1xuICBsb2dnZXIuaW5mbyhcImF1dGggc3RyaW5nOlwiLCBhdXRoU3RyaW5nKTtcbiAgY29uc3QgcG9ydFN0cmluZyA9IHR5cGVvZiBwb3J0ICE9PSBcInVuZGVmaW5lZFwiID8gYDoke3BvcnR9YCA6IFwiXCI7XG4gIGNvbnN0IHVybCA9IG5ldyBVUkwoYCR7cHJvdG9jb2x9Ly8ke2hvc3RuYW1lfSR7cG9ydFN0cmluZ30ke3BhdGh9YCk7XG4gIHVybC51c2VybmFtZSA9IChjcmVkZW50aWFscyA9PSBudWxsID8gdm9pZCAwIDogY3JlZGVudGlhbHMudXNlcm5hbWUpIHx8IFwiXCI7XG4gIHVybC5wYXNzd29yZCA9IChjcmVkZW50aWFscyA9PSBudWxsID8gdm9pZCAwIDogY3JlZGVudGlhbHMucGFzc3dvcmQpIHx8IFwiXCI7XG4gIGxvZ2dlci5pbmZvKFwiY3JlYXRlZCB1cmw6XCIsIHVybCk7XG4gIHJldHVybiB1cmw7XG59XG5cbi8vIHNyYy91dGlscy9jbG9uZU9iamVjdC50c1xuaW1wb3J0IHsgTG9nZ2VyIGFzIExvZ2dlcjIgfSBmcm9tIFwiQG9wZW4tZHJhZnQvbG9nZ2VyXCI7XG52YXIgbG9nZ2VyMiA9IG5ldyBMb2dnZXIyKFwiY2xvbmVPYmplY3RcIik7XG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikge1xuICB2YXIgX2E7XG4gIGxvZ2dlcjIuaW5mbyhcImlzIHBsYWluIG9iamVjdD9cIiwgb2JqKTtcbiAgaWYgKG9iaiA9PSBudWxsIHx8ICEoKF9hID0gb2JqLmNvbnN0cnVjdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2EubmFtZSkpIHtcbiAgICBsb2dnZXIyLmluZm8oXCJnaXZlbiBvYmplY3QgaXMgdW5kZWZpbmVkLCBub3QgYSBwbGFpbiBvYmplY3QuLi5cIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGxvZ2dlcjIuaW5mbyhcImNoZWNraW5nIHRoZSBvYmplY3QgY29uc3RydWN0b3I6XCIsIG9iai5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgcmV0dXJuIG9iai5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIk9iamVjdFwiO1xufVxuZnVuY3Rpb24gY2xvbmVPYmplY3Qob2JqKSB7XG4gIGxvZ2dlcjIuaW5mbyhcImNsb25pbmcgb2JqZWN0OlwiLCBvYmopO1xuICBjb25zdCBlbnVtZXJhYmxlUHJvcGVydGllcyA9IE9iamVjdC5lbnRyaWVzKG9iaikucmVkdWNlKFxuICAgIChhY2MsIFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgbG9nZ2VyMi5pbmZvKFwiYW5hbHl6aW5nIGtleS12YWx1ZSBwYWlyOlwiLCBrZXksIHZhbHVlKTtcbiAgICAgIGFjY1trZXldID0gaXNQbGFpbk9iamVjdCh2YWx1ZSkgPyBjbG9uZU9iamVjdCh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSxcbiAgICB7fVxuICApO1xuICByZXR1cm4gaXNQbGFpbk9iamVjdChvYmopID8gZW51bWVyYWJsZVByb3BlcnRpZXMgOiBPYmplY3QuYXNzaWduKE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopLCBlbnVtZXJhYmxlUHJvcGVydGllcyk7XG59XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvQ2xpZW50UmVxdWVzdC91dGlscy9ub3JtYWxpemVDbGllbnRSZXF1ZXN0QXJncy50c1xudmFyIGxvZ2dlcjMgPSBuZXcgTG9nZ2VyMyhcImh0dHAgbm9ybWFsaXplQ2xpZW50UmVxdWVzdEFyZ3NcIik7XG5mdW5jdGlvbiByZXNvbHZlUmVxdWVzdE9wdGlvbnMoYXJncywgdXJsKSB7XG4gIGlmICh0eXBlb2YgYXJnc1sxXSA9PT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2YgYXJnc1sxXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgbG9nZ2VyMy5pbmZvKFwicmVxdWVzdCBvcHRpb25zIG5vdCBwcm92aWRlZCwgZGVyaXZpbmcgZnJvbSB0aGUgdXJsXCIsIHVybCk7XG4gICAgcmV0dXJuIHVybFRvSHR0cE9wdGlvbnModXJsKTtcbiAgfVxuICBpZiAoYXJnc1sxXSkge1xuICAgIGxvZ2dlcjMuaW5mbyhcImhhcyBjdXN0b20gUmVxdWVzdE9wdGlvbnMhXCIsIGFyZ3NbMV0pO1xuICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zRnJvbVVybCA9IHVybFRvSHR0cE9wdGlvbnModXJsKTtcbiAgICBsb2dnZXIzLmluZm8oXCJkZXJpdmVkIFJlcXVlc3RPcHRpb25zIGZyb20gdGhlIFVSTDpcIiwgcmVxdWVzdE9wdGlvbnNGcm9tVXJsKTtcbiAgICBsb2dnZXIzLmluZm8oXCJjbG9uaW5nIFJlcXVlc3RPcHRpb25zLi4uXCIpO1xuICAgIGNvbnN0IGNsb25lZFJlcXVlc3RPcHRpb25zID0gY2xvbmVPYmplY3QoYXJnc1sxXSk7XG4gICAgbG9nZ2VyMy5pbmZvKFwic3VjY2Vzc2Z1bGx5IGNsb25lZCBSZXF1ZXN0T3B0aW9ucyFcIiwgY2xvbmVkUmVxdWVzdE9wdGlvbnMpO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5yZXF1ZXN0T3B0aW9uc0Zyb21VcmwsXG4gICAgICAuLi5jbG9uZWRSZXF1ZXN0T3B0aW9uc1xuICAgIH07XG4gIH1cbiAgbG9nZ2VyMy5pbmZvKFwidXNpbmcgYW4gZW1wdHkgb2JqZWN0IGFzIHJlcXVlc3Qgb3B0aW9uc1wiKTtcbiAgcmV0dXJuIHt9O1xufVxuZnVuY3Rpb24gb3ZlcnJpZGVVcmxCeVJlcXVlc3RPcHRpb25zKHVybCwgb3B0aW9ucykge1xuICB1cmwuaG9zdCA9IG9wdGlvbnMuaG9zdCB8fCB1cmwuaG9zdDtcbiAgdXJsLmhvc3RuYW1lID0gb3B0aW9ucy5ob3N0bmFtZSB8fCB1cmwuaG9zdG5hbWU7XG4gIHVybC5wb3J0ID0gb3B0aW9ucy5wb3J0ID8gb3B0aW9ucy5wb3J0LnRvU3RyaW5nKCkgOiB1cmwucG9ydDtcbiAgaWYgKG9wdGlvbnMucGF0aCkge1xuICAgIGNvbnN0IHBhcnNlZE9wdGlvbnNQYXRoID0gcGFyc2VVcmwob3B0aW9ucy5wYXRoLCBmYWxzZSk7XG4gICAgdXJsLnBhdGhuYW1lID0gcGFyc2VkT3B0aW9uc1BhdGgucGF0aG5hbWUgfHwgXCJcIjtcbiAgICB1cmwuc2VhcmNoID0gcGFyc2VkT3B0aW9uc1BhdGguc2VhcmNoIHx8IFwiXCI7XG4gIH1cbiAgcmV0dXJuIHVybDtcbn1cbmZ1bmN0aW9uIHJlc29sdmVDYWxsYmFjayhhcmdzKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnc1sxXSA9PT0gXCJmdW5jdGlvblwiID8gYXJnc1sxXSA6IGFyZ3NbMl07XG59XG5mdW5jdGlvbiBub3JtYWxpemVDbGllbnRSZXF1ZXN0QXJncyhkZWZhdWx0UHJvdG9jb2wsIGFyZ3MpIHtcbiAgbGV0IHVybDtcbiAgbGV0IG9wdGlvbnM7XG4gIGxldCBjYWxsYmFjaztcbiAgbG9nZ2VyMy5pbmZvKFwiYXJndW1lbnRzXCIsIGFyZ3MpO1xuICBsb2dnZXIzLmluZm8oXCJ1c2luZyBkZWZhdWx0IHByb3RvY29sOlwiLCBkZWZhdWx0UHJvdG9jb2wpO1xuICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICBjb25zdCB1cmwyID0gbmV3IFVSTDIoXCJodHRwOi8vbG9jYWxob3N0XCIpO1xuICAgIGNvbnN0IG9wdGlvbnMyID0gcmVzb2x2ZVJlcXVlc3RPcHRpb25zKGFyZ3MsIHVybDIpO1xuICAgIHJldHVybiBbdXJsMiwgb3B0aW9uczJdO1xuICB9XG4gIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGxvZ2dlcjMuaW5mbyhcImZpcnN0IGFyZ3VtZW50IGlzIGEgbG9jYXRpb24gc3RyaW5nOlwiLCBhcmdzWzBdKTtcbiAgICB1cmwgPSBuZXcgVVJMMihhcmdzWzBdKTtcbiAgICBsb2dnZXIzLmluZm8oXCJjcmVhdGVkIGEgdXJsOlwiLCB1cmwpO1xuICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zRnJvbVVybCA9IHVybFRvSHR0cE9wdGlvbnModXJsKTtcbiAgICBsb2dnZXIzLmluZm8oXCJyZXF1ZXN0IG9wdGlvbnMgZnJvbSB1cmw6XCIsIHJlcXVlc3RPcHRpb25zRnJvbVVybCk7XG4gICAgb3B0aW9ucyA9IHJlc29sdmVSZXF1ZXN0T3B0aW9ucyhhcmdzLCB1cmwpO1xuICAgIGxvZ2dlcjMuaW5mbyhcInJlc29sdmVkIHJlcXVlc3Qgb3B0aW9uczpcIiwgb3B0aW9ucyk7XG4gICAgY2FsbGJhY2sgPSByZXNvbHZlQ2FsbGJhY2soYXJncyk7XG4gIH0gZWxzZSBpZiAoYXJnc1swXSBpbnN0YW5jZW9mIFVSTDIpIHtcbiAgICB1cmwgPSBhcmdzWzBdO1xuICAgIGxvZ2dlcjMuaW5mbyhcImZpcnN0IGFyZ3VtZW50IGlzIGEgVVJMOlwiLCB1cmwpO1xuICAgIGlmICh0eXBlb2YgYXJnc1sxXSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBpc09iamVjdChhcmdzWzFdKSkge1xuICAgICAgdXJsID0gb3ZlcnJpZGVVcmxCeVJlcXVlc3RPcHRpb25zKHVybCwgYXJnc1sxXSk7XG4gICAgfVxuICAgIG9wdGlvbnMgPSByZXNvbHZlUmVxdWVzdE9wdGlvbnMoYXJncywgdXJsKTtcbiAgICBsb2dnZXIzLmluZm8oXCJkZXJpdmVkIHJlcXVlc3Qgb3B0aW9uczpcIiwgb3B0aW9ucyk7XG4gICAgY2FsbGJhY2sgPSByZXNvbHZlQ2FsbGJhY2soYXJncyk7XG4gIH0gZWxzZSBpZiAoXCJoYXNoXCIgaW4gYXJnc1swXSAmJiAhKFwibWV0aG9kXCIgaW4gYXJnc1swXSkpIHtcbiAgICBjb25zdCBbbGVnYWN5VXJsXSA9IGFyZ3M7XG4gICAgbG9nZ2VyMy5pbmZvKFwiZmlyc3QgYXJndW1lbnQgaXMgYSBsZWdhY3kgVVJMOlwiLCBsZWdhY3lVcmwpO1xuICAgIGlmIChsZWdhY3lVcmwuaG9zdG5hbWUgPT09IG51bGwpIHtcbiAgICAgIGxvZ2dlcjMuaW5mbyhcImdpdmVuIGxlZ2FjeSBVUkwgaXMgcmVsYXRpdmUgKG5vIGhvc3RuYW1lKVwiKTtcbiAgICAgIHJldHVybiBpc09iamVjdChhcmdzWzFdKSA/IG5vcm1hbGl6ZUNsaWVudFJlcXVlc3RBcmdzKGRlZmF1bHRQcm90b2NvbCwgW1xuICAgICAgICB7IHBhdGg6IGxlZ2FjeVVybC5wYXRoLCAuLi5hcmdzWzFdIH0sXG4gICAgICAgIGFyZ3NbMl1cbiAgICAgIF0pIDogbm9ybWFsaXplQ2xpZW50UmVxdWVzdEFyZ3MoZGVmYXVsdFByb3RvY29sLCBbXG4gICAgICAgIHsgcGF0aDogbGVnYWN5VXJsLnBhdGggfSxcbiAgICAgICAgYXJnc1sxXVxuICAgICAgXSk7XG4gICAgfVxuICAgIGxvZ2dlcjMuaW5mbyhcImdpdmVuIGxlZ2FjeSB1cmwgaXMgYWJzb2x1dGVcIik7XG4gICAgY29uc3QgcmVzb2x2ZWRVcmwgPSBuZXcgVVJMMihsZWdhY3lVcmwuaHJlZik7XG4gICAgcmV0dXJuIGFyZ3NbMV0gPT09IHZvaWQgMCA/IG5vcm1hbGl6ZUNsaWVudFJlcXVlc3RBcmdzKGRlZmF1bHRQcm90b2NvbCwgW3Jlc29sdmVkVXJsXSkgOiB0eXBlb2YgYXJnc1sxXSA9PT0gXCJmdW5jdGlvblwiID8gbm9ybWFsaXplQ2xpZW50UmVxdWVzdEFyZ3MoZGVmYXVsdFByb3RvY29sLCBbcmVzb2x2ZWRVcmwsIGFyZ3NbMV1dKSA6IG5vcm1hbGl6ZUNsaWVudFJlcXVlc3RBcmdzKGRlZmF1bHRQcm90b2NvbCwgW1xuICAgICAgcmVzb2x2ZWRVcmwsXG4gICAgICBhcmdzWzFdLFxuICAgICAgYXJnc1syXVxuICAgIF0pO1xuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGFyZ3NbMF0pKSB7XG4gICAgb3B0aW9ucyA9IHsgLi4uYXJnc1swXSB9O1xuICAgIGxvZ2dlcjMuaW5mbyhcImZpcnN0IGFyZ3VtZW50IGlzIFJlcXVlc3RPcHRpb25zOlwiLCBvcHRpb25zKTtcbiAgICBvcHRpb25zLnByb3RvY29sID0gb3B0aW9ucy5wcm90b2NvbCB8fCBkZWZhdWx0UHJvdG9jb2w7XG4gICAgbG9nZ2VyMy5pbmZvKFwibm9ybWFsaXplZCByZXF1ZXN0IG9wdGlvbnM6XCIsIG9wdGlvbnMpO1xuICAgIHVybCA9IGdldFVybEJ5UmVxdWVzdE9wdGlvbnMob3B0aW9ucyk7XG4gICAgbG9nZ2VyMy5pbmZvKFwiY3JlYXRlZCBhIFVSTCBmcm9tIFJlcXVlc3RPcHRpb25zOlwiLCB1cmwuaHJlZik7XG4gICAgY2FsbGJhY2sgPSByZXNvbHZlQ2FsbGJhY2soYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEZhaWxlZCB0byBjb25zdHJ1Y3QgQ2xpZW50UmVxdWVzdCB3aXRoIHRoZXNlIHBhcmFtZXRlcnM6ICR7YXJnc31gXG4gICAgKTtcbiAgfVxuICBvcHRpb25zLnByb3RvY29sID0gb3B0aW9ucy5wcm90b2NvbCB8fCB1cmwucHJvdG9jb2w7XG4gIG9wdGlvbnMubWV0aG9kID0gb3B0aW9ucy5tZXRob2QgfHwgXCJHRVRcIjtcbiAgaWYgKCFvcHRpb25zLl9kZWZhdWx0QWdlbnQpIHtcbiAgICBsb2dnZXIzLmluZm8oXG4gICAgICAnaGFzIG5vIGRlZmF1bHQgYWdlbnQsIHNldHRpbmcgdGhlIGRlZmF1bHQgYWdlbnQgZm9yIFwiJXNcIicsXG4gICAgICBvcHRpb25zLnByb3RvY29sXG4gICAgKTtcbiAgICBvcHRpb25zLl9kZWZhdWx0QWdlbnQgPSBvcHRpb25zLnByb3RvY29sID09PSBcImh0dHBzOlwiID8gaHR0cHNHbG9iYWxBZ2VudCA6IGh0dHBHbG9iYWxBZ2VudDtcbiAgfVxuICBsb2dnZXIzLmluZm8oXCJzdWNjZXNzZnVsbHkgcmVzb2x2ZWQgdXJsOlwiLCB1cmwuaHJlZik7XG4gIGxvZ2dlcjMuaW5mbyhcInN1Y2Nlc3NmdWxseSByZXNvbHZlZCBvcHRpb25zOlwiLCBvcHRpb25zKTtcbiAgbG9nZ2VyMy5pbmZvKFwic3VjY2Vzc2Z1bGx5IHJlc29sdmVkIGNhbGxiYWNrOlwiLCBjYWxsYmFjayk7XG4gIGlmICghKHVybCBpbnN0YW5jZW9mIFVSTDIpKSB7XG4gICAgdXJsID0gdXJsLnRvU3RyaW5nKCk7XG4gIH1cbiAgcmV0dXJuIFt1cmwsIG9wdGlvbnMsIGNhbGxiYWNrXTtcbn1cblxuLy8gc3JjL2ludGVyY2VwdG9ycy9DbGllbnRSZXF1ZXN0L2luZGV4LnRzXG52YXIgX0NsaWVudFJlcXVlc3RJbnRlcmNlcHRvciA9IGNsYXNzIGV4dGVuZHMgSW50ZXJjZXB0b3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihfQ2xpZW50UmVxdWVzdEludGVyY2VwdG9yLnN5bWJvbCk7XG4gICAgdGhpcy5vblJlcXVlc3QgPSBhc3luYyAoe1xuICAgICAgcmVxdWVzdCxcbiAgICAgIHNvY2tldFxuICAgIH0pID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3RJZCA9IFJlZmxlY3QuZ2V0KHJlcXVlc3QsIGtSZXF1ZXN0SWQpO1xuICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBSZXF1ZXN0Q29udHJvbGxlcihyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGlzUmVxdWVzdEhhbmRsZWQgPSBhd2FpdCBoYW5kbGVSZXF1ZXN0KHtcbiAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgcmVxdWVzdElkLFxuICAgICAgICBjb250cm9sbGVyLFxuICAgICAgICBlbWl0dGVyOiB0aGlzLmVtaXR0ZXIsXG4gICAgICAgIG9uUmVzcG9uc2U6IChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgIHNvY2tldC5yZXNwb25kV2l0aChyZXNwb25zZSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uUmVxdWVzdEVycm9yOiAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICBzb2NrZXQucmVzcG9uZFdpdGgocmVzcG9uc2UpO1xuICAgICAgICB9LFxuICAgICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgc29ja2V0LmVycm9yV2l0aChlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmICghaXNSZXF1ZXN0SGFuZGxlZCkge1xuICAgICAgICByZXR1cm4gc29ja2V0LnBhc3N0aHJvdWdoKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLm9uUmVzcG9uc2UgPSBhc3luYyAoe1xuICAgICAgcmVxdWVzdElkLFxuICAgICAgcmVxdWVzdCxcbiAgICAgIHJlc3BvbnNlLFxuICAgICAgaXNNb2NrZWRSZXNwb25zZVxuICAgIH0pID0+IHtcbiAgICAgIHJldHVybiBlbWl0QXN5bmModGhpcy5lbWl0dGVyLCBcInJlc3BvbnNlXCIsIHtcbiAgICAgICAgcmVxdWVzdElkLFxuICAgICAgICByZXF1ZXN0LFxuICAgICAgICByZXNwb25zZSxcbiAgICAgICAgaXNNb2NrZWRSZXNwb25zZVxuICAgICAgfSk7XG4gICAgfTtcbiAgfVxuICBzZXR1cCgpIHtcbiAgICBjb25zdCB7XG4gICAgICBDbGllbnRSZXF1ZXN0OiBPcmlnaW5hbENsaWVudFJlcXVlc3QsXG4gICAgICBnZXQ6IG9yaWdpbmFsR2V0LFxuICAgICAgcmVxdWVzdDogb3JpZ2luYWxSZXF1ZXN0XG4gICAgfSA9IGh0dHAyO1xuICAgIGNvbnN0IHsgZ2V0OiBvcmlnaW5hbEh0dHBzR2V0LCByZXF1ZXN0OiBvcmlnaW5hbEh0dHBzUmVxdWVzdCB9ID0gaHR0cHMyO1xuICAgIGNvbnN0IG9uUmVxdWVzdCA9IHRoaXMub25SZXF1ZXN0LmJpbmQodGhpcyk7XG4gICAgY29uc3Qgb25SZXNwb25zZSA9IHRoaXMub25SZXNwb25zZS5iaW5kKHRoaXMpO1xuICAgIGh0dHAyLkNsaWVudFJlcXVlc3QgPSBuZXcgUHJveHkoaHR0cDIuQ2xpZW50UmVxdWVzdCwge1xuICAgICAgY29uc3RydWN0OiAodGFyZ2V0LCBhcmdzKSA9PiB7XG4gICAgICAgIGNvbnN0IFt1cmwsIG9wdGlvbnMsIGNhbGxiYWNrXSA9IG5vcm1hbGl6ZUNsaWVudFJlcXVlc3RBcmdzKFxuICAgICAgICAgIFwiaHR0cDpcIixcbiAgICAgICAgICBhcmdzXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IEFnZW50MiA9IG9wdGlvbnMucHJvdG9jb2wgPT09IFwiaHR0cHM6XCIgPyBNb2NrSHR0cHNBZ2VudCA6IE1vY2tBZ2VudDtcbiAgICAgICAgY29uc3QgbW9ja0FnZW50ID0gbmV3IEFnZW50Mih7XG4gICAgICAgICAgY3VzdG9tQWdlbnQ6IG9wdGlvbnMuYWdlbnQsXG4gICAgICAgICAgb25SZXF1ZXN0LFxuICAgICAgICAgIG9uUmVzcG9uc2VcbiAgICAgICAgfSk7XG4gICAgICAgIG9wdGlvbnMuYWdlbnQgPSBtb2NrQWdlbnQ7XG4gICAgICAgIHJldHVybiBSZWZsZWN0LmNvbnN0cnVjdCh0YXJnZXQsIFt1cmwsIG9wdGlvbnMsIGNhbGxiYWNrXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaHR0cDIucmVxdWVzdCA9IG5ldyBQcm94eShodHRwMi5yZXF1ZXN0LCB7XG4gICAgICBhcHBseTogKHRhcmdldCwgdGhpc0FyZywgYXJncykgPT4ge1xuICAgICAgICBjb25zdCBbdXJsLCBvcHRpb25zLCBjYWxsYmFja10gPSBub3JtYWxpemVDbGllbnRSZXF1ZXN0QXJncyhcbiAgICAgICAgICBcImh0dHA6XCIsXG4gICAgICAgICAgYXJnc1xuICAgICAgICApO1xuICAgICAgICBjb25zdCBtb2NrQWdlbnQgPSBuZXcgTW9ja0FnZW50KHtcbiAgICAgICAgICBjdXN0b21BZ2VudDogb3B0aW9ucy5hZ2VudCxcbiAgICAgICAgICBvblJlcXVlc3QsXG4gICAgICAgICAgb25SZXNwb25zZVxuICAgICAgICB9KTtcbiAgICAgICAgb3B0aW9ucy5hZ2VudCA9IG1vY2tBZ2VudDtcbiAgICAgICAgcmV0dXJuIFJlZmxlY3QuYXBwbHkodGFyZ2V0LCB0aGlzQXJnLCBbdXJsLCBvcHRpb25zLCBjYWxsYmFja10pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGh0dHAyLmdldCA9IG5ldyBQcm94eShodHRwMi5nZXQsIHtcbiAgICAgIGFwcGx5OiAodGFyZ2V0LCB0aGlzQXJnLCBhcmdzKSA9PiB7XG4gICAgICAgIGNvbnN0IFt1cmwsIG9wdGlvbnMsIGNhbGxiYWNrXSA9IG5vcm1hbGl6ZUNsaWVudFJlcXVlc3RBcmdzKFxuICAgICAgICAgIFwiaHR0cDpcIixcbiAgICAgICAgICBhcmdzXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IG1vY2tBZ2VudCA9IG5ldyBNb2NrQWdlbnQoe1xuICAgICAgICAgIGN1c3RvbUFnZW50OiBvcHRpb25zLmFnZW50LFxuICAgICAgICAgIG9uUmVxdWVzdCxcbiAgICAgICAgICBvblJlc3BvbnNlXG4gICAgICAgIH0pO1xuICAgICAgICBvcHRpb25zLmFnZW50ID0gbW9ja0FnZW50O1xuICAgICAgICByZXR1cm4gUmVmbGVjdC5hcHBseSh0YXJnZXQsIHRoaXNBcmcsIFt1cmwsIG9wdGlvbnMsIGNhbGxiYWNrXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaHR0cHMyLnJlcXVlc3QgPSBuZXcgUHJveHkoaHR0cHMyLnJlcXVlc3QsIHtcbiAgICAgIGFwcGx5OiAodGFyZ2V0LCB0aGlzQXJnLCBhcmdzKSA9PiB7XG4gICAgICAgIGNvbnN0IFt1cmwsIG9wdGlvbnMsIGNhbGxiYWNrXSA9IG5vcm1hbGl6ZUNsaWVudFJlcXVlc3RBcmdzKFxuICAgICAgICAgIFwiaHR0cHM6XCIsXG4gICAgICAgICAgYXJnc1xuICAgICAgICApO1xuICAgICAgICBjb25zdCBtb2NrQWdlbnQgPSBuZXcgTW9ja0h0dHBzQWdlbnQoe1xuICAgICAgICAgIGN1c3RvbUFnZW50OiBvcHRpb25zLmFnZW50LFxuICAgICAgICAgIG9uUmVxdWVzdCxcbiAgICAgICAgICBvblJlc3BvbnNlXG4gICAgICAgIH0pO1xuICAgICAgICBvcHRpb25zLmFnZW50ID0gbW9ja0FnZW50O1xuICAgICAgICByZXR1cm4gUmVmbGVjdC5hcHBseSh0YXJnZXQsIHRoaXNBcmcsIFt1cmwsIG9wdGlvbnMsIGNhbGxiYWNrXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaHR0cHMyLmdldCA9IG5ldyBQcm94eShodHRwczIuZ2V0LCB7XG4gICAgICBhcHBseTogKHRhcmdldCwgdGhpc0FyZywgYXJncykgPT4ge1xuICAgICAgICBjb25zdCBbdXJsLCBvcHRpb25zLCBjYWxsYmFja10gPSBub3JtYWxpemVDbGllbnRSZXF1ZXN0QXJncyhcbiAgICAgICAgICBcImh0dHBzOlwiLFxuICAgICAgICAgIGFyZ3NcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgbW9ja0FnZW50ID0gbmV3IE1vY2tIdHRwc0FnZW50KHtcbiAgICAgICAgICBjdXN0b21BZ2VudDogb3B0aW9ucy5hZ2VudCxcbiAgICAgICAgICBvblJlcXVlc3QsXG4gICAgICAgICAgb25SZXNwb25zZVxuICAgICAgICB9KTtcbiAgICAgICAgb3B0aW9ucy5hZ2VudCA9IG1vY2tBZ2VudDtcbiAgICAgICAgcmV0dXJuIFJlZmxlY3QuYXBwbHkodGFyZ2V0LCB0aGlzQXJnLCBbdXJsLCBvcHRpb25zLCBjYWxsYmFja10pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJlY29yZFJhd0ZldGNoSGVhZGVycygpO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKCgpID0+IHtcbiAgICAgIGh0dHAyLkNsaWVudFJlcXVlc3QgPSBPcmlnaW5hbENsaWVudFJlcXVlc3Q7XG4gICAgICBodHRwMi5nZXQgPSBvcmlnaW5hbEdldDtcbiAgICAgIGh0dHAyLnJlcXVlc3QgPSBvcmlnaW5hbFJlcXVlc3Q7XG4gICAgICBodHRwczIuZ2V0ID0gb3JpZ2luYWxIdHRwc0dldDtcbiAgICAgIGh0dHBzMi5yZXF1ZXN0ID0gb3JpZ2luYWxIdHRwc1JlcXVlc3Q7XG4gICAgICByZXN0b3JlSGVhZGVyc1Byb3RvdHlwZSgpO1xuICAgIH0pO1xuICB9XG59O1xudmFyIENsaWVudFJlcXVlc3RJbnRlcmNlcHRvciA9IF9DbGllbnRSZXF1ZXN0SW50ZXJjZXB0b3I7XG5DbGllbnRSZXF1ZXN0SW50ZXJjZXB0b3Iuc3ltYm9sID0gU3ltYm9sKFwiY2xpZW50LXJlcXVlc3QtaW50ZXJjZXB0b3JcIik7XG5cbmV4cG9ydCB7XG4gIENsaWVudFJlcXVlc3RJbnRlcmNlcHRvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLUVLTlJCNVpTLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-EKNRB5ZS.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-IHJSPMYM.mjs":
/*!************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-IHJSPMYM.mjs ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FetchResponse: () => (/* binding */ FetchResponse),\n/* harmony export */   INTERNAL_REQUEST_ID_HEADER_NAME: () => (/* binding */ INTERNAL_REQUEST_ID_HEADER_NAME),\n/* harmony export */   Interceptor: () => (/* binding */ Interceptor),\n/* harmony export */   InterceptorReadyState: () => (/* binding */ InterceptorReadyState),\n/* harmony export */   canParseUrl: () => (/* binding */ canParseUrl),\n/* harmony export */   createRequestId: () => (/* binding */ createRequestId),\n/* harmony export */   deleteGlobalSymbol: () => (/* binding */ deleteGlobalSymbol),\n/* harmony export */   getGlobalSymbol: () => (/* binding */ getGlobalSymbol)\n/* harmony export */ });\n/* harmony import */ var _open_draft_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @open-draft/logger */ \"(ssr)/../../node_modules/.pnpm/@open-draft+logger@0.3.0/node_modules/@open-draft/logger/lib/index.mjs\");\n/* harmony import */ var strict_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! strict-event-emitter */ \"(ssr)/../../node_modules/.pnpm/strict-event-emitter@0.5.1/node_modules/strict-event-emitter/lib/index.mjs\");\n// src/Interceptor.ts\n\n\nvar INTERNAL_REQUEST_ID_HEADER_NAME = \"x-interceptors-internal-request-id\";\nfunction getGlobalSymbol(symbol) {\n  return (\n    // @ts-ignore https://github.com/Microsoft/TypeScript/issues/24587\n    globalThis[symbol] || void 0\n  );\n}\nfunction setGlobalSymbol(symbol, value) {\n  globalThis[symbol] = value;\n}\nfunction deleteGlobalSymbol(symbol) {\n  delete globalThis[symbol];\n}\nvar InterceptorReadyState = /* @__PURE__ */ ((InterceptorReadyState2) => {\n  InterceptorReadyState2[\"INACTIVE\"] = \"INACTIVE\";\n  InterceptorReadyState2[\"APPLYING\"] = \"APPLYING\";\n  InterceptorReadyState2[\"APPLIED\"] = \"APPLIED\";\n  InterceptorReadyState2[\"DISPOSING\"] = \"DISPOSING\";\n  InterceptorReadyState2[\"DISPOSED\"] = \"DISPOSED\";\n  return InterceptorReadyState2;\n})(InterceptorReadyState || {});\nvar Interceptor = class {\n  constructor(symbol) {\n    this.symbol = symbol;\n    this.readyState = \"INACTIVE\" /* INACTIVE */;\n    this.emitter = new strict_event_emitter__WEBPACK_IMPORTED_MODULE_1__.Emitter();\n    this.subscriptions = [];\n    this.logger = new _open_draft_logger__WEBPACK_IMPORTED_MODULE_0__.Logger(symbol.description);\n    this.emitter.setMaxListeners(0);\n    this.logger.info(\"constructing the interceptor...\");\n  }\n  /**\n   * Determine if this interceptor can be applied\n   * in the current environment.\n   */\n  checkEnvironment() {\n    return true;\n  }\n  /**\n   * Apply this interceptor to the current process.\n   * Returns an already running interceptor instance if it's present.\n   */\n  apply() {\n    const logger = this.logger.extend(\"apply\");\n    logger.info(\"applying the interceptor...\");\n    if (this.readyState === \"APPLIED\" /* APPLIED */) {\n      logger.info(\"intercepted already applied!\");\n      return;\n    }\n    const shouldApply = this.checkEnvironment();\n    if (!shouldApply) {\n      logger.info(\"the interceptor cannot be applied in this environment!\");\n      return;\n    }\n    this.readyState = \"APPLYING\" /* APPLYING */;\n    const runningInstance = this.getInstance();\n    if (runningInstance) {\n      logger.info(\"found a running instance, reusing...\");\n      this.on = (event, listener) => {\n        logger.info('proxying the \"%s\" listener', event);\n        runningInstance.emitter.addListener(event, listener);\n        this.subscriptions.push(() => {\n          runningInstance.emitter.removeListener(event, listener);\n          logger.info('removed proxied \"%s\" listener!', event);\n        });\n        return this;\n      };\n      this.readyState = \"APPLIED\" /* APPLIED */;\n      return;\n    }\n    logger.info(\"no running instance found, setting up a new instance...\");\n    this.setup();\n    this.setInstance();\n    this.readyState = \"APPLIED\" /* APPLIED */;\n  }\n  /**\n   * Setup the module augments and stubs necessary for this interceptor.\n   * This method is not run if there's a running interceptor instance\n   * to prevent instantiating an interceptor multiple times.\n   */\n  setup() {\n  }\n  /**\n   * Listen to the interceptor's public events.\n   */\n  on(event, listener) {\n    const logger = this.logger.extend(\"on\");\n    if (this.readyState === \"DISPOSING\" /* DISPOSING */ || this.readyState === \"DISPOSED\" /* DISPOSED */) {\n      logger.info(\"cannot listen to events, already disposed!\");\n      return this;\n    }\n    logger.info('adding \"%s\" event listener:', event, listener);\n    this.emitter.on(event, listener);\n    return this;\n  }\n  once(event, listener) {\n    this.emitter.once(event, listener);\n    return this;\n  }\n  off(event, listener) {\n    this.emitter.off(event, listener);\n    return this;\n  }\n  removeAllListeners(event) {\n    this.emitter.removeAllListeners(event);\n    return this;\n  }\n  /**\n   * Disposes of any side-effects this interceptor has introduced.\n   */\n  dispose() {\n    const logger = this.logger.extend(\"dispose\");\n    if (this.readyState === \"DISPOSED\" /* DISPOSED */) {\n      logger.info(\"cannot dispose, already disposed!\");\n      return;\n    }\n    logger.info(\"disposing the interceptor...\");\n    this.readyState = \"DISPOSING\" /* DISPOSING */;\n    if (!this.getInstance()) {\n      logger.info(\"no interceptors running, skipping dispose...\");\n      return;\n    }\n    this.clearInstance();\n    logger.info(\"global symbol deleted:\", getGlobalSymbol(this.symbol));\n    if (this.subscriptions.length > 0) {\n      logger.info(\"disposing of %d subscriptions...\", this.subscriptions.length);\n      for (const dispose of this.subscriptions) {\n        dispose();\n      }\n      this.subscriptions = [];\n      logger.info(\"disposed of all subscriptions!\", this.subscriptions.length);\n    }\n    this.emitter.removeAllListeners();\n    logger.info(\"destroyed the listener!\");\n    this.readyState = \"DISPOSED\" /* DISPOSED */;\n  }\n  getInstance() {\n    var _a;\n    const instance = getGlobalSymbol(this.symbol);\n    this.logger.info(\"retrieved global instance:\", (_a = instance == null ? void 0 : instance.constructor) == null ? void 0 : _a.name);\n    return instance;\n  }\n  setInstance() {\n    setGlobalSymbol(this.symbol, this);\n    this.logger.info(\"set global instance!\", this.symbol.description);\n  }\n  clearInstance() {\n    deleteGlobalSymbol(this.symbol);\n    this.logger.info(\"cleared global instance!\", this.symbol.description);\n  }\n};\n\n// src/createRequestId.ts\nfunction createRequestId() {\n  return Math.random().toString(16).slice(2);\n}\n\n// src/utils/canParseUrl.ts\nfunction canParseUrl(url) {\n  try {\n    new URL(url);\n    return true;\n  } catch (_error) {\n    return false;\n  }\n}\n\n// src/utils/getValueBySymbol.ts\nfunction getValueBySymbol(symbolName, source) {\n  const ownSymbols = Object.getOwnPropertySymbols(source);\n  const symbol = ownSymbols.find((symbol2) => {\n    return symbol2.description === symbolName;\n  });\n  if (symbol) {\n    return Reflect.get(source, symbol);\n  }\n  return;\n}\n\n// src/utils/fetchUtils.ts\nvar _FetchResponse = class extends Response {\n  static isConfigurableStatusCode(status) {\n    return status >= 200 && status <= 599;\n  }\n  static isRedirectResponse(status) {\n    return _FetchResponse.STATUS_CODES_WITH_REDIRECT.includes(status);\n  }\n  /**\n   * Returns a boolean indicating whether the given response status\n   * code represents a response that can have a body.\n   */\n  static isResponseWithBody(status) {\n    return !_FetchResponse.STATUS_CODES_WITHOUT_BODY.includes(status);\n  }\n  static setUrl(url, response) {\n    if (!url || url === \"about:\" || !canParseUrl(url)) {\n      return;\n    }\n    const state = getValueBySymbol(\"state\", response);\n    if (state) {\n      state.urlList.push(new URL(url));\n    } else {\n      Object.defineProperty(response, \"url\", {\n        value: url,\n        enumerable: true,\n        configurable: true,\n        writable: false\n      });\n    }\n  }\n  /**\n   * Parses the given raw HTTP headers into a Fetch API `Headers` instance.\n   */\n  static parseRawHeaders(rawHeaders) {\n    const headers = new Headers();\n    for (let line = 0; line < rawHeaders.length; line += 2) {\n      headers.append(rawHeaders[line], rawHeaders[line + 1]);\n    }\n    return headers;\n  }\n  constructor(body, init = {}) {\n    var _a;\n    const status = (_a = init.status) != null ? _a : 200;\n    const safeStatus = _FetchResponse.isConfigurableStatusCode(status) ? status : 200;\n    const finalBody = _FetchResponse.isResponseWithBody(status) ? body : null;\n    super(finalBody, {\n      status: safeStatus,\n      statusText: init.statusText,\n      headers: init.headers\n    });\n    if (status !== safeStatus) {\n      const state = getValueBySymbol(\"state\", this);\n      if (state) {\n        state.status = status;\n      } else {\n        Object.defineProperty(this, \"status\", {\n          value: status,\n          enumerable: true,\n          configurable: true,\n          writable: false\n        });\n      }\n    }\n    _FetchResponse.setUrl(init.url, this);\n  }\n};\nvar FetchResponse = _FetchResponse;\n/**\n * Response status codes for responses that cannot have body.\n * @see https://fetch.spec.whatwg.org/#statuses\n */\nFetchResponse.STATUS_CODES_WITHOUT_BODY = [101, 103, 204, 205, 304];\nFetchResponse.STATUS_CODES_WITH_REDIRECT = [301, 302, 303, 307, 308];\n\n\n//# sourceMappingURL=chunk-IHJSPMYM.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2NodW5rLUlISlNQTVlNLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFDNEM7QUFDRztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw2QkFBNkI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIseURBQU87QUFDOUI7QUFDQSxzQkFBc0Isc0RBQU07QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMEJBQTBCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBV0U7QUFDRiIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmsvZGF0YS1mZXRjaGluZy1tb25vcmVwby1wb2MvZGF0YS1mZXRjaGluZy1tb25vcmVwby1wb2Mvbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2NodW5rLUlISlNQTVlNLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvSW50ZXJjZXB0b3IudHNcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCJAb3Blbi1kcmFmdC9sb2dnZXJcIjtcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tIFwic3RyaWN0LWV2ZW50LWVtaXR0ZXJcIjtcbnZhciBJTlRFUk5BTF9SRVFVRVNUX0lEX0hFQURFUl9OQU1FID0gXCJ4LWludGVyY2VwdG9ycy1pbnRlcm5hbC1yZXF1ZXN0LWlkXCI7XG5mdW5jdGlvbiBnZXRHbG9iYWxTeW1ib2woc3ltYm9sKSB7XG4gIHJldHVybiAoXG4gICAgLy8gQHRzLWlnbm9yZSBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzI0NTg3XG4gICAgZ2xvYmFsVGhpc1tzeW1ib2xdIHx8IHZvaWQgMFxuICApO1xufVxuZnVuY3Rpb24gc2V0R2xvYmFsU3ltYm9sKHN5bWJvbCwgdmFsdWUpIHtcbiAgZ2xvYmFsVGhpc1tzeW1ib2xdID0gdmFsdWU7XG59XG5mdW5jdGlvbiBkZWxldGVHbG9iYWxTeW1ib2woc3ltYm9sKSB7XG4gIGRlbGV0ZSBnbG9iYWxUaGlzW3N5bWJvbF07XG59XG52YXIgSW50ZXJjZXB0b3JSZWFkeVN0YXRlID0gLyogQF9fUFVSRV9fICovICgoSW50ZXJjZXB0b3JSZWFkeVN0YXRlMikgPT4ge1xuICBJbnRlcmNlcHRvclJlYWR5U3RhdGUyW1wiSU5BQ1RJVkVcIl0gPSBcIklOQUNUSVZFXCI7XG4gIEludGVyY2VwdG9yUmVhZHlTdGF0ZTJbXCJBUFBMWUlOR1wiXSA9IFwiQVBQTFlJTkdcIjtcbiAgSW50ZXJjZXB0b3JSZWFkeVN0YXRlMltcIkFQUExJRURcIl0gPSBcIkFQUExJRURcIjtcbiAgSW50ZXJjZXB0b3JSZWFkeVN0YXRlMltcIkRJU1BPU0lOR1wiXSA9IFwiRElTUE9TSU5HXCI7XG4gIEludGVyY2VwdG9yUmVhZHlTdGF0ZTJbXCJESVNQT1NFRFwiXSA9IFwiRElTUE9TRURcIjtcbiAgcmV0dXJuIEludGVyY2VwdG9yUmVhZHlTdGF0ZTI7XG59KShJbnRlcmNlcHRvclJlYWR5U3RhdGUgfHwge30pO1xudmFyIEludGVyY2VwdG9yID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihzeW1ib2wpIHtcbiAgICB0aGlzLnN5bWJvbCA9IHN5bWJvbDtcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIklOQUNUSVZFXCIgLyogSU5BQ1RJVkUgKi87XG4gICAgdGhpcy5lbWl0dGVyID0gbmV3IEVtaXR0ZXIoKTtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICB0aGlzLmxvZ2dlciA9IG5ldyBMb2dnZXIoc3ltYm9sLmRlc2NyaXB0aW9uKTtcbiAgICB0aGlzLmVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKDApO1xuICAgIHRoaXMubG9nZ2VyLmluZm8oXCJjb25zdHJ1Y3RpbmcgdGhlIGludGVyY2VwdG9yLi4uXCIpO1xuICB9XG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgaWYgdGhpcyBpbnRlcmNlcHRvciBjYW4gYmUgYXBwbGllZFxuICAgKiBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC5cbiAgICovXG4gIGNoZWNrRW52aXJvbm1lbnQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIEFwcGx5IHRoaXMgaW50ZXJjZXB0b3IgdG8gdGhlIGN1cnJlbnQgcHJvY2Vzcy5cbiAgICogUmV0dXJucyBhbiBhbHJlYWR5IHJ1bm5pbmcgaW50ZXJjZXB0b3IgaW5zdGFuY2UgaWYgaXQncyBwcmVzZW50LlxuICAgKi9cbiAgYXBwbHkoKSB7XG4gICAgY29uc3QgbG9nZ2VyID0gdGhpcy5sb2dnZXIuZXh0ZW5kKFwiYXBwbHlcIik7XG4gICAgbG9nZ2VyLmluZm8oXCJhcHBseWluZyB0aGUgaW50ZXJjZXB0b3IuLi5cIik7XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gXCJBUFBMSUVEXCIgLyogQVBQTElFRCAqLykge1xuICAgICAgbG9nZ2VyLmluZm8oXCJpbnRlcmNlcHRlZCBhbHJlYWR5IGFwcGxpZWQhXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzaG91bGRBcHBseSA9IHRoaXMuY2hlY2tFbnZpcm9ubWVudCgpO1xuICAgIGlmICghc2hvdWxkQXBwbHkpIHtcbiAgICAgIGxvZ2dlci5pbmZvKFwidGhlIGludGVyY2VwdG9yIGNhbm5vdCBiZSBhcHBsaWVkIGluIHRoaXMgZW52aXJvbm1lbnQhXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIkFQUExZSU5HXCIgLyogQVBQTFlJTkcgKi87XG4gICAgY29uc3QgcnVubmluZ0luc3RhbmNlID0gdGhpcy5nZXRJbnN0YW5jZSgpO1xuICAgIGlmIChydW5uaW5nSW5zdGFuY2UpIHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiZm91bmQgYSBydW5uaW5nIGluc3RhbmNlLCByZXVzaW5nLi4uXCIpO1xuICAgICAgdGhpcy5vbiA9IChldmVudCwgbGlzdGVuZXIpID0+IHtcbiAgICAgICAgbG9nZ2VyLmluZm8oJ3Byb3h5aW5nIHRoZSBcIiVzXCIgbGlzdGVuZXInLCBldmVudCk7XG4gICAgICAgIHJ1bm5pbmdJbnN0YW5jZS5lbWl0dGVyLmFkZExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKCgpID0+IHtcbiAgICAgICAgICBydW5uaW5nSW5zdGFuY2UuZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIpO1xuICAgICAgICAgIGxvZ2dlci5pbmZvKCdyZW1vdmVkIHByb3hpZWQgXCIlc1wiIGxpc3RlbmVyIScsIGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfTtcbiAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwiQVBQTElFRFwiIC8qIEFQUExJRUQgKi87XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxvZ2dlci5pbmZvKFwibm8gcnVubmluZyBpbnN0YW5jZSBmb3VuZCwgc2V0dGluZyB1cCBhIG5ldyBpbnN0YW5jZS4uLlwiKTtcbiAgICB0aGlzLnNldHVwKCk7XG4gICAgdGhpcy5zZXRJbnN0YW5jZSgpO1xuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwiQVBQTElFRFwiIC8qIEFQUExJRUQgKi87XG4gIH1cbiAgLyoqXG4gICAqIFNldHVwIHRoZSBtb2R1bGUgYXVnbWVudHMgYW5kIHN0dWJzIG5lY2Vzc2FyeSBmb3IgdGhpcyBpbnRlcmNlcHRvci5cbiAgICogVGhpcyBtZXRob2QgaXMgbm90IHJ1biBpZiB0aGVyZSdzIGEgcnVubmluZyBpbnRlcmNlcHRvciBpbnN0YW5jZVxuICAgKiB0byBwcmV2ZW50IGluc3RhbnRpYXRpbmcgYW4gaW50ZXJjZXB0b3IgbXVsdGlwbGUgdGltZXMuXG4gICAqL1xuICBzZXR1cCgpIHtcbiAgfVxuICAvKipcbiAgICogTGlzdGVuIHRvIHRoZSBpbnRlcmNlcHRvcidzIHB1YmxpYyBldmVudHMuXG4gICAqL1xuICBvbihldmVudCwgbGlzdGVuZXIpIHtcbiAgICBjb25zdCBsb2dnZXIgPSB0aGlzLmxvZ2dlci5leHRlbmQoXCJvblwiKTtcbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBcIkRJU1BPU0lOR1wiIC8qIERJU1BPU0lORyAqLyB8fCB0aGlzLnJlYWR5U3RhdGUgPT09IFwiRElTUE9TRURcIiAvKiBESVNQT1NFRCAqLykge1xuICAgICAgbG9nZ2VyLmluZm8oXCJjYW5ub3QgbGlzdGVuIHRvIGV2ZW50cywgYWxyZWFkeSBkaXNwb3NlZCFcIik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgbG9nZ2VyLmluZm8oJ2FkZGluZyBcIiVzXCIgZXZlbnQgbGlzdGVuZXI6JywgZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB0aGlzLmVtaXR0ZXIub24oZXZlbnQsIGxpc3RlbmVyKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBvbmNlKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgIHRoaXMuZW1pdHRlci5vbmNlKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgb2ZmKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgIHRoaXMuZW1pdHRlci5vZmYoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICByZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnQpIHtcbiAgICB0aGlzLmVtaXR0ZXIucmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogRGlzcG9zZXMgb2YgYW55IHNpZGUtZWZmZWN0cyB0aGlzIGludGVyY2VwdG9yIGhhcyBpbnRyb2R1Y2VkLlxuICAgKi9cbiAgZGlzcG9zZSgpIHtcbiAgICBjb25zdCBsb2dnZXIgPSB0aGlzLmxvZ2dlci5leHRlbmQoXCJkaXNwb3NlXCIpO1xuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFwiRElTUE9TRURcIiAvKiBESVNQT1NFRCAqLykge1xuICAgICAgbG9nZ2VyLmluZm8oXCJjYW5ub3QgZGlzcG9zZSwgYWxyZWFkeSBkaXNwb3NlZCFcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxvZ2dlci5pbmZvKFwiZGlzcG9zaW5nIHRoZSBpbnRlcmNlcHRvci4uLlwiKTtcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIkRJU1BPU0lOR1wiIC8qIERJU1BPU0lORyAqLztcbiAgICBpZiAoIXRoaXMuZ2V0SW5zdGFuY2UoKSkge1xuICAgICAgbG9nZ2VyLmluZm8oXCJubyBpbnRlcmNlcHRvcnMgcnVubmluZywgc2tpcHBpbmcgZGlzcG9zZS4uLlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5jbGVhckluc3RhbmNlKCk7XG4gICAgbG9nZ2VyLmluZm8oXCJnbG9iYWwgc3ltYm9sIGRlbGV0ZWQ6XCIsIGdldEdsb2JhbFN5bWJvbCh0aGlzLnN5bWJvbCkpO1xuICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgbG9nZ2VyLmluZm8oXCJkaXNwb3Npbmcgb2YgJWQgc3Vic2NyaXB0aW9ucy4uLlwiLCB0aGlzLnN1YnNjcmlwdGlvbnMubGVuZ3RoKTtcbiAgICAgIGZvciAoY29uc3QgZGlzcG9zZSBvZiB0aGlzLnN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgZGlzcG9zZSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG4gICAgICBsb2dnZXIuaW5mbyhcImRpc3Bvc2VkIG9mIGFsbCBzdWJzY3JpcHRpb25zIVwiLCB0aGlzLnN1YnNjcmlwdGlvbnMubGVuZ3RoKTtcbiAgICB9XG4gICAgdGhpcy5lbWl0dGVyLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgIGxvZ2dlci5pbmZvKFwiZGVzdHJveWVkIHRoZSBsaXN0ZW5lciFcIik7XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gXCJESVNQT1NFRFwiIC8qIERJU1BPU0VEICovO1xuICB9XG4gIGdldEluc3RhbmNlKCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGdldEdsb2JhbFN5bWJvbCh0aGlzLnN5bWJvbCk7XG4gICAgdGhpcy5sb2dnZXIuaW5mbyhcInJldHJpZXZlZCBnbG9iYWwgaW5zdGFuY2U6XCIsIChfYSA9IGluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZS5jb25zdHJ1Y3RvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLm5hbWUpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfVxuICBzZXRJbnN0YW5jZSgpIHtcbiAgICBzZXRHbG9iYWxTeW1ib2wodGhpcy5zeW1ib2wsIHRoaXMpO1xuICAgIHRoaXMubG9nZ2VyLmluZm8oXCJzZXQgZ2xvYmFsIGluc3RhbmNlIVwiLCB0aGlzLnN5bWJvbC5kZXNjcmlwdGlvbik7XG4gIH1cbiAgY2xlYXJJbnN0YW5jZSgpIHtcbiAgICBkZWxldGVHbG9iYWxTeW1ib2wodGhpcy5zeW1ib2wpO1xuICAgIHRoaXMubG9nZ2VyLmluZm8oXCJjbGVhcmVkIGdsb2JhbCBpbnN0YW5jZSFcIiwgdGhpcy5zeW1ib2wuZGVzY3JpcHRpb24pO1xuICB9XG59O1xuXG4vLyBzcmMvY3JlYXRlUmVxdWVzdElkLnRzXG5mdW5jdGlvbiBjcmVhdGVSZXF1ZXN0SWQoKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zbGljZSgyKTtcbn1cblxuLy8gc3JjL3V0aWxzL2NhblBhcnNlVXJsLnRzXG5mdW5jdGlvbiBjYW5QYXJzZVVybCh1cmwpIHtcbiAgdHJ5IHtcbiAgICBuZXcgVVJMKHVybCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vLyBzcmMvdXRpbHMvZ2V0VmFsdWVCeVN5bWJvbC50c1xuZnVuY3Rpb24gZ2V0VmFsdWVCeVN5bWJvbChzeW1ib2xOYW1lLCBzb3VyY2UpIHtcbiAgY29uc3Qgb3duU3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTtcbiAgY29uc3Qgc3ltYm9sID0gb3duU3ltYm9scy5maW5kKChzeW1ib2wyKSA9PiB7XG4gICAgcmV0dXJuIHN5bWJvbDIuZGVzY3JpcHRpb24gPT09IHN5bWJvbE5hbWU7XG4gIH0pO1xuICBpZiAoc3ltYm9sKSB7XG4gICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHNvdXJjZSwgc3ltYm9sKTtcbiAgfVxuICByZXR1cm47XG59XG5cbi8vIHNyYy91dGlscy9mZXRjaFV0aWxzLnRzXG52YXIgX0ZldGNoUmVzcG9uc2UgPSBjbGFzcyBleHRlbmRzIFJlc3BvbnNlIHtcbiAgc3RhdGljIGlzQ29uZmlndXJhYmxlU3RhdHVzQ29kZShzdGF0dXMpIHtcbiAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPD0gNTk5O1xuICB9XG4gIHN0YXRpYyBpc1JlZGlyZWN0UmVzcG9uc2Uoc3RhdHVzKSB7XG4gICAgcmV0dXJuIF9GZXRjaFJlc3BvbnNlLlNUQVRVU19DT0RFU19XSVRIX1JFRElSRUNULmluY2x1ZGVzKHN0YXR1cyk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgZ2l2ZW4gcmVzcG9uc2Ugc3RhdHVzXG4gICAqIGNvZGUgcmVwcmVzZW50cyBhIHJlc3BvbnNlIHRoYXQgY2FuIGhhdmUgYSBib2R5LlxuICAgKi9cbiAgc3RhdGljIGlzUmVzcG9uc2VXaXRoQm9keShzdGF0dXMpIHtcbiAgICByZXR1cm4gIV9GZXRjaFJlc3BvbnNlLlNUQVRVU19DT0RFU19XSVRIT1VUX0JPRFkuaW5jbHVkZXMoc3RhdHVzKTtcbiAgfVxuICBzdGF0aWMgc2V0VXJsKHVybCwgcmVzcG9uc2UpIHtcbiAgICBpZiAoIXVybCB8fCB1cmwgPT09IFwiYWJvdXQ6XCIgfHwgIWNhblBhcnNlVXJsKHVybCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc3RhdGUgPSBnZXRWYWx1ZUJ5U3ltYm9sKFwic3RhdGVcIiwgcmVzcG9uc2UpO1xuICAgIGlmIChzdGF0ZSkge1xuICAgICAgc3RhdGUudXJsTGlzdC5wdXNoKG5ldyBVUkwodXJsKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXNwb25zZSwgXCJ1cmxcIiwge1xuICAgICAgICB2YWx1ZTogdXJsLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIGdpdmVuIHJhdyBIVFRQIGhlYWRlcnMgaW50byBhIEZldGNoIEFQSSBgSGVhZGVyc2AgaW5zdGFuY2UuXG4gICAqL1xuICBzdGF0aWMgcGFyc2VSYXdIZWFkZXJzKHJhd0hlYWRlcnMpIHtcbiAgICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICBmb3IgKGxldCBsaW5lID0gMDsgbGluZSA8IHJhd0hlYWRlcnMubGVuZ3RoOyBsaW5lICs9IDIpIHtcbiAgICAgIGhlYWRlcnMuYXBwZW5kKHJhd0hlYWRlcnNbbGluZV0sIHJhd0hlYWRlcnNbbGluZSArIDFdKTtcbiAgICB9XG4gICAgcmV0dXJuIGhlYWRlcnM7XG4gIH1cbiAgY29uc3RydWN0b3IoYm9keSwgaW5pdCA9IHt9KSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IHN0YXR1cyA9IChfYSA9IGluaXQuc3RhdHVzKSAhPSBudWxsID8gX2EgOiAyMDA7XG4gICAgY29uc3Qgc2FmZVN0YXR1cyA9IF9GZXRjaFJlc3BvbnNlLmlzQ29uZmlndXJhYmxlU3RhdHVzQ29kZShzdGF0dXMpID8gc3RhdHVzIDogMjAwO1xuICAgIGNvbnN0IGZpbmFsQm9keSA9IF9GZXRjaFJlc3BvbnNlLmlzUmVzcG9uc2VXaXRoQm9keShzdGF0dXMpID8gYm9keSA6IG51bGw7XG4gICAgc3VwZXIoZmluYWxCb2R5LCB7XG4gICAgICBzdGF0dXM6IHNhZmVTdGF0dXMsXG4gICAgICBzdGF0dXNUZXh0OiBpbml0LnN0YXR1c1RleHQsXG4gICAgICBoZWFkZXJzOiBpbml0LmhlYWRlcnNcbiAgICB9KTtcbiAgICBpZiAoc3RhdHVzICE9PSBzYWZlU3RhdHVzKSB7XG4gICAgICBjb25zdCBzdGF0ZSA9IGdldFZhbHVlQnlTeW1ib2woXCJzdGF0ZVwiLCB0aGlzKTtcbiAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICBzdGF0ZS5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdGF0dXNcIiwge1xuICAgICAgICAgIHZhbHVlOiBzdGF0dXMsXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgd3JpdGFibGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBfRmV0Y2hSZXNwb25zZS5zZXRVcmwoaW5pdC51cmwsIHRoaXMpO1xuICB9XG59O1xudmFyIEZldGNoUmVzcG9uc2UgPSBfRmV0Y2hSZXNwb25zZTtcbi8qKlxuICogUmVzcG9uc2Ugc3RhdHVzIGNvZGVzIGZvciByZXNwb25zZXMgdGhhdCBjYW5ub3QgaGF2ZSBib2R5LlxuICogQHNlZSBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy8jc3RhdHVzZXNcbiAqL1xuRmV0Y2hSZXNwb25zZS5TVEFUVVNfQ09ERVNfV0lUSE9VVF9CT0RZID0gWzEwMSwgMTAzLCAyMDQsIDIwNSwgMzA0XTtcbkZldGNoUmVzcG9uc2UuU1RBVFVTX0NPREVTX1dJVEhfUkVESVJFQ1QgPSBbMzAxLCAzMDIsIDMwMywgMzA3LCAzMDhdO1xuXG5leHBvcnQge1xuICBJTlRFUk5BTF9SRVFVRVNUX0lEX0hFQURFUl9OQU1FLFxuICBnZXRHbG9iYWxTeW1ib2wsXG4gIGRlbGV0ZUdsb2JhbFN5bWJvbCxcbiAgSW50ZXJjZXB0b3JSZWFkeVN0YXRlLFxuICBJbnRlcmNlcHRvcixcbiAgY3JlYXRlUmVxdWVzdElkLFxuICBjYW5QYXJzZVVybCxcbiAgRmV0Y2hSZXNwb25zZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLUlISlNQTVlNLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-IHJSPMYM.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-RC2XPCC4.mjs":
/*!************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-RC2XPCC4.mjs ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BatchInterceptor: () => (/* binding */ BatchInterceptor)\n/* harmony export */ });\n/* harmony import */ var _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-IHJSPMYM.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-IHJSPMYM.mjs\");\n\n\n// src/BatchInterceptor.ts\nvar BatchInterceptor = class extends _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_0__.Interceptor {\n  constructor(options) {\n    BatchInterceptor.symbol = Symbol(options.name);\n    super(BatchInterceptor.symbol);\n    this.interceptors = options.interceptors;\n  }\n  setup() {\n    const logger = this.logger.extend(\"setup\");\n    logger.info(\"applying all %d interceptors...\", this.interceptors.length);\n    for (const interceptor of this.interceptors) {\n      logger.info('applying \"%s\" interceptor...', interceptor.constructor.name);\n      interceptor.apply();\n      logger.info(\"adding interceptor dispose subscription\");\n      this.subscriptions.push(() => interceptor.dispose());\n    }\n  }\n  on(event, listener) {\n    for (const interceptor of this.interceptors) {\n      interceptor.on(event, listener);\n    }\n    return this;\n  }\n  once(event, listener) {\n    for (const interceptor of this.interceptors) {\n      interceptor.once(event, listener);\n    }\n    return this;\n  }\n  off(event, listener) {\n    for (const interceptor of this.interceptors) {\n      interceptor.off(event, listener);\n    }\n    return this;\n  }\n  removeAllListeners(event) {\n    for (const interceptors of this.interceptors) {\n      interceptors.removeAllListeners(event);\n    }\n    return this;\n  }\n};\n\n\n//# sourceMappingURL=chunk-RC2XPCC4.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2NodW5rLVJDMlhQQ0M0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUU4Qjs7QUFFOUI7QUFDQSxxQ0FBcUMsNERBQVc7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBSUU7QUFDRiIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmsvZGF0YS1mZXRjaGluZy1tb25vcmVwby1wb2MvZGF0YS1mZXRjaGluZy1tb25vcmVwby1wb2Mvbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2NodW5rLVJDMlhQQ0M0Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBJbnRlcmNlcHRvclxufSBmcm9tIFwiLi9jaHVuay1JSEpTUE1ZTS5tanNcIjtcblxuLy8gc3JjL0JhdGNoSW50ZXJjZXB0b3IudHNcbnZhciBCYXRjaEludGVyY2VwdG9yID0gY2xhc3MgZXh0ZW5kcyBJbnRlcmNlcHRvciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBCYXRjaEludGVyY2VwdG9yLnN5bWJvbCA9IFN5bWJvbChvcHRpb25zLm5hbWUpO1xuICAgIHN1cGVyKEJhdGNoSW50ZXJjZXB0b3Iuc3ltYm9sKTtcbiAgICB0aGlzLmludGVyY2VwdG9ycyA9IG9wdGlvbnMuaW50ZXJjZXB0b3JzO1xuICB9XG4gIHNldHVwKCkge1xuICAgIGNvbnN0IGxvZ2dlciA9IHRoaXMubG9nZ2VyLmV4dGVuZChcInNldHVwXCIpO1xuICAgIGxvZ2dlci5pbmZvKFwiYXBwbHlpbmcgYWxsICVkIGludGVyY2VwdG9ycy4uLlwiLCB0aGlzLmludGVyY2VwdG9ycy5sZW5ndGgpO1xuICAgIGZvciAoY29uc3QgaW50ZXJjZXB0b3Igb2YgdGhpcy5pbnRlcmNlcHRvcnMpIHtcbiAgICAgIGxvZ2dlci5pbmZvKCdhcHBseWluZyBcIiVzXCIgaW50ZXJjZXB0b3IuLi4nLCBpbnRlcmNlcHRvci5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICAgIGludGVyY2VwdG9yLmFwcGx5KCk7XG4gICAgICBsb2dnZXIuaW5mbyhcImFkZGluZyBpbnRlcmNlcHRvciBkaXNwb3NlIHN1YnNjcmlwdGlvblwiKTtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKCgpID0+IGludGVyY2VwdG9yLmRpc3Bvc2UoKSk7XG4gICAgfVxuICB9XG4gIG9uKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgIGZvciAoY29uc3QgaW50ZXJjZXB0b3Igb2YgdGhpcy5pbnRlcmNlcHRvcnMpIHtcbiAgICAgIGludGVyY2VwdG9yLm9uKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIG9uY2UoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgZm9yIChjb25zdCBpbnRlcmNlcHRvciBvZiB0aGlzLmludGVyY2VwdG9ycykge1xuICAgICAgaW50ZXJjZXB0b3Iub25jZShldmVudCwgbGlzdGVuZXIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBvZmYoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgZm9yIChjb25zdCBpbnRlcmNlcHRvciBvZiB0aGlzLmludGVyY2VwdG9ycykge1xuICAgICAgaW50ZXJjZXB0b3Iub2ZmKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJlbW92ZUFsbExpc3RlbmVycyhldmVudCkge1xuICAgIGZvciAoY29uc3QgaW50ZXJjZXB0b3JzIG9mIHRoaXMuaW50ZXJjZXB0b3JzKSB7XG4gICAgICBpbnRlcmNlcHRvcnMucmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn07XG5cbmV4cG9ydCB7XG4gIEJhdGNoSW50ZXJjZXB0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1SQzJYUENDNC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-RC2XPCC4.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-TJDMZZXE.mjs":
/*!************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-TJDMZZXE.mjs ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getClientRequestBodyStream: () => (/* binding */ getClientRequestBodyStream),\n/* harmony export */   setRawRequestBodyStream: () => (/* binding */ setRawRequestBodyStream)\n/* harmony export */ });\n/* harmony import */ var _chunk_3GJB4JDF_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-3GJB4JDF.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-3GJB4JDF.mjs\");\n/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! http */ \"http\");\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! stream */ \"stream\");\n/* harmony import */ var outvariant__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! outvariant */ \"(ssr)/../../node_modules/.pnpm/outvariant@1.4.3/node_modules/outvariant/lib/index.mjs\");\n\n\n// src/utils/node/index.ts\n\n\n\nvar kRawRequestBodyStream = Symbol(\"kRawRequestBodyStream\");\nfunction getClientRequestBodyStream(request) {\n  const rawRequest = (0,_chunk_3GJB4JDF_mjs__WEBPACK_IMPORTED_MODULE_0__.getRawRequest)(request);\n  (0,outvariant__WEBPACK_IMPORTED_MODULE_3__.invariant)(\n    rawRequest instanceof http__WEBPACK_IMPORTED_MODULE_1__.ClientRequest,\n    `Failed to retrieve raw request body stream: request is not an instance of \"http.ClientRequest\". Note that you can only use the \"getClientRequestBodyStream\" function with the requests issued by \"http.clientRequest\".`\n  );\n  const requestBodyStream = Reflect.get(request, kRawRequestBodyStream);\n  (0,outvariant__WEBPACK_IMPORTED_MODULE_3__.invariant)(\n    requestBodyStream instanceof stream__WEBPACK_IMPORTED_MODULE_2__.Readable,\n    \"Failed to retrieve raw request body stream: corrupted stream (%s)\",\n    typeof requestBodyStream\n  );\n  return requestBodyStream;\n}\nfunction setRawRequestBodyStream(request, stream) {\n  Reflect.set(request, kRawRequestBodyStream, stream);\n}\n\n\n//# sourceMappingURL=chunk-TJDMZZXE.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2NodW5rLVRKRE1aWlhFLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFFOEI7O0FBRTlCO0FBQ3FDO0FBQ0g7QUFDSztBQUN2QztBQUNBO0FBQ0EscUJBQXFCLGtFQUFhO0FBQ2xDLEVBQUUscURBQVM7QUFDWCwwQkFBMEIsK0NBQWE7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsRUFBRSxxREFBUztBQUNYLGlDQUFpQyw0Q0FBUTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3JrL2RhdGEtZmV0Y2hpbmctbW9ub3JlcG8tcG9jL2RhdGEtZmV0Y2hpbmctbW9ub3JlcG8tcG9jL25vZGVfbW9kdWxlcy8ucG5wbS9AbXN3anMraW50ZXJjZXB0b3JzQDAuMzkuNi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9jaHVuay1USkRNWlpYRS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgZ2V0UmF3UmVxdWVzdFxufSBmcm9tIFwiLi9jaHVuay0zR0pCNEpERi5tanNcIjtcblxuLy8gc3JjL3V0aWxzL25vZGUvaW5kZXgudHNcbmltcG9ydCB7IENsaWVudFJlcXVlc3QgfSBmcm9tIFwiaHR0cFwiO1xuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tIFwic3RyZWFtXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tIFwib3V0dmFyaWFudFwiO1xudmFyIGtSYXdSZXF1ZXN0Qm9keVN0cmVhbSA9IFN5bWJvbChcImtSYXdSZXF1ZXN0Qm9keVN0cmVhbVwiKTtcbmZ1bmN0aW9uIGdldENsaWVudFJlcXVlc3RCb2R5U3RyZWFtKHJlcXVlc3QpIHtcbiAgY29uc3QgcmF3UmVxdWVzdCA9IGdldFJhd1JlcXVlc3QocmVxdWVzdCk7XG4gIGludmFyaWFudChcbiAgICByYXdSZXF1ZXN0IGluc3RhbmNlb2YgQ2xpZW50UmVxdWVzdCxcbiAgICBgRmFpbGVkIHRvIHJldHJpZXZlIHJhdyByZXF1ZXN0IGJvZHkgc3RyZWFtOiByZXF1ZXN0IGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBcImh0dHAuQ2xpZW50UmVxdWVzdFwiLiBOb3RlIHRoYXQgeW91IGNhbiBvbmx5IHVzZSB0aGUgXCJnZXRDbGllbnRSZXF1ZXN0Qm9keVN0cmVhbVwiIGZ1bmN0aW9uIHdpdGggdGhlIHJlcXVlc3RzIGlzc3VlZCBieSBcImh0dHAuY2xpZW50UmVxdWVzdFwiLmBcbiAgKTtcbiAgY29uc3QgcmVxdWVzdEJvZHlTdHJlYW0gPSBSZWZsZWN0LmdldChyZXF1ZXN0LCBrUmF3UmVxdWVzdEJvZHlTdHJlYW0pO1xuICBpbnZhcmlhbnQoXG4gICAgcmVxdWVzdEJvZHlTdHJlYW0gaW5zdGFuY2VvZiBSZWFkYWJsZSxcbiAgICBcIkZhaWxlZCB0byByZXRyaWV2ZSByYXcgcmVxdWVzdCBib2R5IHN0cmVhbTogY29ycnVwdGVkIHN0cmVhbSAoJXMpXCIsXG4gICAgdHlwZW9mIHJlcXVlc3RCb2R5U3RyZWFtXG4gICk7XG4gIHJldHVybiByZXF1ZXN0Qm9keVN0cmVhbTtcbn1cbmZ1bmN0aW9uIHNldFJhd1JlcXVlc3RCb2R5U3RyZWFtKHJlcXVlc3QsIHN0cmVhbSkge1xuICBSZWZsZWN0LnNldChyZXF1ZXN0LCBrUmF3UmVxdWVzdEJvZHlTdHJlYW0sIHN0cmVhbSk7XG59XG5cbmV4cG9ydCB7XG4gIGdldENsaWVudFJlcXVlc3RCb2R5U3RyZWFtLFxuICBzZXRSYXdSZXF1ZXN0Qm9keVN0cmVhbVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLVRKRE1aWlhFLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-TJDMZZXE.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-TX5GBTFY.mjs":
/*!************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-TX5GBTFY.mjs ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hasConfigurableGlobal: () => (/* binding */ hasConfigurableGlobal)\n/* harmony export */ });\n// src/utils/hasConfigurableGlobal.ts\nfunction hasConfigurableGlobal(propertyName) {\n  const descriptor = Object.getOwnPropertyDescriptor(globalThis, propertyName);\n  if (typeof descriptor === \"undefined\") {\n    return false;\n  }\n  if (typeof descriptor.get === \"function\" && typeof descriptor.get() === \"undefined\") {\n    return false;\n  }\n  if (typeof descriptor.get === \"undefined\" && descriptor.value == null) {\n    return false;\n  }\n  if (typeof descriptor.set === \"undefined\" && !descriptor.configurable) {\n    console.error(\n      `[MSW] Failed to apply interceptor: the global \\`${propertyName}\\` property is non-configurable. This is likely an issue with your environment. If you are using a framework, please open an issue about this in their repository.`\n    );\n    return false;\n  }\n  return true;\n}\n\n\n//# sourceMappingURL=chunk-TX5GBTFY.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2NodW5rLVRYNUdCVEZZLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxhQUFhO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBSUU7QUFDRiIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmsvZGF0YS1mZXRjaGluZy1tb25vcmVwby1wb2MvZGF0YS1mZXRjaGluZy1tb25vcmVwby1wb2Mvbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2NodW5rLVRYNUdCVEZZLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvaGFzQ29uZmlndXJhYmxlR2xvYmFsLnRzXG5mdW5jdGlvbiBoYXNDb25maWd1cmFibGVHbG9iYWwocHJvcGVydHlOYW1lKSB7XG4gIGNvbnN0IGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGdsb2JhbFRoaXMsIHByb3BlcnR5TmFtZSk7XG4gIGlmICh0eXBlb2YgZGVzY3JpcHRvciA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAodHlwZW9mIGRlc2NyaXB0b3IuZ2V0ID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIGRlc2NyaXB0b3IuZ2V0KCkgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiBkZXNjcmlwdG9yLmdldCA9PT0gXCJ1bmRlZmluZWRcIiAmJiBkZXNjcmlwdG9yLnZhbHVlID09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiBkZXNjcmlwdG9yLnNldCA9PT0gXCJ1bmRlZmluZWRcIiAmJiAhZGVzY3JpcHRvci5jb25maWd1cmFibGUpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgYFtNU1ddIEZhaWxlZCB0byBhcHBseSBpbnRlcmNlcHRvcjogdGhlIGdsb2JhbCBcXGAke3Byb3BlcnR5TmFtZX1cXGAgcHJvcGVydHkgaXMgbm9uLWNvbmZpZ3VyYWJsZS4gVGhpcyBpcyBsaWtlbHkgYW4gaXNzdWUgd2l0aCB5b3VyIGVudmlyb25tZW50LiBJZiB5b3UgYXJlIHVzaW5nIGEgZnJhbWV3b3JrLCBwbGVhc2Ugb3BlbiBhbiBpc3N1ZSBhYm91dCB0aGlzIGluIHRoZWlyIHJlcG9zaXRvcnkuYFxuICAgICk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQge1xuICBoYXNDb25maWd1cmFibGVHbG9iYWxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1UWDVHQlRGWS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-TX5GBTFY.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-WI4WZWP4.mjs":
/*!************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-WI4WZWP4.mjs ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FetchInterceptor: () => (/* binding */ FetchInterceptor)\n/* harmony export */ });\n/* harmony import */ var _chunk_TX5GBTFY_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-TX5GBTFY.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-TX5GBTFY.mjs\");\n/* harmony import */ var _chunk_6YM4PLBI_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-6YM4PLBI.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-6YM4PLBI.mjs\");\n/* harmony import */ var _chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-A7Q4RTDJ.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-A7Q4RTDJ.mjs\");\n/* harmony import */ var _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-IHJSPMYM.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-IHJSPMYM.mjs\");\n/* harmony import */ var _chunk_3GJB4JDF_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chunk-3GJB4JDF.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-3GJB4JDF.mjs\");\n/* harmony import */ var outvariant__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! outvariant */ \"(ssr)/../../node_modules/.pnpm/outvariant@1.4.3/node_modules/outvariant/lib/index.mjs\");\n/* harmony import */ var _open_draft_deferred_promise__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @open-draft/deferred-promise */ \"(ssr)/../../node_modules/.pnpm/@open-draft+deferred-promise@2.2.0/node_modules/@open-draft/deferred-promise/build/index.mjs\");\n/* harmony import */ var zlib__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! zlib */ \"zlib\");\n\n\n\n\n\n\n// src/interceptors/fetch/index.ts\n\n\n\n// src/interceptors/fetch/utils/createNetworkError.ts\nfunction createNetworkError(cause) {\n  return Object.assign(new TypeError(\"Failed to fetch\"), {\n    cause\n  });\n}\n\n// src/interceptors/fetch/utils/followRedirect.ts\nvar REQUEST_BODY_HEADERS = [\n  \"content-encoding\",\n  \"content-language\",\n  \"content-location\",\n  \"content-type\",\n  \"content-length\"\n];\nvar kRedirectCount = Symbol(\"kRedirectCount\");\nasync function followFetchRedirect(request, response) {\n  if (response.status !== 303 && request.body != null) {\n    return Promise.reject(createNetworkError());\n  }\n  const requestUrl = new URL(request.url);\n  let locationUrl;\n  try {\n    locationUrl = new URL(response.headers.get(\"location\"), request.url);\n  } catch (error) {\n    return Promise.reject(createNetworkError(error));\n  }\n  if (!(locationUrl.protocol === \"http:\" || locationUrl.protocol === \"https:\")) {\n    return Promise.reject(\n      createNetworkError(\"URL scheme must be a HTTP(S) scheme\")\n    );\n  }\n  if (Reflect.get(request, kRedirectCount) > 20) {\n    return Promise.reject(createNetworkError(\"redirect count exceeded\"));\n  }\n  Object.defineProperty(request, kRedirectCount, {\n    value: (Reflect.get(request, kRedirectCount) || 0) + 1\n  });\n  if (request.mode === \"cors\" && (locationUrl.username || locationUrl.password) && !sameOrigin(requestUrl, locationUrl)) {\n    return Promise.reject(\n      createNetworkError('cross origin not allowed for request mode \"cors\"')\n    );\n  }\n  const requestInit = {};\n  if ([301, 302].includes(response.status) && request.method === \"POST\" || response.status === 303 && ![\"HEAD\", \"GET\"].includes(request.method)) {\n    requestInit.method = \"GET\";\n    requestInit.body = null;\n    REQUEST_BODY_HEADERS.forEach((headerName) => {\n      request.headers.delete(headerName);\n    });\n  }\n  if (!sameOrigin(requestUrl, locationUrl)) {\n    request.headers.delete(\"authorization\");\n    request.headers.delete(\"proxy-authorization\");\n    request.headers.delete(\"cookie\");\n    request.headers.delete(\"host\");\n  }\n  requestInit.headers = request.headers;\n  return fetch(new Request(locationUrl, requestInit));\n}\nfunction sameOrigin(left, right) {\n  if (left.origin === right.origin && left.origin === \"null\") {\n    return true;\n  }\n  if (left.protocol === right.protocol && left.hostname === right.hostname && left.port === right.port) {\n    return true;\n  }\n  return false;\n}\n\n// src/interceptors/fetch/utils/brotli-decompress.ts\n\nvar BrotliDecompressionStream = class extends TransformStream {\n  constructor() {\n    const decompress = zlib__WEBPACK_IMPORTED_MODULE_7__.createBrotliDecompress({\n      flush: zlib__WEBPACK_IMPORTED_MODULE_7__.constants.BROTLI_OPERATION_FLUSH,\n      finishFlush: zlib__WEBPACK_IMPORTED_MODULE_7__.constants.BROTLI_OPERATION_FLUSH\n    });\n    super({\n      async transform(chunk, controller) {\n        const buffer = Buffer.from(chunk);\n        const decompressed = await new Promise((resolve, reject) => {\n          decompress.write(buffer, (error) => {\n            if (error)\n              reject(error);\n          });\n          decompress.flush();\n          decompress.once(\"data\", (data) => resolve(data));\n          decompress.once(\"error\", (error) => reject(error));\n          decompress.once(\"end\", () => controller.terminate());\n        }).catch((error) => {\n          controller.error(error);\n        });\n        controller.enqueue(decompressed);\n      }\n    });\n  }\n};\n\n// src/interceptors/fetch/utils/decompression.ts\nvar PipelineStream = class extends TransformStream {\n  constructor(transformStreams, ...strategies) {\n    super({}, ...strategies);\n    const readable = [super.readable, ...transformStreams].reduce(\n      (readable2, transform) => readable2.pipeThrough(transform)\n    );\n    Object.defineProperty(this, \"readable\", {\n      get() {\n        return readable;\n      }\n    });\n  }\n};\nfunction parseContentEncoding(contentEncoding) {\n  return contentEncoding.toLowerCase().split(\",\").map((coding) => coding.trim());\n}\nfunction createDecompressionStream(contentEncoding) {\n  if (contentEncoding === \"\") {\n    return null;\n  }\n  const codings = parseContentEncoding(contentEncoding);\n  if (codings.length === 0) {\n    return null;\n  }\n  const transformers = codings.reduceRight(\n    (transformers2, coding) => {\n      if (coding === \"gzip\" || coding === \"x-gzip\") {\n        return transformers2.concat(new DecompressionStream(\"gzip\"));\n      } else if (coding === \"deflate\") {\n        return transformers2.concat(new DecompressionStream(\"deflate\"));\n      } else if (coding === \"br\") {\n        return transformers2.concat(new BrotliDecompressionStream());\n      } else {\n        transformers2.length = 0;\n      }\n      return transformers2;\n    },\n    []\n  );\n  return new PipelineStream(transformers);\n}\nfunction decompressResponse(response) {\n  if (response.body === null) {\n    return null;\n  }\n  const decompressionStream = createDecompressionStream(\n    response.headers.get(\"content-encoding\") || \"\"\n  );\n  if (!decompressionStream) {\n    return null;\n  }\n  response.body.pipeTo(decompressionStream.writable);\n  return decompressionStream.readable;\n}\n\n// src/interceptors/fetch/index.ts\nvar _FetchInterceptor = class extends _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_3__.Interceptor {\n  constructor() {\n    super(_FetchInterceptor.symbol);\n  }\n  checkEnvironment() {\n    return (0,_chunk_TX5GBTFY_mjs__WEBPACK_IMPORTED_MODULE_0__.hasConfigurableGlobal)(\"fetch\");\n  }\n  async setup() {\n    const pureFetch = globalThis.fetch;\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_5__.invariant)(\n      !pureFetch[_chunk_6YM4PLBI_mjs__WEBPACK_IMPORTED_MODULE_1__.IS_PATCHED_MODULE],\n      'Failed to patch the \"fetch\" module: already patched.'\n    );\n    globalThis.fetch = async (input, init) => {\n      const requestId = (0,_chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_3__.createRequestId)();\n      const resolvedInput = typeof input === \"string\" && typeof location !== \"undefined\" && !(0,_chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_3__.canParseUrl)(input) ? new URL(input, location.href) : input;\n      const request = new Request(resolvedInput, init);\n      if (input instanceof Request) {\n        (0,_chunk_3GJB4JDF_mjs__WEBPACK_IMPORTED_MODULE_4__.setRawRequest)(request, input);\n      }\n      const responsePromise = new _open_draft_deferred_promise__WEBPACK_IMPORTED_MODULE_6__.DeferredPromise();\n      const controller = new _chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_2__.RequestController(request);\n      this.logger.info(\"[%s] %s\", request.method, request.url);\n      this.logger.info(\"awaiting for the mocked response...\");\n      this.logger.info(\n        'emitting the \"request\" event for %s listener(s)...',\n        this.emitter.listenerCount(\"request\")\n      );\n      const isRequestHandled = await (0,_chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_2__.handleRequest)({\n        request,\n        requestId,\n        emitter: this.emitter,\n        controller,\n        onResponse: async (rawResponse) => {\n          this.logger.info(\"received mocked response!\", {\n            rawResponse\n          });\n          const decompressedStream = decompressResponse(rawResponse);\n          const response = decompressedStream === null ? rawResponse : new _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_3__.FetchResponse(decompressedStream, rawResponse);\n          _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_3__.FetchResponse.setUrl(request.url, response);\n          if (_chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_3__.FetchResponse.isRedirectResponse(response.status)) {\n            if (request.redirect === \"error\") {\n              responsePromise.reject(createNetworkError(\"unexpected redirect\"));\n              return;\n            }\n            if (request.redirect === \"follow\") {\n              followFetchRedirect(request, response).then(\n                (response2) => {\n                  responsePromise.resolve(response2);\n                },\n                (reason) => {\n                  responsePromise.reject(reason);\n                }\n              );\n              return;\n            }\n          }\n          if (this.emitter.listenerCount(\"response\") > 0) {\n            this.logger.info('emitting the \"response\" event...');\n            await (0,_chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_2__.emitAsync)(this.emitter, \"response\", {\n              // Clone the mocked response for the \"response\" event listener.\n              // This way, the listener can read the response and not lock its body\n              // for the actual fetch consumer.\n              response: response.clone(),\n              isMockedResponse: true,\n              request,\n              requestId\n            });\n          }\n          responsePromise.resolve(response);\n        },\n        onRequestError: (response) => {\n          this.logger.info(\"request has errored!\", { response });\n          responsePromise.reject(createNetworkError(response));\n        },\n        onError: (error) => {\n          this.logger.info(\"request has been aborted!\", { error });\n          responsePromise.reject(error);\n        }\n      });\n      if (isRequestHandled) {\n        this.logger.info(\"request has been handled, returning mock promise...\");\n        return responsePromise;\n      }\n      this.logger.info(\n        \"no mocked response received, performing request as-is...\"\n      );\n      const requestCloneForResponseEvent = request.clone();\n      return pureFetch(request).then(async (response) => {\n        this.logger.info(\"original fetch performed\", response);\n        if (this.emitter.listenerCount(\"response\") > 0) {\n          this.logger.info('emitting the \"response\" event...');\n          const responseClone = response.clone();\n          await (0,_chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_2__.emitAsync)(this.emitter, \"response\", {\n            response: responseClone,\n            isMockedResponse: false,\n            request: requestCloneForResponseEvent,\n            requestId\n          });\n        }\n        return response;\n      });\n    };\n    Object.defineProperty(globalThis.fetch, _chunk_6YM4PLBI_mjs__WEBPACK_IMPORTED_MODULE_1__.IS_PATCHED_MODULE, {\n      enumerable: true,\n      configurable: true,\n      value: true\n    });\n    this.subscriptions.push(() => {\n      Object.defineProperty(globalThis.fetch, _chunk_6YM4PLBI_mjs__WEBPACK_IMPORTED_MODULE_1__.IS_PATCHED_MODULE, {\n        value: void 0\n      });\n      globalThis.fetch = pureFetch;\n      this.logger.info(\n        'restored native \"globalThis.fetch\"!',\n        globalThis.fetch.name\n      );\n    });\n  }\n};\nvar FetchInterceptor = _FetchInterceptor;\nFetchInterceptor.symbol = Symbol(\"fetch\");\n\n\n//# sourceMappingURL=chunk-WI4WZWP4.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2NodW5rLVdJNFdaV1A0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFFOEI7QUFHQTtBQUtBO0FBTUE7QUFHQTs7QUFFOUI7QUFDdUM7QUFDd0I7O0FBRS9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDd0I7QUFDeEI7QUFDQTtBQUNBLHVCQUF1Qix3REFBMkI7QUFDbEQsYUFBYSwyQ0FBYztBQUMzQixtQkFBbUIsMkNBQWM7QUFDakMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNDQUFzQyw0REFBVztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMEVBQXFCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLElBQUkscURBQVM7QUFDYixpQkFBaUIsa0VBQWlCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixvRUFBZTtBQUN2Qyw2RkFBNkYsZ0VBQVc7QUFDeEc7QUFDQTtBQUNBLFFBQVEsa0VBQWE7QUFDckI7QUFDQSxrQ0FBa0MseUVBQWU7QUFDakQsNkJBQTZCLGtFQUFpQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsa0VBQWE7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSwyRUFBMkUsOERBQWE7QUFDeEYsVUFBVSw4REFBYTtBQUN2QixjQUFjLDhEQUFhO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDhEQUFTO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxxREFBcUQsVUFBVTtBQUMvRDtBQUNBLFNBQVM7QUFDVDtBQUNBLDBEQUEwRCxPQUFPO0FBQ2pFO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsOERBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLDRDQUE0QyxrRUFBaUI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsOENBQThDLGtFQUFpQjtBQUMvRDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3JrL2RhdGEtZmV0Y2hpbmctbW9ub3JlcG8tcG9jL2RhdGEtZmV0Y2hpbmctbW9ub3JlcG8tcG9jL25vZGVfbW9kdWxlcy8ucG5wbS9AbXN3anMraW50ZXJjZXB0b3JzQDAuMzkuNi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9jaHVuay1XSTRXWldQNC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgaGFzQ29uZmlndXJhYmxlR2xvYmFsXG59IGZyb20gXCIuL2NodW5rLVRYNUdCVEZZLm1qc1wiO1xuaW1wb3J0IHtcbiAgSVNfUEFUQ0hFRF9NT0RVTEVcbn0gZnJvbSBcIi4vY2h1bmstNllNNFBMQkkubWpzXCI7XG5pbXBvcnQge1xuICBSZXF1ZXN0Q29udHJvbGxlcixcbiAgZW1pdEFzeW5jLFxuICBoYW5kbGVSZXF1ZXN0XG59IGZyb20gXCIuL2NodW5rLUE3UTRSVERKLm1qc1wiO1xuaW1wb3J0IHtcbiAgRmV0Y2hSZXNwb25zZSxcbiAgSW50ZXJjZXB0b3IsXG4gIGNhblBhcnNlVXJsLFxuICBjcmVhdGVSZXF1ZXN0SWRcbn0gZnJvbSBcIi4vY2h1bmstSUhKU1BNWU0ubWpzXCI7XG5pbXBvcnQge1xuICBzZXRSYXdSZXF1ZXN0XG59IGZyb20gXCIuL2NodW5rLTNHSkI0SkRGLm1qc1wiO1xuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL2ZldGNoL2luZGV4LnRzXG5pbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tIFwib3V0dmFyaWFudFwiO1xuaW1wb3J0IHsgRGVmZXJyZWRQcm9taXNlIH0gZnJvbSBcIkBvcGVuLWRyYWZ0L2RlZmVycmVkLXByb21pc2VcIjtcblxuLy8gc3JjL2ludGVyY2VwdG9ycy9mZXRjaC91dGlscy9jcmVhdGVOZXR3b3JrRXJyb3IudHNcbmZ1bmN0aW9uIGNyZWF0ZU5ldHdvcmtFcnJvcihjYXVzZSkge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGZldGNoXCIpLCB7XG4gICAgY2F1c2VcbiAgfSk7XG59XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvZmV0Y2gvdXRpbHMvZm9sbG93UmVkaXJlY3QudHNcbnZhciBSRVFVRVNUX0JPRFlfSEVBREVSUyA9IFtcbiAgXCJjb250ZW50LWVuY29kaW5nXCIsXG4gIFwiY29udGVudC1sYW5ndWFnZVwiLFxuICBcImNvbnRlbnQtbG9jYXRpb25cIixcbiAgXCJjb250ZW50LXR5cGVcIixcbiAgXCJjb250ZW50LWxlbmd0aFwiXG5dO1xudmFyIGtSZWRpcmVjdENvdW50ID0gU3ltYm9sKFwia1JlZGlyZWN0Q291bnRcIik7XG5hc3luYyBmdW5jdGlvbiBmb2xsb3dGZXRjaFJlZGlyZWN0KHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDMwMyAmJiByZXF1ZXN0LmJvZHkgIT0gbnVsbCkge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjcmVhdGVOZXR3b3JrRXJyb3IoKSk7XG4gIH1cbiAgY29uc3QgcmVxdWVzdFVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICBsZXQgbG9jYXRpb25Vcmw7XG4gIHRyeSB7XG4gICAgbG9jYXRpb25VcmwgPSBuZXcgVVJMKHJlc3BvbnNlLmhlYWRlcnMuZ2V0KFwibG9jYXRpb25cIiksIHJlcXVlc3QudXJsKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY3JlYXRlTmV0d29ya0Vycm9yKGVycm9yKSk7XG4gIH1cbiAgaWYgKCEobG9jYXRpb25VcmwucHJvdG9jb2wgPT09IFwiaHR0cDpcIiB8fCBsb2NhdGlvblVybC5wcm90b2NvbCA9PT0gXCJodHRwczpcIikpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXG4gICAgICBjcmVhdGVOZXR3b3JrRXJyb3IoXCJVUkwgc2NoZW1lIG11c3QgYmUgYSBIVFRQKFMpIHNjaGVtZVwiKVxuICAgICk7XG4gIH1cbiAgaWYgKFJlZmxlY3QuZ2V0KHJlcXVlc3QsIGtSZWRpcmVjdENvdW50KSA+IDIwKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGNyZWF0ZU5ldHdvcmtFcnJvcihcInJlZGlyZWN0IGNvdW50IGV4Y2VlZGVkXCIpKTtcbiAgfVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVxdWVzdCwga1JlZGlyZWN0Q291bnQsIHtcbiAgICB2YWx1ZTogKFJlZmxlY3QuZ2V0KHJlcXVlc3QsIGtSZWRpcmVjdENvdW50KSB8fCAwKSArIDFcbiAgfSk7XG4gIGlmIChyZXF1ZXN0Lm1vZGUgPT09IFwiY29yc1wiICYmIChsb2NhdGlvblVybC51c2VybmFtZSB8fCBsb2NhdGlvblVybC5wYXNzd29yZCkgJiYgIXNhbWVPcmlnaW4ocmVxdWVzdFVybCwgbG9jYXRpb25VcmwpKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFxuICAgICAgY3JlYXRlTmV0d29ya0Vycm9yKCdjcm9zcyBvcmlnaW4gbm90IGFsbG93ZWQgZm9yIHJlcXVlc3QgbW9kZSBcImNvcnNcIicpXG4gICAgKTtcbiAgfVxuICBjb25zdCByZXF1ZXN0SW5pdCA9IHt9O1xuICBpZiAoWzMwMSwgMzAyXS5pbmNsdWRlcyhyZXNwb25zZS5zdGF0dXMpICYmIHJlcXVlc3QubWV0aG9kID09PSBcIlBPU1RcIiB8fCByZXNwb25zZS5zdGF0dXMgPT09IDMwMyAmJiAhW1wiSEVBRFwiLCBcIkdFVFwiXS5pbmNsdWRlcyhyZXF1ZXN0Lm1ldGhvZCkpIHtcbiAgICByZXF1ZXN0SW5pdC5tZXRob2QgPSBcIkdFVFwiO1xuICAgIHJlcXVlc3RJbml0LmJvZHkgPSBudWxsO1xuICAgIFJFUVVFU1RfQk9EWV9IRUFERVJTLmZvckVhY2goKGhlYWRlck5hbWUpID0+IHtcbiAgICAgIHJlcXVlc3QuaGVhZGVycy5kZWxldGUoaGVhZGVyTmFtZSk7XG4gICAgfSk7XG4gIH1cbiAgaWYgKCFzYW1lT3JpZ2luKHJlcXVlc3RVcmwsIGxvY2F0aW9uVXJsKSkge1xuICAgIHJlcXVlc3QuaGVhZGVycy5kZWxldGUoXCJhdXRob3JpemF0aW9uXCIpO1xuICAgIHJlcXVlc3QuaGVhZGVycy5kZWxldGUoXCJwcm94eS1hdXRob3JpemF0aW9uXCIpO1xuICAgIHJlcXVlc3QuaGVhZGVycy5kZWxldGUoXCJjb29raWVcIik7XG4gICAgcmVxdWVzdC5oZWFkZXJzLmRlbGV0ZShcImhvc3RcIik7XG4gIH1cbiAgcmVxdWVzdEluaXQuaGVhZGVycyA9IHJlcXVlc3QuaGVhZGVycztcbiAgcmV0dXJuIGZldGNoKG5ldyBSZXF1ZXN0KGxvY2F0aW9uVXJsLCByZXF1ZXN0SW5pdCkpO1xufVxuZnVuY3Rpb24gc2FtZU9yaWdpbihsZWZ0LCByaWdodCkge1xuICBpZiAobGVmdC5vcmlnaW4gPT09IHJpZ2h0Lm9yaWdpbiAmJiBsZWZ0Lm9yaWdpbiA9PT0gXCJudWxsXCIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAobGVmdC5wcm90b2NvbCA9PT0gcmlnaHQucHJvdG9jb2wgJiYgbGVmdC5ob3N0bmFtZSA9PT0gcmlnaHQuaG9zdG5hbWUgJiYgbGVmdC5wb3J0ID09PSByaWdodC5wb3J0KSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL2ZldGNoL3V0aWxzL2Jyb3RsaS1kZWNvbXByZXNzLnRzXG5pbXBvcnQgemxpYiBmcm9tIFwiemxpYlwiO1xudmFyIEJyb3RsaURlY29tcHJlc3Npb25TdHJlYW0gPSBjbGFzcyBleHRlbmRzIFRyYW5zZm9ybVN0cmVhbSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGRlY29tcHJlc3MgPSB6bGliLmNyZWF0ZUJyb3RsaURlY29tcHJlc3Moe1xuICAgICAgZmx1c2g6IHpsaWIuY29uc3RhbnRzLkJST1RMSV9PUEVSQVRJT05fRkxVU0gsXG4gICAgICBmaW5pc2hGbHVzaDogemxpYi5jb25zdGFudHMuQlJPVExJX09QRVJBVElPTl9GTFVTSFxuICAgIH0pO1xuICAgIHN1cGVyKHtcbiAgICAgIGFzeW5jIHRyYW5zZm9ybShjaHVuaywgY29udHJvbGxlcikge1xuICAgICAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShjaHVuayk7XG4gICAgICAgIGNvbnN0IGRlY29tcHJlc3NlZCA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICBkZWNvbXByZXNzLndyaXRlKGJ1ZmZlciwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGVjb21wcmVzcy5mbHVzaCgpO1xuICAgICAgICAgIGRlY29tcHJlc3Mub25jZShcImRhdGFcIiwgKGRhdGEpID0+IHJlc29sdmUoZGF0YSkpO1xuICAgICAgICAgIGRlY29tcHJlc3Mub25jZShcImVycm9yXCIsIChlcnJvcikgPT4gcmVqZWN0KGVycm9yKSk7XG4gICAgICAgICAgZGVjb21wcmVzcy5vbmNlKFwiZW5kXCIsICgpID0+IGNvbnRyb2xsZXIudGVybWluYXRlKCkpO1xuICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICBjb250cm9sbGVyLmVycm9yKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShkZWNvbXByZXNzZWQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL2ZldGNoL3V0aWxzL2RlY29tcHJlc3Npb24udHNcbnZhciBQaXBlbGluZVN0cmVhbSA9IGNsYXNzIGV4dGVuZHMgVHJhbnNmb3JtU3RyZWFtIHtcbiAgY29uc3RydWN0b3IodHJhbnNmb3JtU3RyZWFtcywgLi4uc3RyYXRlZ2llcykge1xuICAgIHN1cGVyKHt9LCAuLi5zdHJhdGVnaWVzKTtcbiAgICBjb25zdCByZWFkYWJsZSA9IFtzdXBlci5yZWFkYWJsZSwgLi4udHJhbnNmb3JtU3RyZWFtc10ucmVkdWNlKFxuICAgICAgKHJlYWRhYmxlMiwgdHJhbnNmb3JtKSA9PiByZWFkYWJsZTIucGlwZVRocm91Z2godHJhbnNmb3JtKVxuICAgICk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmVhZGFibGVcIiwge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gcmVhZGFibGU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5mdW5jdGlvbiBwYXJzZUNvbnRlbnRFbmNvZGluZyhjb250ZW50RW5jb2RpbmcpIHtcbiAgcmV0dXJuIGNvbnRlbnRFbmNvZGluZy50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiLFwiKS5tYXAoKGNvZGluZykgPT4gY29kaW5nLnRyaW0oKSk7XG59XG5mdW5jdGlvbiBjcmVhdGVEZWNvbXByZXNzaW9uU3RyZWFtKGNvbnRlbnRFbmNvZGluZykge1xuICBpZiAoY29udGVudEVuY29kaW5nID09PSBcIlwiKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgY29kaW5ncyA9IHBhcnNlQ29udGVudEVuY29kaW5nKGNvbnRlbnRFbmNvZGluZyk7XG4gIGlmIChjb2RpbmdzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHRyYW5zZm9ybWVycyA9IGNvZGluZ3MucmVkdWNlUmlnaHQoXG4gICAgKHRyYW5zZm9ybWVyczIsIGNvZGluZykgPT4ge1xuICAgICAgaWYgKGNvZGluZyA9PT0gXCJnemlwXCIgfHwgY29kaW5nID09PSBcIngtZ3ppcFwiKSB7XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1lcnMyLmNvbmNhdChuZXcgRGVjb21wcmVzc2lvblN0cmVhbShcImd6aXBcIikpO1xuICAgICAgfSBlbHNlIGlmIChjb2RpbmcgPT09IFwiZGVmbGF0ZVwiKSB7XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1lcnMyLmNvbmNhdChuZXcgRGVjb21wcmVzc2lvblN0cmVhbShcImRlZmxhdGVcIikpO1xuICAgICAgfSBlbHNlIGlmIChjb2RpbmcgPT09IFwiYnJcIikge1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtZXJzMi5jb25jYXQobmV3IEJyb3RsaURlY29tcHJlc3Npb25TdHJlYW0oKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmFuc2Zvcm1lcnMyLmxlbmd0aCA9IDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJhbnNmb3JtZXJzMjtcbiAgICB9LFxuICAgIFtdXG4gICk7XG4gIHJldHVybiBuZXcgUGlwZWxpbmVTdHJlYW0odHJhbnNmb3JtZXJzKTtcbn1cbmZ1bmN0aW9uIGRlY29tcHJlc3NSZXNwb25zZShyZXNwb25zZSkge1xuICBpZiAocmVzcG9uc2UuYm9keSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IGRlY29tcHJlc3Npb25TdHJlYW0gPSBjcmVhdGVEZWNvbXByZXNzaW9uU3RyZWFtKFxuICAgIHJlc3BvbnNlLmhlYWRlcnMuZ2V0KFwiY29udGVudC1lbmNvZGluZ1wiKSB8fCBcIlwiXG4gICk7XG4gIGlmICghZGVjb21wcmVzc2lvblN0cmVhbSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJlc3BvbnNlLmJvZHkucGlwZVRvKGRlY29tcHJlc3Npb25TdHJlYW0ud3JpdGFibGUpO1xuICByZXR1cm4gZGVjb21wcmVzc2lvblN0cmVhbS5yZWFkYWJsZTtcbn1cblxuLy8gc3JjL2ludGVyY2VwdG9ycy9mZXRjaC9pbmRleC50c1xudmFyIF9GZXRjaEludGVyY2VwdG9yID0gY2xhc3MgZXh0ZW5kcyBJbnRlcmNlcHRvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKF9GZXRjaEludGVyY2VwdG9yLnN5bWJvbCk7XG4gIH1cbiAgY2hlY2tFbnZpcm9ubWVudCgpIHtcbiAgICByZXR1cm4gaGFzQ29uZmlndXJhYmxlR2xvYmFsKFwiZmV0Y2hcIik7XG4gIH1cbiAgYXN5bmMgc2V0dXAoKSB7XG4gICAgY29uc3QgcHVyZUZldGNoID0gZ2xvYmFsVGhpcy5mZXRjaDtcbiAgICBpbnZhcmlhbnQoXG4gICAgICAhcHVyZUZldGNoW0lTX1BBVENIRURfTU9EVUxFXSxcbiAgICAgICdGYWlsZWQgdG8gcGF0Y2ggdGhlIFwiZmV0Y2hcIiBtb2R1bGU6IGFscmVhZHkgcGF0Y2hlZC4nXG4gICAgKTtcbiAgICBnbG9iYWxUaGlzLmZldGNoID0gYXN5bmMgKGlucHV0LCBpbml0KSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0SWQgPSBjcmVhdGVSZXF1ZXN0SWQoKTtcbiAgICAgIGNvbnN0IHJlc29sdmVkSW5wdXQgPSB0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIGxvY2F0aW9uICE9PSBcInVuZGVmaW5lZFwiICYmICFjYW5QYXJzZVVybChpbnB1dCkgPyBuZXcgVVJMKGlucHV0LCBsb2NhdGlvbi5ocmVmKSA6IGlucHV0O1xuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHJlc29sdmVkSW5wdXQsIGluaXQpO1xuICAgICAgaWYgKGlucHV0IGluc3RhbmNlb2YgUmVxdWVzdCkge1xuICAgICAgICBzZXRSYXdSZXF1ZXN0KHJlcXVlc3QsIGlucHV0KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc3BvbnNlUHJvbWlzZSA9IG5ldyBEZWZlcnJlZFByb21pc2UoKTtcbiAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgUmVxdWVzdENvbnRyb2xsZXIocmVxdWVzdCk7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiWyVzXSAlc1wiLCByZXF1ZXN0Lm1ldGhvZCwgcmVxdWVzdC51cmwpO1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcImF3YWl0aW5nIGZvciB0aGUgbW9ja2VkIHJlc3BvbnNlLi4uXCIpO1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgJ2VtaXR0aW5nIHRoZSBcInJlcXVlc3RcIiBldmVudCBmb3IgJXMgbGlzdGVuZXIocykuLi4nLFxuICAgICAgICB0aGlzLmVtaXR0ZXIubGlzdGVuZXJDb3VudChcInJlcXVlc3RcIilcbiAgICAgICk7XG4gICAgICBjb25zdCBpc1JlcXVlc3RIYW5kbGVkID0gYXdhaXQgaGFuZGxlUmVxdWVzdCh7XG4gICAgICAgIHJlcXVlc3QsXG4gICAgICAgIHJlcXVlc3RJZCxcbiAgICAgICAgZW1pdHRlcjogdGhpcy5lbWl0dGVyLFxuICAgICAgICBjb250cm9sbGVyLFxuICAgICAgICBvblJlc3BvbnNlOiBhc3luYyAocmF3UmVzcG9uc2UpID0+IHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwicmVjZWl2ZWQgbW9ja2VkIHJlc3BvbnNlIVwiLCB7XG4gICAgICAgICAgICByYXdSZXNwb25zZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnN0IGRlY29tcHJlc3NlZFN0cmVhbSA9IGRlY29tcHJlc3NSZXNwb25zZShyYXdSZXNwb25zZSk7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBkZWNvbXByZXNzZWRTdHJlYW0gPT09IG51bGwgPyByYXdSZXNwb25zZSA6IG5ldyBGZXRjaFJlc3BvbnNlKGRlY29tcHJlc3NlZFN0cmVhbSwgcmF3UmVzcG9uc2UpO1xuICAgICAgICAgIEZldGNoUmVzcG9uc2Uuc2V0VXJsKHJlcXVlc3QudXJsLCByZXNwb25zZSk7XG4gICAgICAgICAgaWYgKEZldGNoUmVzcG9uc2UuaXNSZWRpcmVjdFJlc3BvbnNlKHJlc3BvbnNlLnN0YXR1cykpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnJlZGlyZWN0ID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgICAgcmVzcG9uc2VQcm9taXNlLnJlamVjdChjcmVhdGVOZXR3b3JrRXJyb3IoXCJ1bmV4cGVjdGVkIHJlZGlyZWN0XCIpKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3QucmVkaXJlY3QgPT09IFwiZm9sbG93XCIpIHtcbiAgICAgICAgICAgICAgZm9sbG93RmV0Y2hSZWRpcmVjdChyZXF1ZXN0LCByZXNwb25zZSkudGhlbihcbiAgICAgICAgICAgICAgICAocmVzcG9uc2UyKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXNwb25zZVByb21pc2UucmVzb2x2ZShyZXNwb25zZTIpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgKHJlYXNvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgcmVzcG9uc2VQcm9taXNlLnJlamVjdChyZWFzb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy5lbWl0dGVyLmxpc3RlbmVyQ291bnQoXCJyZXNwb25zZVwiKSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm8oJ2VtaXR0aW5nIHRoZSBcInJlc3BvbnNlXCIgZXZlbnQuLi4nKTtcbiAgICAgICAgICAgIGF3YWl0IGVtaXRBc3luYyh0aGlzLmVtaXR0ZXIsIFwicmVzcG9uc2VcIiwge1xuICAgICAgICAgICAgICAvLyBDbG9uZSB0aGUgbW9ja2VkIHJlc3BvbnNlIGZvciB0aGUgXCJyZXNwb25zZVwiIGV2ZW50IGxpc3RlbmVyLlxuICAgICAgICAgICAgICAvLyBUaGlzIHdheSwgdGhlIGxpc3RlbmVyIGNhbiByZWFkIHRoZSByZXNwb25zZSBhbmQgbm90IGxvY2sgaXRzIGJvZHlcbiAgICAgICAgICAgICAgLy8gZm9yIHRoZSBhY3R1YWwgZmV0Y2ggY29uc3VtZXIuXG4gICAgICAgICAgICAgIHJlc3BvbnNlOiByZXNwb25zZS5jbG9uZSgpLFxuICAgICAgICAgICAgICBpc01vY2tlZFJlc3BvbnNlOiB0cnVlLFxuICAgICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgICByZXF1ZXN0SWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXNwb25zZVByb21pc2UucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uUmVxdWVzdEVycm9yOiAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwicmVxdWVzdCBoYXMgZXJyb3JlZCFcIiwgeyByZXNwb25zZSB9KTtcbiAgICAgICAgICByZXNwb25zZVByb21pc2UucmVqZWN0KGNyZWF0ZU5ldHdvcmtFcnJvcihyZXNwb25zZSkpO1xuICAgICAgICB9LFxuICAgICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwicmVxdWVzdCBoYXMgYmVlbiBhYm9ydGVkIVwiLCB7IGVycm9yIH0pO1xuICAgICAgICAgIHJlc3BvbnNlUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChpc1JlcXVlc3RIYW5kbGVkKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJyZXF1ZXN0IGhhcyBiZWVuIGhhbmRsZWQsIHJldHVybmluZyBtb2NrIHByb21pc2UuLi5cIik7XG4gICAgICAgIHJldHVybiByZXNwb25zZVByb21pc2U7XG4gICAgICB9XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICBcIm5vIG1vY2tlZCByZXNwb25zZSByZWNlaXZlZCwgcGVyZm9ybWluZyByZXF1ZXN0IGFzLWlzLi4uXCJcbiAgICAgICk7XG4gICAgICBjb25zdCByZXF1ZXN0Q2xvbmVGb3JSZXNwb25zZUV2ZW50ID0gcmVxdWVzdC5jbG9uZSgpO1xuICAgICAgcmV0dXJuIHB1cmVGZXRjaChyZXF1ZXN0KS50aGVuKGFzeW5jIChyZXNwb25zZSkgPT4ge1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwib3JpZ2luYWwgZmV0Y2ggcGVyZm9ybWVkXCIsIHJlc3BvbnNlKTtcbiAgICAgICAgaWYgKHRoaXMuZW1pdHRlci5saXN0ZW5lckNvdW50KFwicmVzcG9uc2VcIikgPiAwKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbygnZW1pdHRpbmcgdGhlIFwicmVzcG9uc2VcIiBldmVudC4uLicpO1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlQ2xvbmUgPSByZXNwb25zZS5jbG9uZSgpO1xuICAgICAgICAgIGF3YWl0IGVtaXRBc3luYyh0aGlzLmVtaXR0ZXIsIFwicmVzcG9uc2VcIiwge1xuICAgICAgICAgICAgcmVzcG9uc2U6IHJlc3BvbnNlQ2xvbmUsXG4gICAgICAgICAgICBpc01vY2tlZFJlc3BvbnNlOiBmYWxzZSxcbiAgICAgICAgICAgIHJlcXVlc3Q6IHJlcXVlc3RDbG9uZUZvclJlc3BvbnNlRXZlbnQsXG4gICAgICAgICAgICByZXF1ZXN0SWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWxUaGlzLmZldGNoLCBJU19QQVRDSEVEX01PRFVMRSwge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goKCkgPT4ge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbFRoaXMuZmV0Y2gsIElTX1BBVENIRURfTU9EVUxFLCB7XG4gICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgIH0pO1xuICAgICAgZ2xvYmFsVGhpcy5mZXRjaCA9IHB1cmVGZXRjaDtcbiAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICdyZXN0b3JlZCBuYXRpdmUgXCJnbG9iYWxUaGlzLmZldGNoXCIhJyxcbiAgICAgICAgZ2xvYmFsVGhpcy5mZXRjaC5uYW1lXG4gICAgICApO1xuICAgIH0pO1xuICB9XG59O1xudmFyIEZldGNoSW50ZXJjZXB0b3IgPSBfRmV0Y2hJbnRlcmNlcHRvcjtcbkZldGNoSW50ZXJjZXB0b3Iuc3ltYm9sID0gU3ltYm9sKFwiZmV0Y2hcIik7XG5cbmV4cG9ydCB7XG4gIEZldGNoSW50ZXJjZXB0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1XSTRXWldQNC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-WI4WZWP4.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/index.mjs":
/*!***************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/index.mjs ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BatchInterceptor: () => (/* reexport safe */ _chunk_RC2XPCC4_mjs__WEBPACK_IMPORTED_MODULE_0__.BatchInterceptor),\n/* harmony export */   FetchResponse: () => (/* reexport safe */ _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_3__.FetchResponse),\n/* harmony export */   INTERNAL_REQUEST_ID_HEADER_NAME: () => (/* reexport safe */ _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_3__.INTERNAL_REQUEST_ID_HEADER_NAME),\n/* harmony export */   IS_PATCHED_MODULE: () => (/* reexport safe */ _chunk_6YM4PLBI_mjs__WEBPACK_IMPORTED_MODULE_2__.IS_PATCHED_MODULE),\n/* harmony export */   Interceptor: () => (/* reexport safe */ _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_3__.Interceptor),\n/* harmony export */   InterceptorReadyState: () => (/* reexport safe */ _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_3__.InterceptorReadyState),\n/* harmony export */   createRequestId: () => (/* reexport safe */ _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_3__.createRequestId),\n/* harmony export */   decodeBuffer: () => (/* reexport safe */ _chunk_6HYIRFX2_mjs__WEBPACK_IMPORTED_MODULE_1__.decodeBuffer),\n/* harmony export */   deleteGlobalSymbol: () => (/* reexport safe */ _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_3__.deleteGlobalSymbol),\n/* harmony export */   encodeBuffer: () => (/* reexport safe */ _chunk_6HYIRFX2_mjs__WEBPACK_IMPORTED_MODULE_1__.encodeBuffer),\n/* harmony export */   getCleanUrl: () => (/* binding */ getCleanUrl),\n/* harmony export */   getGlobalSymbol: () => (/* reexport safe */ _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_3__.getGlobalSymbol),\n/* harmony export */   getRawRequest: () => (/* reexport safe */ _chunk_3GJB4JDF_mjs__WEBPACK_IMPORTED_MODULE_4__.getRawRequest)\n/* harmony export */ });\n/* harmony import */ var _chunk_RC2XPCC4_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-RC2XPCC4.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-RC2XPCC4.mjs\");\n/* harmony import */ var _chunk_6HYIRFX2_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-6HYIRFX2.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-6HYIRFX2.mjs\");\n/* harmony import */ var _chunk_6YM4PLBI_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-6YM4PLBI.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-6YM4PLBI.mjs\");\n/* harmony import */ var _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-IHJSPMYM.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-IHJSPMYM.mjs\");\n/* harmony import */ var _chunk_3GJB4JDF_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chunk-3GJB4JDF.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-3GJB4JDF.mjs\");\n\n\n\n\n\n\n// src/utils/getCleanUrl.ts\nfunction getCleanUrl(url, isAbsolute = true) {\n  return [isAbsolute && url.origin, url.pathname].filter(Boolean).join(\"\");\n}\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFOEI7QUFJQTtBQUdBO0FBU0E7QUFHQTs7QUFFOUI7QUFDQTtBQUNBO0FBQ0E7QUFlRTtBQUNGIiwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29yay9kYXRhLWZldGNoaW5nLW1vbm9yZXBvLXBvYy9kYXRhLWZldGNoaW5nLW1vbm9yZXBvLXBvYy9ub2RlX21vZHVsZXMvLnBucG0vQG1zd2pzK2ludGVyY2VwdG9yc0AwLjM5LjYvbm9kZV9tb2R1bGVzL0Btc3dqcy9pbnRlcmNlcHRvcnMvbGliL25vZGUvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEJhdGNoSW50ZXJjZXB0b3Jcbn0gZnJvbSBcIi4vY2h1bmstUkMyWFBDQzQubWpzXCI7XG5pbXBvcnQge1xuICBkZWNvZGVCdWZmZXIsXG4gIGVuY29kZUJ1ZmZlclxufSBmcm9tIFwiLi9jaHVuay02SFlJUkZYMi5tanNcIjtcbmltcG9ydCB7XG4gIElTX1BBVENIRURfTU9EVUxFXG59IGZyb20gXCIuL2NodW5rLTZZTTRQTEJJLm1qc1wiO1xuaW1wb3J0IHtcbiAgRmV0Y2hSZXNwb25zZSxcbiAgSU5URVJOQUxfUkVRVUVTVF9JRF9IRUFERVJfTkFNRSxcbiAgSW50ZXJjZXB0b3IsXG4gIEludGVyY2VwdG9yUmVhZHlTdGF0ZSxcbiAgY3JlYXRlUmVxdWVzdElkLFxuICBkZWxldGVHbG9iYWxTeW1ib2wsXG4gIGdldEdsb2JhbFN5bWJvbFxufSBmcm9tIFwiLi9jaHVuay1JSEpTUE1ZTS5tanNcIjtcbmltcG9ydCB7XG4gIGdldFJhd1JlcXVlc3Rcbn0gZnJvbSBcIi4vY2h1bmstM0dKQjRKREYubWpzXCI7XG5cbi8vIHNyYy91dGlscy9nZXRDbGVhblVybC50c1xuZnVuY3Rpb24gZ2V0Q2xlYW5VcmwodXJsLCBpc0Fic29sdXRlID0gdHJ1ZSkge1xuICByZXR1cm4gW2lzQWJzb2x1dGUgJiYgdXJsLm9yaWdpbiwgdXJsLnBhdGhuYW1lXS5maWx0ZXIoQm9vbGVhbikuam9pbihcIlwiKTtcbn1cbmV4cG9ydCB7XG4gIEJhdGNoSW50ZXJjZXB0b3IsXG4gIEZldGNoUmVzcG9uc2UsXG4gIElOVEVSTkFMX1JFUVVFU1RfSURfSEVBREVSX05BTUUsXG4gIElTX1BBVENIRURfTU9EVUxFLFxuICBJbnRlcmNlcHRvcixcbiAgSW50ZXJjZXB0b3JSZWFkeVN0YXRlLFxuICBjcmVhdGVSZXF1ZXN0SWQsXG4gIGRlY29kZUJ1ZmZlcixcbiAgZGVsZXRlR2xvYmFsU3ltYm9sLFxuICBlbmNvZGVCdWZmZXIsXG4gIGdldENsZWFuVXJsLFxuICBnZXRHbG9iYWxTeW1ib2wsXG4gIGdldFJhd1JlcXVlc3Rcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/index.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/interceptors/ClientRequest/index.mjs":
/*!******************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/interceptors/ClientRequest/index.mjs ***!
  \******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClientRequestInterceptor: () => (/* reexport safe */ _chunk_EKNRB5ZS_mjs__WEBPACK_IMPORTED_MODULE_0__.ClientRequestInterceptor)\n/* harmony export */ });\n/* harmony import */ var _chunk_EKNRB5ZS_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunk-EKNRB5ZS.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-EKNRB5ZS.mjs\");\n/* harmony import */ var _chunk_TJDMZZXE_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../chunk-TJDMZZXE.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-TJDMZZXE.mjs\");\n/* harmony import */ var _chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../chunk-A7Q4RTDJ.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-A7Q4RTDJ.mjs\");\n/* harmony import */ var _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunk-IHJSPMYM.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-IHJSPMYM.mjs\");\n/* harmony import */ var _chunk_3GJB4JDF_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../chunk-3GJB4JDF.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-3GJB4JDF.mjs\");\n\n\n\n\n\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2ludGVyY2VwdG9ycy9DbGllbnRSZXF1ZXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFFa0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdoQztBQUNGIiwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29yay9kYXRhLWZldGNoaW5nLW1vbm9yZXBvLXBvYy9kYXRhLWZldGNoaW5nLW1vbm9yZXBvLXBvYy9ub2RlX21vZHVsZXMvLnBucG0vQG1zd2pzK2ludGVyY2VwdG9yc0AwLjM5LjYvbm9kZV9tb2R1bGVzL0Btc3dqcy9pbnRlcmNlcHRvcnMvbGliL25vZGUvaW50ZXJjZXB0b3JzL0NsaWVudFJlcXVlc3QvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENsaWVudFJlcXVlc3RJbnRlcmNlcHRvclxufSBmcm9tIFwiLi4vLi4vY2h1bmstRUtOUkI1WlMubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jaHVuay1USkRNWlpYRS5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2NodW5rLUE3UTRSVERKLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vY2h1bmstSUhKU1BNWU0ubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jaHVuay0zR0pCNEpERi5tanNcIjtcbmV4cG9ydCB7XG4gIENsaWVudFJlcXVlc3RJbnRlcmNlcHRvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/interceptors/ClientRequest/index.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/interceptors/XMLHttpRequest/index.mjs":
/*!*******************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/interceptors/XMLHttpRequest/index.mjs ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   XMLHttpRequestInterceptor: () => (/* reexport safe */ _chunk_4NEYTVWD_mjs__WEBPACK_IMPORTED_MODULE_0__.XMLHttpRequestInterceptor)\n/* harmony export */ });\n/* harmony import */ var _chunk_4NEYTVWD_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunk-4NEYTVWD.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-4NEYTVWD.mjs\");\n/* harmony import */ var _chunk_6HYIRFX2_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../chunk-6HYIRFX2.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-6HYIRFX2.mjs\");\n/* harmony import */ var _chunk_TX5GBTFY_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../chunk-TX5GBTFY.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-TX5GBTFY.mjs\");\n/* harmony import */ var _chunk_6YM4PLBI_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunk-6YM4PLBI.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-6YM4PLBI.mjs\");\n/* harmony import */ var _chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../chunk-A7Q4RTDJ.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-A7Q4RTDJ.mjs\");\n/* harmony import */ var _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../chunk-IHJSPMYM.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-IHJSPMYM.mjs\");\n/* harmony import */ var _chunk_3GJB4JDF_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../chunk-3GJB4JDF.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-3GJB4JDF.mjs\");\n\n\n\n\n\n\n\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2ludGVyY2VwdG9ycy9YTUxIdHRwUmVxdWVzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFFa0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHaEM7QUFDRiIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmsvZGF0YS1mZXRjaGluZy1tb25vcmVwby1wb2MvZGF0YS1mZXRjaGluZy1tb25vcmVwby1wb2Mvbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2ludGVyY2VwdG9ycy9YTUxIdHRwUmVxdWVzdC9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgWE1MSHR0cFJlcXVlc3RJbnRlcmNlcHRvclxufSBmcm9tIFwiLi4vLi4vY2h1bmstNE5FWVRWV0QubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jaHVuay02SFlJUkZYMi5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2NodW5rLVRYNUdCVEZZLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vY2h1bmstNllNNFBMQkkubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jaHVuay1BN1E0UlRESi5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2NodW5rLUlISlNQTVlNLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vY2h1bmstM0dKQjRKREYubWpzXCI7XG5leHBvcnQge1xuICBYTUxIdHRwUmVxdWVzdEludGVyY2VwdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/interceptors/XMLHttpRequest/index.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/interceptors/fetch/index.mjs":
/*!**********************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/interceptors/fetch/index.mjs ***!
  \**********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FetchInterceptor: () => (/* reexport safe */ _chunk_WI4WZWP4_mjs__WEBPACK_IMPORTED_MODULE_0__.FetchInterceptor)\n/* harmony export */ });\n/* harmony import */ var _chunk_WI4WZWP4_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunk-WI4WZWP4.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-WI4WZWP4.mjs\");\n/* harmony import */ var _chunk_TX5GBTFY_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../chunk-TX5GBTFY.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-TX5GBTFY.mjs\");\n/* harmony import */ var _chunk_6YM4PLBI_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../chunk-6YM4PLBI.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-6YM4PLBI.mjs\");\n/* harmony import */ var _chunk_A7Q4RTDJ_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunk-A7Q4RTDJ.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-A7Q4RTDJ.mjs\");\n/* harmony import */ var _chunk_IHJSPMYM_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../chunk-IHJSPMYM.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-IHJSPMYM.mjs\");\n/* harmony import */ var _chunk_3GJB4JDF_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../chunk-3GJB4JDF.mjs */ \"(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/chunk-3GJB4JDF.mjs\");\n\n\n\n\n\n\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2ludGVyY2VwdG9ycy9mZXRjaC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUVrQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHaEM7QUFDRiIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmsvZGF0YS1mZXRjaGluZy1tb25vcmVwby1wb2MvZGF0YS1mZXRjaGluZy1tb25vcmVwby1wb2Mvbm9kZV9tb2R1bGVzLy5wbnBtL0Btc3dqcytpbnRlcmNlcHRvcnNAMC4zOS42L25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2ludGVyY2VwdG9ycy9mZXRjaC9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgRmV0Y2hJbnRlcmNlcHRvclxufSBmcm9tIFwiLi4vLi4vY2h1bmstV0k0V1pXUDQubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jaHVuay1UWDVHQlRGWS5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2NodW5rLTZZTTRQTEJJLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vY2h1bmstQTdRNFJUREoubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jaHVuay1JSEpTUE1ZTS5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2NodW5rLTNHSkI0SkRGLm1qc1wiO1xuZXhwb3J0IHtcbiAgRmV0Y2hJbnRlcmNlcHRvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@mswjs+interceptors@0.39.6/node_modules/@mswjs/interceptors/lib/node/interceptors/fetch/index.mjs\n");

/***/ })

};
;